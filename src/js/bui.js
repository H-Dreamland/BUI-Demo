/* @preserve 
 * @name: BUI v1.5.0  
 * @detail: BUI 是一个免费的UI交互框架, 用于快速定制开发WebApp,微信,混合移动应用(Bingotouch,Link,Dcloud,Apicloud,Appcan等).
 * @site: http://www.easybui.com/ 
 * Copyright © 2016-2018 BUI. All Rights Reserved. 
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t():"function"==typeof define&&define.amd?define(t):t()}(0,function(){"use strict";function e(e,t){return t={exports:{}},e(t,t.exports),t.exports}window.libs=window.Zepto||window.jQuery||{},window.bui={},window.router={},function(e){e.debug=!0,e.hasRouter=!1,e.isWebapp,e.currentPlatform="",e.log=!0,e.trace=!1,e.native={},e.config={},e.config.namespace="bui",e.config.classNamePrefix=e.config.namespace+"-",e.config.version="1.4.7",e.config.versionCode=20180905,e.version=e.config.version,e.versionCode=e.config.versionCode,e.config.viewport={zoom:!0,create:!0},e.config.init={auto:!0},e.config.ready={},e.config.ajax={},e.config.back={},e.config.load={},e.config.getPageParams={},e.config.refresh={},e.config.run={},e.config.checkVersion={},e.config.dialog={},e.config.confirm={},e.config.alert={},e.config.hint={},e.config.prompt={},e.config.loading={},e.config.mask={},e.config.list={},e.config.listview={},e.config.scroll={},e.config.pullrefresh={},e.config.select={},e.config.sidebar={},e.config.slide={},e.config.actionsheet={},e.config.dropdown={},e.config.accordion={},e.config.stepbar={},e.config.rating={},e.config.number={},e.config.file={},e.config.fileselect={},e.config.upload={},e.config.download={},e.config.swipe={},e.config.router={},e.config.loader={}}(window.bui);var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,i){e.prefix=function(t){return e.config.classNamePrefix+t},e.showLog=function(i,n){n=n||"";var a="";"object"==(void 0===i?"undefined":t(i))&&"message"in i&&"name"in i?a=i.message+":"+i.name+"&&stack:"+i.stack:"string"==typeof i&&(a=i),e.log&&console.error(n+" "+a),e.trace&&console.trace&&console.trace()},e.guid=function(e){function t(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},e.swipeDirection=function(e,t,i,n){var a=t-e,o=n-i,r=Math.abs(a),l=Math.abs(o);return!(r<9&&l<9)&&(r/l>3?a>0?"swiperight":"swipeleft":o>0?"swipedown":"swipeup")},e.obj=function(n,a){var o=null;a=a||null;var r=e.hasRouter?router.currentPage()||"body":"body";r=a||r;var l=i(r),s=/^(\d)/,c=/^[a-zA-z]/,u=/^#\d/,d=/^\.\d/,f="string"==typeof n,o=null,h=/^(html|head|body|header|main|footer|ul|li|section|dt|dd|div|span|img|article|i|strong|input|textarea|select|h1|h2|h3|h4|h5|h6|p)$/gi;if("object"===(void 0===n?"undefined":t(n)))return o=l.find(n);if(f&&s.test(n))return o=l.find("[id='"+n+"']");if(f&&c.test(n)){var p=h.test(n)?n:"#"+n;return o=l.find(p)}return u.test(n)?o=l.find("[id='"+n.substr(1)+"']"):d.test(n)?o=l.find("[class='"+n.substr(1)+"']"):n&&(o=l.find(n)),o},e.objId=function(t){return e.obj(t,"body")},e.selector=function(e){return void 0===e?this:i(e,this)},e.widget=function(e){return e&&e in this?this[e]:this},e.option=function(t,n){if("object"!==e.typeof(t)&&void 0===n)return"string"==typeof t?this.config[t]:this.config;if("id"==t)return e.showLog("不允许修改控件的ID参数"),this;if(t&&"object"===e.typeof(t)){var a=i.extend(this.config,t);return this.init(a)}if(this.config.hasOwnProperty(t)){var o={};o[t]=n;var a=i.extend(this.config,o);return this.init(a)}return this}}(window.bui||{},window.libs),function(e,t){e.emitter=function(){function t(){this.handle=Object.create(null)}return t.prototype.on=function(e,t,i){return"function"==typeof t?(i=t,t=this):(i=i,t=t||this),t.handle=t.handle||{},void 0===t.handle[e]&&(t.handle[e]=[]),t.handle[e].push(i),t},t.prototype.off=function(t,i,n){return"function"==typeof i?(n=i,i=this):"function"==typeof n?(n=n,i=i||this):i=this,"undefined"===t?i.handle={}:"string"==typeof t&&"function"==typeof n?e.array.remove(n,i.handle[t]):"string"==typeof t&&(i.handle={},i.handle[t]=[]),i},t.prototype.one=function(e,t){function i(){t&&t.apply(this,arguments),this.off(e,i)}return this.on(e,i),this},t.prototype.trigger=function(e){try{if(this.handle[arguments[0]]instanceof Array){var t=this.handle[arguments[0]],i=[].slice.apply(arguments);i.shift();for(var n=0,a=t.length;n<a;n++)t[n]&&t[n].apply(this.self||this,i)}}catch(e){}return this},function(e){return new t}}();var i=bui.emitter();e.on=i.on,e.off=i.off,e.trigger=i.trigger,e.one=i.one}(window.bui||{},window.libs),function(e,t){function i(t,i){function n(t){var n=i||750,a=document.head.parentNode,o=t||(h/n*100).toFixed(2);return c=o,e.config.viewport.zoom&&(a.style.fontSize=c+"px"),e.trigger.call(e,"viewportinit"),this}function a(e){return h}function o(e){return p}function r(e){return g}function l(e){return v}function s(e){return f}e.trigger.call(e,"viewportbefore");var c,u=document.querySelector("meta[name=viewport]"),d="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no",f=window.devicePixelRatio,h=document.documentElement.clientWidth,p=document.documentElement.clientHeight,g=parseInt(h)*parseInt(f),v=parseInt(p)*parseInt(f);if(u)e.config.viewport.create&&(u.content=d);else{var m=document.createElement("meta");m.name="viewport",m.content=d;var b=document.head;e.config.viewport.create&&b.appendChild(m),m=null}var w=[240,320,360,375,384,412,414,435,480,512,540,768,1024,1536,2048,2732,534,854,750],y=[32,42.67,48,50,51.2,54.93,55.2,58,64,68.27,60,60,60,60,60,60,60,60,60],x=e.array.index(document.documentElement.clientWidth,w);return x>-1&&void 0===t?c=y[x]:n(t),{width:a,height:o,fontSize:c,screenWidth:r,screenHeight:l,ratio:s,init:n}}e.viewport=i}(window.bui||{},window.libs),function(e,i){e.loader=function(n){function o(e){return e=e||{},x=i.extend({},x,e),this}function r(e){if(void 0===e)return I;if("object"===(void 0===e?"undefined":t(e))&&("modules"in e||"baseUrl"in e))I=i.extend(!0,{},I,e),S=I.modules;else if("object"===(void 0===e?"undefined":t(e))&&"moduleName"in e){var n=l(e);S[e.moduleName]=n||{},I=i.extend(!0,{},I,{modules:S}),S=I.modules}return I}function l(e){var t={moduleName:"",template:"",depend:[],script:"",style:[],isDefined:!1,isLoaded:!1,callback:null,exports:{},dependExports:[]},n={};return e.moduleName in S&&(n=S[e.moduleName]),i.extend(!0,{},t,n,e)}function s(t,i,n){try{var a=c(),o=a.name}catch(e){}var l=[],s=[];if(void 0===t)return e.showLog("define第1个参数不能为空"),this;if("function"==typeof t)n=t,t=o,i=[];else if("object"===e.typeof(t)){var d=t;t=o,i=[],n=function(){return d}}else"array"===e.typeof(t)?(n=i,i=t,t=o):"function"==typeof i?(t=t,n=i,i=[]):(t=t,i=i,n=n);var f=t in S?S[t].script||a.src:a.src;if(x.trace&&console.log("define",t),i.length)for(var h=0;h<i.length;h++){var p=i[h];p.indexOf(".css")>-1?p.indexOf("css!")>-1?s.push(p.substr(4)):s.push(p):(l.push(p),p in S||r({moduleName:p}))}if("string"==typeof t&&"function"==typeof n){r({moduleName:t,depend:l,style:s,script:f,callback:function(){var e=[u,S[o].exports,S[o]],t=[];l.length&&l.forEach(function(e,i){t.push(S[e].exports)});var i=t.concat(e);return n&&n.apply(this,i)}})}else e.showLog("define "+t+"模块的参数格式不对");return this}function c(){var e,t,n=window.location.href,o=[],r=document.currentScript;if(n.indexOf("#")>-1?o=n.split("#"):o.push(n),w=o[0].replace("/index.html","")+"/",r)return e=r.src.replace(w,""),t=r.getAttribute("name")||e.substr("0",e.indexOf(x.scriptSuffix)),{name:t,src:e};try{a()}catch(e){var l=e.stack||e.sourceURL||e.stacktrace||"",s=l.split(/[@ ]/g).pop(),c=s.replace(/(:\d+)?:\d+$/i,""),c=c.replace(new RegExp(w,"g"),"");return r=i('script[src="'+c+'"]')[0],t=r?r.getAttribute("name"):c.replace(x.scriptSuffix,""),{name:t,src:c}}}function u(t,i){x.trace&&console.log("require",t);var n={};if(t&&"string"==typeof t&&(t=[t]),i&&"function"!=typeof i)return e.showLog("require第2个参数格式为function","bui.loader.require"),n;try{d(t,function(){if(h(k)){var e=[];t.forEach(function(n,a){f(n),e.push(S[n]&&S[n].exports),a===t.length-1&&i&&i.apply(O,e||[])})}})}catch(t){e.showLog(t,"bui.loader.require")}return this}function d(t,i){function n(e,n){var a=S[e];a&&a.depend&&a.depend.length&&d(a.depend,i),a&&(a.isDefined=!0),n==t.length-1&&i&&i.apply(a)}return t=t||[],S=I.modules,t.forEach(function(a,o){var r=S[a];S[a]&&S[a].style&&S[a]&&S[a].style.length&&m(S[a].style),e.array.compare(a,k)||k.unshift(a),r&&r.isLoaded?o==t.length-1&&(i&&i.apply(r),k=[]):r&&r.callback&&!r.script?n(a,o):v(a,function(){S[a]&&S[a].style&&S[a].style.length&&m(S[a].style),n(a,o)},function(){o==t.length-1&&(i&&i.apply(null),k=[])})}),k}function f(t){S=I.modules;var i="string"==typeof t?S[t]||{}:t,n=i.depend||[],a=null,o=[];i.dependExports=[];try{if(n.length)for(var r=0;r<n.length;r++){var l=n[r],s=S[l];s.isLoaded?o[r]=s.exports:o[r]=f(s)||s.exports,s.exports=o[r],i.dependExports.push(o[r]),s.isLoaded=!0}a=i.isLoaded?i.exports:i.callback&&i.callback.apply(i,o),i.exports=a||S[i.moduleName]&&S[i.moduleName].exports,i.isLoaded=!0,x.trace&&console.log("execute",i.moduleName)}catch(t){e.showLog(t,"bui.loader.execute")}return a}function h(e){var t=!0,i=e||[];if(S=I.modules,i.length)i.forEach(function(e,i){S[e]&&!1===S[e].isDefined&&(t=!1)});else for(var n in S)S[n]&&!1===S[n].isDefined&&(t=!1);return t}function p(t){var i=!0,n=[];if(S=I.modules,"string"==typeof t){t.indexOf(",")>-1?n=t.split(","):n.push(t)}else t&&"array"===e.typeof(t)&&(n=t||[]);if(n.length)n.forEach(function(e,t){e in S||(i=!1),S[e]&&!1===S[e].isLoaded&&(i=!1)});else for(var a in S)S[a]&&!1===S[a].isLoaded&&(i=!1);return i}function g(t,i,n){return"string"==typeof t?t.indexOf(".css")>-1?(b(item),i&&i(t)):v(t,i,n):t&&"array"===e.typeof(t)&&t.forEach(function(e,a){e.indexOf(".css")>-1?(b(e),a==t.length-1&&i&&i(t)):a==t.length-1?v(e,i,n):v(e)}),this}function v(t,n,a){var o,r=this;if(S=I.modules,void 0===t||""==t)return a&&a.call(r,t),this;if(t in S)o=t,t=S[t].script||o+x.scriptSuffix;else{var l=t.indexOf(x.scriptSuffix);l>-1?(t=t,o=t.substr(0,l)):(o=t,t+=x.scriptSuffix)}var s=document.createElement("script")||{},c=x.cache?"":"?t="+(new Date).getTime(),u=t.indexOf("http://")>-1||t.indexOf("https://")>-1;s.type="text/javascript",s.async=x.async,s.src=u?t+c:I.baseUrl+t+c,s.setAttribute("name",o),s.onload=function(){x.trace&&console.log("create",t),n&&n(t)},s.onerror=function(e){x.trace&&console.log("createError",t),a&&a(t)};var d=e.array.index(t,T),f=i('script[name="'+o+'"]').length||i('script[src="'+t+'"]').length;return d>-1||f?n&&n(t):d<0&&(document.body&&document.body.appendChild(s),T.push(t)),s=null,this}function m(t){var i,n=t.length;if("array"===e.typeof(t))for(i=0;i<n;i++){var a=t[i];b(a)}else b(t)}function b(t){if("string"!=typeof t)return void e.showLog(t+"的格式不正确");if(e.array.index(t,C)<0){var i=document.createElement("link")||{};i.href=t+(x.cache?"":"?t="+(new Date).getTime()),i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),document.head&&document.head.appendChild(i),i=null,C.push(t)}}var w,y={cache:!0,async:!1,trace:!1,scriptSuffix:".js"},x=i.extend({},y,e.config.loader,n),k=[],T=[],C=[],I={baseUrl:"",modules:{}},S={},O={init:o,define:s,require:u,map:r,import:g,checkLoad:p,checkDefine:h};return O}}(window.bui||{},window.libs),function(e,i){e.router=function(n){function a(t){if(t=i.extend(!0,{},W,e.config.router,t),W=ge.config=t,e.hasRouter=!0,he=!0,"pages/main/main.html"===t.indexModule.template&&"pages/main/main.js"===t.indexModule.script||(ue=loader.map(t.indexModule)),G&&"effect"in t&&ie.forEach(function(e,i){e.effect=t.effect}),!t.id)return e.showLog("id 不能为空","bui.router.init"),!1;if(M=e.objId(t.id),A=bui.mask({appendTo:M,opacity:0,autoClose:!1}),H=e.loading({display:"block",width:30,height:30,opacity:0}),V=window.viewport.width()||document.documentElement.clientWidth,q=t.height||window.viewport.height()||document.documentElement.clientHeight,J=M.children(".bui-router-main"),J.length)J.css({width:V,height:q});else{var n=I(t);M.html(n),J=M.children(".bui-router-main")}return $||r(t),D.call(this,"init",{target:M[0]}),this}function o(){var e=fe.get("hasCache",0);Boolean(e)&&W.reloadCache?se.load():l()}function r(t){return e.isWebapp?window.addEventListener("load",function(){o()},!1):e.on("pageready",function(){o()}),W.reloadCache&&window.addEventListener("beforeunload",function(e){se.save(),D.call(B,"beforeunload",{target:ie[ie.length-1]})}),W.syncHistory&&"pushState"in window.history&&window.addEventListener("popstate",function(t){var i=s(),n=""==i.pid?W.indexModule.moduleName:i.pid,a=p(n);e.array.index(n,ie,"pid")>-1?(h({index:a,param:i.param}),D.call(B,"popstate",{type:"back",prevTarget:ie[a-1],target:ie[a]})):(u({url:n,param:i.param}),D.call(B,"popstate",{type:"load",prevTarget:ie[ie.length-2],target:ie[ie.length-1]}))}),this}function l(t){try{var i=s();if(i.pid){if(i.pid.indexOf("http://")>-1||i.pid.indexOf("https://")>-1)return void u({url:i.pid,param:i.param,iframe:!0});u({url:i.pid,param:i.param})}else u({url:W.indexModule.moduleName,param:i.param||{}})}catch(t){e.showLog(t,"bui.router.loadUrl")}}function s(e){var t=window.location.hash||window.location.search,e=0!=e,i=t&&t.indexOf("?"),n=i>-1?t&&t.substr(1,i-1):window.location.hash.substr(1),a=n&&n.indexOf(".html"),o=a>-1?n.substr(0,a):n,r=a>-1?n:n+".html",l={};if(i>-1)for(var s=t&&t.substr(i+1),c=s&&s.split("&"),u=0;u<c.length;u++){var d=e?decodeURIComponent(c[u].split("=")[1]):c[u].split("=")[1];l[c[u].split("=")[0]]=d}return{pid:o,url:r,param:l}}function c(t){var n=i.Deferred(),a=function(i,a){return g(i.url,function(n){var o=e.guid(),r=f(i.url),l=r.pid,s=(O({id:o,content:n,pid:l}),[]);se.add(l,{id:o,pid:l,template:n}),s.push(l),i.style&&"array"===e.typeof(i.style)?i.style.forEach(function(e,t){s.push(e)}):i.style&&"string"===e.typeof(i.style)&&s.push(i.style),i.script&&"array"===e.typeof(i.script)?i.script.forEach(function(e,t){s.push(e)}):i.script&&"string"===e.typeof(i.script)&&s.push(i.script),loader.import(s,function(){D.call(ge,"preloadend",{prevTarget:null,target:null}),a&&a(t)},function(){D.call(ge,"preloadend",{prevTarget:null,target:null}),a&&a(t)})},function(t){e.showLog(i.url+"请求失败"),n.reject(i.url)}),n.promise()};return t&&"object"===e.typeof(t)?"url"in t&&a(t,function(){n.resolve(t)}):t&&"array"===e.typeof(t)&&t.forEach(function(e,i){i==t.length-1?"url"in e&&a(e,function(){n.resolve(t)}):"url"in e&&a(e)}),n}function u(t){function n(e){A&&A.hide(),d.progress&&H&&H.hide(),ne.removeLast(),h.reject(e)}function a(){Z||y in te?(s({pid:y}),re&&r()):(loader.checkLoad(y)?s({pid:y}):loader.require(y,function(t){try{d.firstAnimate&&d.progress&&H&&H.hide(),te[y]=t||null,h.resolve(t)}catch(t){e.showLog(t,"bui.router.load"),h.reject()}}),d.callback&&d.callback({prevTarget:p,target:k}),D.call(ge,"complete",{prevTarget:p,target:k}))}function o(){Y=e.objId(L.id);var t=Y.find(".bui-page");t.length&&W.autoInit&&e.init({id:t,height:q})}function r(t){T(),C(),Y=e.objId(m);try{K||Z||d.replace||d.part?(A&&A.hide(),!d.firstAnimate&&d.progress&&H&&H.hide(),t&&t(),Y.css("zIndex",5)):(X&&X.hide(),_&&_.show(function(){A&&A.hide(),!d.firstAnimate&&d.progress&&H&&H.hide(),t&&t(),Y.css("zIndex",5)}))}catch(t){e.showLog(t,"bui.router.doAnimate")}}function l(t){var i="";if(d.part)i=E({content:t}),d.id?b.html(i):e.showLog("id 不能为空","router.loadPart");else if(d.replace){var n=ne.getLast();b=ie.length?e.objId(n.id):J,n.pid=y,n.url=x,n.param=v;e.array.index(y,ie,"pid");i=y in ae?se.get(y,"template"):E({content:t}),b.html(i).attr("data-page",y)}else Z||(i=O({id:m,content:t,pid:y}),J&&J.attr("data-main",m).append(i));return i}function s(e){var t=e||ne.getLast(),i=de[t.pid]&&de[t.pid]||{},n=i.callback,a=n&&n.apply(i,i.dependExports)||i.exports;te[t.pid]=a||null,i.exports=a,Z=!1,K=!1,D.call(ge,"refresh",{prevTarget:p,target:t}),h.resolve(a)}function c(){var e=ie[ie.length-2]||null,t=ne.getLast();K&&(D.call(ge,"firstload",{prevTarget:e,target:t}),K=!1),d.part?D.call(ge,"loadpart",{prevTarget:e,target:t}):D.call(ge,"load",{prevTarget:e,target:t})}var u={id:"",url:"",param:{},effect:"",firstAnimate:W.firstAnimate,progress:W.progress,reload:W.reload,replace:!1,iframe:!1,part:!1,callback:null},d=i.extend(!0,{},u,t),h=i.Deferred(),p=ne.getLast()||null,v=(ie[ie.length-2],d.param||{});d.id=(d.id&&d.id.indexOf("#")>-1?d.id.substr(1):d.id)||"";var m=d.replace?p.id:d.id||e.guid(),b=e.objId(m);if(!d.url)return e.showLog("url 不能为空","bui.router.load"),h.promise();if(d.url.indexOf("tel:")>=0||d.url.indexOf("mailto:")>=0||d.url.indexOf("sms:")>=0)return e.unit.openExtral(d.url),h.promise();"undefined"==d.url&&(d.url="main"),A&&A.show(),d.progress&&H&&H.show();var w=f(d.url),y=w.pid,x=d.iframe?d.url:w.url,k={id:m,pid:y,url:x,replace:d.replace,param:v,part:{},effect:t.effect||W.effect};if(D.call(ge,"loadbefore",{prevTarget:p,target:k}),ie.length){var I=ie.length-1;ie[I].effect=d.effect}!Z&&!d.part&&!d.replace&&ne.add(k),d.replace&&ne.replace(k);var L=ne.getLast();if(d.part&&(L.part[y]={id:m,pid:y,url:x,param:v},ie.splice(ie.length-1,1,L)),d.part||(le=k),y in ae)!function(e){l(se.get(e.pid,"template")),e.part?(s(e),A&&A.hide(),e.progress&&H&&H.hide()):(o(),!Z&&r(function(){e.progress&&H&&H.hide()}),s(e),A&&A.hide())}({pid:y,progress:d.progress,part:d.part}),d.callback&&d.callback({prevTarget:p,target:k}),D.call(ge,"complete",{prevTarget:p,target:k});else{if(d.iframe)return function(e){var t=S({id:e.id,pid:e.pid,url:e.url,param:e.param});J&&J.attr("data-main",e.id).append(t),r(function(){d.progress&&H&&H.hide()})}({id:m,pid:y,url:d.url,param:v}),h.promise();if(d.part)return function(){g(x,function(t,i,n){e.objId(m).html(t),a(),c(),W.cache&&se.add(y,{id:m,pid:y,template:t}),A&&A.hide(),d.progress&&H&&H.hide()},function(e,t,i){n(x),D.call(ge,"loadfail",e,t,i)})}(),h.promise();if(d.firstAnimate)return function(){var t=O({id:m,content:"",pid:y});J&&J.attr("data-main",m).append(t),r(function(){g(x,function(t,i,n){e.objId(m).html(t),o(),a(),c(),W.cache&&(O({id:m,content:t,pid:y}),se.add(y,{id:m,pid:y,template:t})),ce.add(y,{id:m,pid:y,param:v})},function(e,t,i){n(x),D.call(ge,"loadfail",e,t,i)})})}(),h.promise();!function(){g(x,function(e,t,i){l(e),W.cache&&se.add(y,{id:m,pid:y,template:e}),o(),r(function(){d.progress&&H&&H.hide()}),a(),c(),ce.add(y,{id:m,pid:y,param:v})},function(e,t,i){n(x),D.call(ge,"loadfail",e,t,i)})}()}return h.promise()}function d(e){var t={id:"",url:"",param:{},part:!0};return u(i.extend(!0,{},t,e)).promise()}function f(e){var t="",i=e;ue=loader.map(),de=ue.modules;var n=i.indexOf(W.pageSuffix);return n>-1?(t=i,(i=t.substr(0,n))in de||(i=x(t)||i)):(i=i,t=de[i]&&de[i].template||i+W.pageSuffix||""),{pid:i,url:t}}function h(t){var n=this,t=t||{},a=i.extend(!0,{index:-1,name:"",callback:null},t),o=parseInt(a.index),r=ie.length;if(o>0)return void e.showLog("index 参数只能是负数","bui.router.back");var l=ne.getLast(),s=r-1;return D.call(ge,"backbefore",{prevTarget:null,target:l}),a.name&&(o=p(a.name)),Math.abs(o)>s&&(o=-s),r>1&&Q&&(o<-1&&C(o),Q=!1,t.effect&&(X.option({effect:t.effect}),_.option({effect:t.effect})),X&&X.show(),_&&_.hide(function(){var t=r+o;k(t),ne.removeNext(t),C();var i=T(),s=i.pid;e.objId(i.id).css("zIndex",5),function(){var e={};e=te[s]||{},a.callback&&a.callback.call(n,e,i),D.call(ge,"back",{prevTarget:l,target:i}),le=i,Q=!0}()})),this}function p(t){var i,n=e.array.indexs(t,ie,"pid"),a=n.length;if(a){var o=-(ie.length-n[a-1]-1);i=0==o?-1:o}else i=-1;return i}function g(t,n,a){t?i.ajax({url:t,dataType:"html",async:W.async,success:function(e,i,a){a.url=t,n&&n(e,i,a),D.call(ge,"success",e,i,a)},error:function(e,t,i){a&&a(e,t,i),D.call(ge,"fail",e,t,i)}}):e.showLog("url 不能为空","bui.router.requestUrl")}function v(){Z=!0;var e=ie.length-1,t=ie[e];return u({id:t.id,url:t.url,param:t.param}),this}function m(e){return e=e||{},u({url:e.url||"",param:e.param||{},replace:!0}),this}function b(){return ne.getLast().param}function w(t){if(void 0===t)return void e.showLog("必须传模块id才能获取参数,可以通过define的module参数获取");var i=ne.getLast(),n=null,a=t in i.part?i.part[t]:{};return"param"in a&&(n=a.param),n}function y(e){var t;return e&&(t=e in te),t}function x(t){for(var i in de)try{if((de[i].template||"")===t)return i}catch(t){e.showLog(t.message)}}function k(e){J.children().each(function(t,n){t>=e&&i(n).remove()})}function T(){var t=ne.getLast(),i=t.id||"",n=t.effect||W.effect;return i&&(_=null,_=e.toggle({id:document.getElementById(i),effect:ee[n].inRight||""}),J&&J.attr("data-main",i),D.call(ge,"pageshow",{target:t})),t}function C(t){t=t||-1;var i=ie.length+t-1,n=ie[i],a=n&&n.id||"",o=n&&n.effect||W.effect;return a&&(X=null,X=e.toggle({id:document.getElementById(a),effect:ee[o].inLeft||""})),D.call(ge,"pagehide",{target:n}),n}function I(e){e=e||{};var t="";return t+='<div class="bui-router-main" style="width:'+V+"px;height:"+q+'px;">',t+="</div>"}function S(t){var i=t.param?e.setUrlParams(t.url,t.param):t.url,n="";return n+='<div id="'+t.id+'" class="bui-router-item" data-page="'+t.pid+'">',n+='<iframe class="bui-router-iframe" src="'+i+'"></iframe>',n+="</div>"}function O(e){var t="";return t+='<div id="'+e.id+'" class="bui-router-item" data-page="'+e.pid+'">',t+=e.content||"",t+="</div>"}function E(e){var t="";return t+=e.content}function L(t,i){return G=!0,e.option.call(ge,t,i)}function j(t,i){return e.on.apply(ge,arguments),this}function N(t,i){return e.off.apply(ge,arguments),this}function D(t){ge.self=this==window||this==ge?null:this,e.trigger.apply(ge,arguments)}function P(){return le}function F(e){return document.getElementById(le.id)}function R(e){return le.id}function z(n){var a=ne.getLast(),o=e.objId(a.id),r="object"===(void 0===n?"undefined":t(n))?i(n):o.find(".bui-page");return r.length&&e.init({id:r,height:q}),this}var M,H,A,V,q,U={id:"",progress:!1,syncHistory:!0,autoInit:!0,firstAnimate:!1,indexModule:{moduleName:"main",template:"pages/main/main.html",script:"pages/main/main.js"},cache:!0,reloadCache:!1,reload:!1,height:0,async:!0,effect:"push",hashPrefix:"#",scriptSuffix:".js",pageSuffix:".html"},W=i.extend({},U,e.config.router,n),Y=null,B=this,J=null,X=null,_=null,$=!1,K=!0,Q=!0,Z=!1,G=!1,ee={none:{inRight:"showIn",inLeft:"showIn"},fadein:{inRight:"fadeIn",inLeft:"fadeIn"},fadeinslide:{inRight:"fadeInRight",inLeft:"fadeInLeft"},slide:{inRight:"slideInRight",inLeft:"slideInLeft"},push:{inRight:"pushInRight",inLeft:"pushInLeft"},zoom:{inRight:"zoomIn",inLeft:"zoomIn"},cover:{inRight:"coverInRight",inLeft:"coverInLeft"},zoomslide:{inRight:"zoomSlideInRight",inLeft:"zoomSlideInLeft"},fadeinslideback:{inRight:"fadeInLeft",inLeft:"fadeInRight"},slideback:{inRight:"slideInLeft",inLeft:"slideInRight"},pushback:{inRight:"pushInLeft",inLeft:"pushInRight"},coverback:{inRight:"coverInLeft",inLeft:"coverInRight"},zoomslideback:{inRight:"zoomSlideInLeft",inLeft:"zoomSlideInRight"}},te={},ie=[],ne={},ae={},oe={},re=!1,le={},se={},ce={},ue=loader.map(W.indexModule),de=ue.modules,fe=e.storage({local:!1}),he=!1;ne.get=function(){return ie},ne.add=function(t){t=t||{};var i=window.location.origin+window.location.pathname+"#"+t.pid,n=e.setUrlParams(i,t.param);if(ie.push(t),!K)return W.syncHistory&&"pushState"in window.history&&window.history.pushState(t,null,n),ie},ne.replace=function(t){t=t||{};var i=ie.length-1,n=window.location.origin+window.location.pathname+"#"+t.pid,a=e.setUrlParams(n,t.param);return i>-1&&(ie.splice(i,1,t),W.syncHistory&&"replaceState"in window.history&&window.history.replaceState(t,null,a)),ie},ne.getLast=function(e){var t=ie.length-1,i=ie[t]||{};return e?i[e]:i},ne.removeNext=function(t){var i=ie.length-t;ie.splice(t,i);var n=ne.getLast(),a=window.location.origin+window.location.pathname+"#"+n.pid,o=e.setUrlParams(a,n.param);W.syncHistory&&"replaceState"in window.history&&window.history.replaceState(n.param,null,o)},ne.removeLast=function(){var e=ie.length-1;ne.removeNext(e)},se.add=function(e,t){return ae[e]=t||{},ae[e]},se.get=function(e,t){if(t){return(ae[e]||{})[t]}return ae[e]},se.save=function(){if(ie.length>1){var e=M.html();fe.set("cacheHtml",e),fe.set("cacheHistory",ie),fe.set("hasCache","true")}},se.load=function(){var t=fe.get("cacheHtml",0),i=fe.get("cacheHistory",0),n=[];if(i.length>1){M.html(t),J=M.children(".bui-router-main");try{i.forEach(function(e,t){var i="string"==typeof e?JSON.parse(e):e;n.push(i)});var a=n[n.length-1];le=a,loader.require(a.pid,function(e){te[a.pid]=e||null}),j("back",function(e){loader.require(e.target.pid,function(t){te[e.target.pid]=t||null})})}catch(t){e.showLog(t)}ie=n,T(),C(),K=!1,re=!0,se.clear()}},se.clear=function(){fe.remove("cacheHistory"),fe.remove("cacheHtml"),fe.remove("hasCache")},ce.add=function(e,t){return oe[e]=t||{},oe[e]},ce.get=function(e,t){if(t){return(oe[e]||{})[t]}return oe[e]};var pe=function(e){document.getElementById(le.id)||document;return i}(),ge={init:a,option:L,data:{},on:j,off:N,load:u,loadPart:d,replace:m,refresh:v,back:h,isLoad:y,$:pe,currentId:R,currentPage:F,currentModule:P,getPageParams:b,getPartParams:w,getHistory:ne.get,preload:c,initScroll:z,history:{get:ne.get,getLast:ne.getLast}};return ge}}(window.bui||{},window.libs),function(e,i){e.objectToKeyString=function(e,t){var i="";for(var n in e){i+="&"+n+"="+(t?encodeURIComponent(e[n]):e[n])}return i.substr(1)},e.keyStringToObject=function(t,i){var n,a={},o=[];try{for(o=t.split("&"),n=0;n<o.length;n++){var r=i?decodeURIComponent(o[n].split("=")[1]):o[n].split("=")[1];a[o[n].split("=")[0]]=r}}catch(t){e.showLog(t)}return a},e.setUrlParams=function(e,i,n){var n=0!=n,i="object"==(void 0===i?"undefined":t(i))?i:{},a=this.objectToKeyString(i,n);return""==a?e:e+"?"+a},e.getUrlParams=function(e){var e=0!=e,t=window.location.search,i={};if(t.indexOf("?")>-1){var n=t.substr(1);i=this.keyStringToObject(n,e)}return i},e.getUrlParam=function(e){var t=window.location.search,i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)","i"),n=t.substr(1).match(i);return null!=n?decodeURIComponent(n[2]):null},e.typeof=function(e){var t=Object.prototype.toString.call(e).slice(8,-1);return t=t.toLowerCase()},e.jsonToString=function(i){function n(i){if(i&&"object"===e.typeof(i)){for(var n in i){var a=i[n];"object"===(void 0===a?"undefined":t(a))&&(i[n]=JSON.stringify(a))}return i}}function a(i){if(i&&"array"===e.typeof(i))return i.forEach(function(e,n){"object"===(void 0===e?"undefined":t(e))&&(i[n]=JSON.stringify(e))}),i}return"object"===(void 0===i?"undefined":t(i))?function(t){function i(t,i){var o=t[i];return o&&"object"===e.typeof(o)?t[i]=n(o):o&&"array"===e.typeof(o)?t[i]=a(o):t[i]=o,t[i]}var o;if("object"===e.typeof(t)){for(var r in t)t[r]=i(t,r);o=JSON.stringify(t)}else"array"===e.typeof(t)?(t.forEach(function(e,n){t[n]=i(t,n)}),o=JSON.stringify(t)):o=t;return o}(i):i},e.stringToJson=function(i){function n(i){var a,o;try{if(a="object"===(void 0===i?"undefined":t(i))?i:JSON.parse(i),"array"===e.typeof(a))a.forEach(function(e,t){a[t]=n(e)});else if("object"===e.typeof(a))for(var r in a){var l=a[r];a[r]=n(l)}o=a}catch(e){o=i}return o}return i&&n(i)},e.checkTargetInclude=function(e,t){var n=t,a=[];if(n.indexOf(",")>-1){a=n.split(",");var o,r=a.length;for(o=0;o<r;o++){var l=a[o];l.indexOf(".")>-1&&(a[o]=l.substr(1))}}else n.indexOf(".")>-1?a[0]=n.substr(1):a[0]=n;var s,c=a.length;for(s=0;s<c;s++)if(i(e).hasClass(a[s]))return!0;return!1}}(window.bui||{},window.libs),function(e,t){e.array={},e.array.index=e.inArray=function(t,i,n){var i=i||[];if("string"!=typeof n){return i.indexOf(t)}for(var a in i)try{if((i[a]&&i[a][n])===t)return parseInt(a)}catch(t){e.showLog(t.message,"bui.inArray")}return-1},e.array.compare=e.compareArray=function(e,t,i){var t=t||[];if("string"!=typeof i){return t.indexOf(e)>-1}for(var n in t)try{if((t[n]&&t[n][i])===e)return!0}catch(e){}return!1},e.array.remove=e.removeArray=function(e,t,i){var n=t||[];return n.map(function(t,a){try{("string"==typeof i||"number"==typeof i?t[i]:t)===e&&n.splice(a,1)}catch(e){}}),n},e.array.filter=e.filterArray=function(e,t,i){var n=[],t=t||[];if("string"==typeof i)for(var a in t)try{var o=t[a]&&t[a][i],r=new RegExp(e);r.test(o)&&n.push(t[a])}catch(e){}else t.map(function(i,a,o){return new RegExp(e).test(i)&&n.push(t[a]),i===e});return n},e.array.indexs=e.indexArray=function(e,t,i){var t=t||[],n=[];if("string"==typeof i)for(var a in t)try{var o=t[a]&&t[a][i];o===e&&n.push(+a)}catch(e){}else t.forEach(function(t,i,a){t===e&&n.push(+i)});return n},e.array.excess=e.excessArray=function(e,t,i){var t=t||[],n={},a=[];if("string"==typeof i)for(var o in t)try{var r=t[o]&&t[o][i];n[r]!==r&&(n[r]=r,a.push(t[o]))}catch(e){}else t.forEach(function(e,t,i){n[e]!==e&&(n[e]=e,a.push(e))});return a},e.array.copy=e.copyArray=function(t,i,n){var a=[];if(form=i||0,n=n||t&&t.length,!t||"array"===e.typeof(t)){t.forEach(function(e,t){a.push(e)});return a.splice(i,n)||[]}}}(window.bui||{},window.libs),function(e,i){e.storage=function(i){function n(t,i,n){var a=1==l?null:d.getItem(t),o=[],r="",s=n?i[n]:i;if(null===a){o.push(i),r=JSON.stringify(o);try{d.setItem(t,r)}catch(e){"QuotaExceededError"==e.name&&console.log("超出本地存储限额！")}}else{var c=JSON.parse(a);if(n?e.array.compare(s,c,n):e.array.compare(s,c)){e.array.remove(s,c,n),c[u](i);try{r=JSON.stringify(c),d.setItem(t,r)}catch(e){"QuotaExceededError"==e.name&&console.log("超出本地存储限额！")}}else{c[u](i),c.length>l&&0!=l&&c.pop();try{r=JSON.stringify(c),d.setItem(t,r)}catch(e){"QuotaExceededError"==e.name&&console.log("超出本地存储限额！")}}}return this}function a(t,i,n){var a,o=d.getItem(t)||"";try{a=o&&e.stringToJson(o)}catch(t){a=o,e.showLog(t.name+": "+t.message,"bui.storage.get")}if("number"==typeof i&&n)a=a&&a[i]&&a[i][n]||void 0;else if("string"==typeof i){var r=e.array.index(i,a,n);a=a&&a[r]}else a="number"==typeof i?a&&a[i]||void 0:a;return a}function o(t,i,n){if("string"!=typeof t)return void e.showLog("要删除的字段名只能是字符串","bui.storage.remove");var o=a(t)||[];if("number"==typeof i){var r="number"==typeof n?n:r;o.splice(i,r);try{var l=JSON.stringify(o)||"";d.setItem(t,l)}catch(t){e.showLog(t.name+": "+t.message,"bui.storage.remove")}}else if("string"==typeof i){var s=e.array.remove(i,o,n);try{var l=JSON.stringify(s)||"";d.setItem(t,l)}catch(t){e.showLog(t.name+": "+t.message,"bui.storage.remove")}}else d.removeItem(t);return this}function r(){return d.clear(),this}var l,s,c;"number"==typeof i||"string"==typeof i?(l=0==parseInt(i)?0:parseInt(i)||1,c=!0,s=!0):"object"===(void 0===i?"undefined":t(i))?(l=i&&0==i.size?0:i.size||1,c=!i||0!=i.local,s=!i||0!=i.reverse):(l=1,c=!0,s=!0);var u=s?"push":"unshift",d=c?localStorage:sessionStorage;return{get:a,set:n,remove:o,clear:r}}}(window.bui||{},window.libs),function(e,t){e.unit={},e.unit.remToPx=function(e){var t=window.viewport&&window.viewport.fontSize||100,e=(parseFloat(e)*t).toFixed(2);return e},e.unit.pxToRem=function(e){var t=window.viewport&&window.viewport.fontSize||100,e=(parseFloat(e)/t).toFixed(2);return e},e.unit.pxToRemZoom=function(e){var e=(parseFloat(e)/100).toFixed(2);return e},e.unit.debounce=function(e,t,i){var n;return function(){var a=i||this,o=arguments,r=function(){n=null,e.apply(a,o)};clearTimeout(n),n=setTimeout(r,t)}},e.unit.throttle=function(e,t,i){t||(t=250);var n,a;return function(){var o=i||this,r=+new Date,l=arguments;n&&r<n+t?(clearTimeout(a),a=setTimeout(function(){n=r,e.apply(o,l)},t)):(n=r,e.apply(o,l))}},e.unit.startWithCss=function(e){var t=new RegExp("^\\.|^#");return"string"==typeof e&&t.test(e)},e.unit.startWithId=function(e){var t=new RegExp("^#");return"string"==typeof e&&t.test(e)},e.unit.startWithClass=function(e){var t=new RegExp("^\\.");return"string"==typeof e&&t.test(e)},e.unit.tel=function(t){var i,t=String(t),n="tel:";return/(^1\d{10}$)|(^0\d{2,3}-?\d{7,8}$)/.test(t)||0===t.indexOf("+")?(0==t.indexOf("+")&&(n="wtai://wp/mc;"),i=t,window.location.href=n+i,e):e},e.unit.sms=function(t,i){var n=navigator.userAgent,a=/(iPhone|iPad|iOS)/i.test(n),o=a?"&":"?";return window.location.href="sms:"+t+o+"body="+i,e},e.unit.mailto=function(t){var t="email"in t?t:{};return"string"==typeof t.email&&t.email.indexOf("@")>0?window.location.href="mailto:"+t.email+"?subject="+(t.subject||"")+"&body="+(t.body||"")+"&cc="+(t.cc||""):e.showLog(email+"格式不正确"),e},e.unit.openExtral=function(t){var i=[],n="",t=String(t);if(t.indexOf("mailto:")>=0)if(i=t.split("mailto:"),n=i[1],n.indexOf("?")>-1){
var a=n.split("?"),o=e.keyStringToObject(a[1]);o.email=a[0],e.unit.mailto(o)}else e.unit.mailto({email:n});if(t.indexOf("tel:")>=0&&(i=t.split("tel:"),n=parseInt(i[1]),e.unit.tel(n)),t.indexOf("sms:")>=0)if(i=t.split("sms:"),n=i[1],t.indexOf("=")>=0){var r=t.split("="),l=r[1];e.unit.sms(n,l)}else e.unit.sms(n);return e}}(window.bui||{},window.libs),function(e,t){e.platform=function(){function e(e){return/Windows NT/i.test(c)}function t(){return/Macintosh/i.test(c)}function i(e){return/(Android|Linux)/i.test(c)}function n(e){return/(iPhone)/i.test(c)}function a(e){var t=!1;return 3==window.devicePixelRatio&&375==document.documentElement.clientWidth&&812==document.documentElement.clientHeight&&(t=!0),t}function o(e){return/(iPad)/i.test(c)}function r(e){return/(iPhone|iPad|iOS)/i.test(c)}function l(e){return/(micromessenger)/i.test(c)}function s(e){return/(crosswalk)/i.test(c)}var c=navigator.userAgent;return{isAndroid:i,isIphone:n,isIpad:o,isIos:r,isWeiXin:l,isBingotouch:s,isMac:t,isIphoneX:a,isWindow:e}}()}(window.bui||{},window.libs),function(e,t){e.checkVersion=function(i){function n(){e.platform.isIos()?e.run({id:d,native:f.native}):e.run({id:u,native:f.native})}function a(i){h.on("click",function(){g<l?(x(),y({title:"新版本"+c,content:s,buttons:i.buttons,width:i.width,height:i.height,mask:i.mask,callback:function(){"立即下载"==t(this).text().trim()&&n()}})):(k(),e.hint(b)),i.callback&&i.callback.call(this)}),p=!0}function o(i){e.ajax(i).done(function(o){var r=o,h=parseInt(r.minVersionCode);u=r.downloadUrl||"",d=r.iosDownloadUrl||"",s=r.remark||"检测到新版本"+c+",是否立即下载",l=parseInt(r.versionCode),c=r.versionName,r.isForced?(x(),g<h?y({title:i.title,content:m,width:i.width,height:i.height,mask:i.mask,autoClose:!1,buttons:[{name:"立即下载",className:"primary-reverse"}],callback:function(){try{n()}catch(t){e.showLog(t)}}}):g>h&&g<l?y({title:i.title,content:s,buttons:i.buttons,width:i.width,height:i.height,mask:i.mask,callback:function(){try{"立即下载"==t(this).text().trim()&&n()}catch(t){e.showLog(t)}}}):(k(),e.hint(b))):g<l?x():k(),f.onSuccess&&f.onSuccess(r),!p&&f.id&&a(i)}).fail(function(t){f.onFail&&f.onFail(),i.tips.fail&&e.hint(i.tips.fail)})}var r={id:"",target:"i",title:"版本更新",tips:{nowVersion:"",minVersion:"您的版本太低,需要卸载安装最新版才能正常使用!",fail:"网络超时,请检测网络再次尝试"},currentVersion:"",currentVersionCode:"",width:580,height:500,mask:!0,url:"",data:{},native:!0,method:"GET",buttons:[{name:"取消",className:""},{name:"立即下载",className:"primary-reverse"}],timeout:2e4,callback:null,onSuccess:null,onFail:null};i=i||{};var l,s,c,u,d,f=t.extend(!0,r,e.config.checkVersion,i),h=t(f.id),p=!1,g=parseInt(f.currentVersionCode||e.config.versionCode),v=f.currentVersion||e.config.version,m=f.tips.minVersion,b=f.tips.nowVersion||"您目前的版本"+v+",已经是最新了 ^_^",w=f.target.indexOf("#")>-1?e.obj(f.target):h?h.find(f.target):null,y=e.confirm;!function(e){o(e)}(f);var x=function(){w&&w.find(".bui-badges").length||w&&w.append('<span class="bui-badges"></span>')},k=function(){w&&w.find(".bui-badges").remove()}}}(window.bui||{},window.libs),function(e,t){e.timer=function(i){function n(){return d=h,f=!0,clearTimeout(p),this}function a(){return h=c?s.times:0,clearTimeout(p),g(),this}function o(){if(f&&(h=d,f=!1),0==h)return h=0,u&&u.text(h),s.onEnd&&s.onEnd.call(this,{count:h,target:u&&u[0]}),void clearTimeout(p);var e=h<10?"0"+h:h;return u&&u.text(e),s.onProcess&&s.onProcess.call(this,{count:h,target:u&&u[0]}),h--,p=setTimeout(function(){o()},s.interval),this}function r(){if(f&&(h=d,f=!1),h==s.times)return s.onEnd&&s.onEnd.call(this),h=s.times,u&&u.text(h),void clearTimeout(p);var e=h<10?"0"+h:h;return u&&u.text(e),s.onProcess&&s.onProcess.call(this,h),h++,p=setTimeout(function(){r()},s.interval),this}var l={interval:1e3,target:null,reduce:!0,onEnd:null,onProcess:null,times:10},s=t.extend({},l,i),c=s.reduce,u=s.target?e.obj(s.target):null,d=0,f=!1,h=c?s.times:0,p=null,g=c?o:r;return{stop:function(){d=0,h=c?s.times:0,clearTimeout(p)},start:g,restart:a,pause:n}}}(window.bui||{},window.libs),function(e,i){e.animate=function(n){function a(t){return t.id?(N=e.objId(t.id),N.css({"-webkit-transition":A,transition:A}),D=t.open3D,P=t.zoom,F=t.animates||[],z=R.config=t,this):void e.showLog("animate id不能为空","bui.animate")}function o(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?"-"+e:P?-t/100+"rem":-t+"px";var i="translateX("+e+")";return F.push(i),M.push(i),this}function r(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?e:P?t/100+"rem":t+"px";var i="translateX("+e+")";return F.push(i),M.push(i),this}function l(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?"-"+e:P?-t/100+"rem":-t+"px";var i="translateY("+e+")";return F.push(i),M.push(i),this}function s(e){var e=e,t=Math.abs(parseFloat(e));e="string"==typeof e&&e.indexOf("%")>-1?e:P?t/100+"rem":t+"px";var i="translateY("+e+")";return F.push(i),M.push(i),this}function c(e){var t=String(e),e=t.indexOf(",")>-1?t:e+",1",i="scale("+e+")";return F.push(i),M.push(i),this}function u(e){var e=String(e),t="scaleX("+e+")";return F.push(t),M.push(t),this}function d(e){var e=String(e),t="scaleY("+e+")";return F.push(t),M.push(t),this}function f(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",i="rotate("+e+")";return F.push(i),M.push(i),this}function h(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",i="rotateX("+e+")";return F.push(i),M.push(i),this}function p(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",i="rotateY("+e+")";return F.push(i),M.push(i),this}function g(e){var e,t=String(e),n=[];t.indexOf(",")>-1?(n=t.split(","),e="",i.each(n,function(t,i){t<2&&(e+=i.indexOf("deg")>-1?","+i:","+i+"deg")}),e=e.substr(1)):e=t.indexOf("deg")>-1?t:t+"deg,0";var a="skew("+e+")";return F.push(a),M.push(a),this}function v(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",i="skewX("+e+")";return F.push(i),M.push(i),this}function m(e){var t=String(e),e=t.indexOf("deg")>-1?t:t+"deg",i="skewY("+e+")";return F.push(i),M.push(i),this}function b(e){var t=String(e);return N.css({"-webkit-transform-origin":t,"transform-origin":t}),this}function w(e,t){var i=t||"ease-out";return A="number"==typeof e?"all "+e+"ms "+i:0==e||"none"==e?"none":1==e?"all 300ms "+i:e||"all 300ms "+i,N.css({"-webkit-transition":A,transition:A}),this}function y(){return F=[],M=[],H=[],V=0,this}function x(e){return q&&(w(),q=!1),N.css({"-webkit-transform":"",transform:""}),"none"!=A&&N.one("webkitTransitionEnd",function(){e&&e.call(R,this)}),y(),this}function k(e){var t=D?M.join("")+"translateZ(0)":M.join("");try{H[V]=[],H[V].push(F.join("")),F=[],V++}catch(e){}return N.css({"-webkit-transform":t,transform:t}),"none"!=A?N.one("webkitTransitionEnd",function(){e&&e.call(R,this)}):e&&e.call(R,this),this}function T(e){function t(e){var o=e[n]||[],r=e[n+1]||[];i=D?o.join("")+"translateZ(0)":o.join(""),i=M.join("")+i.replace(/\(.*?\)/g,"(0)"),N.css({"-webkit-transform":"",transform:""}),n++;try{N.one("webkitTransitionEnd",function(){if(!r||!r.length)return n=0,void(historyCache=[]);t(a)})}catch(e){}}var i,n=0,a=H.reverse();return t(a),this}function C(e,t){return N.css({"-webkit-transform":e,transform:e}),t&&"none"!=w&&N.one("webkitTransitionEnd",function(){t.call(R,this)}),this}function I(e){return e=parseFloat(e)||100,D=!0,N.parent().css({perspective:e+"px"}),this}function S(e,i){var n={};return"object"===(void 0===e?"undefined":t(e))?(n=e,i=""):"string"==typeof e&&(n[e]=i||""),N.css(n),this}function O(t){var i={};return e.widget.call(i,t)}function E(t,i){return e.option.call(R,t,i)}var L={id:"",zoom:!0,open3D:!1,animates:[]};if("object"===(void 0===n?"undefined":t(n))&&n.id)n=n||{};else{var j=n||"";n={},n.id=j}var N,D,P,F,R={origin:b,transition:w,property:S,open3D:I,transform:C,start:k,stop:x,clear:y,left:o,right:r,up:l,down:s,scale:c,scaleX:u,scaleY:d,rotate:f,rotateX:h,rotateY:p,skew:g,skewX:v,skewY:m,reverse:T,widget:O,option:E,config:z,init:a},z=R.config=i.extend(!0,{},L,n),M=[],H=[],A="all 300ms ease-out";a(z);var V=0,q=!1;return R}}(window.bui||{},window.libs),function(e,t){e.toggle=function(i){function n(t){if(t=t||b,w=!1,!t.id)return void e.showLog("toggle id不能为空","bui.toggle");h=e.objId(t.id),b=m.config=t,v=h.attr("class")||"";var i=t.effect,n=t.inOrder?e.array.index(i,y.hideInOrder):e.array.index(i,y.hide),a=i&&(e.array.index(i,y.show)>-1?e.array.index(i,y.show):n);return T=!(h[0]&&"none"==h[0].style.display||"none"==h.css("display")),a<0?(g=y.show[0],p=t.inOrder?y.hideInOrder[0]:y.hide[0],this):(g=y.show[a],void(p=t.inOrder?y.hideInOrder[a]:y.hide[a]))}function a(){return T}function o(t,i){if(!w)return!(!x&&!k)&&(x=!1,"function"==typeof t?(i=t,t=g||""):t=t||g||"",g=t,h[0]&&"none"==h[0].style.display&&h.css("display","block"),h.addClass("animated "+t),"showIn"==t||"showOut"==t?(b.revert&&h.removeClass("animated "+t),i&&i.call(m,this),T=!0,x=!0):h.one("webkitAnimationEnd",function(){try{!T&&h.css("display","block"),b.revert&&h.removeClass("animated "+t),i&&i.call(m,this),T=!0,x=!0}catch(t){e.showLog(t,"toggle show method")}}),this)}function r(t,i){if(!w&&(x||k))return k=!1,"function"==typeof t?(i=t,t=p||""):t=t||p||"",h.css("display","block").addClass("animated "+t),p=t,"showIn"==t||"showOut"==t?(h.css("display","none"),b.revert&&h.removeClass("animated "+t),i&&i.call(m,this),T=!1,k=!0):h.one("webkitAnimationEnd",function(){try{h.css("display","none"),b.revert&&h.removeClass("animated "+t),i&&i.call(m,this),T=!1,k=!0}catch(t){e.showLog(t,"toggle hide method")}}),this}function l(){return h.remove(),this}function s(e){var e=1==e;h&&(h.off(),e&&h.remove()),w=!0}function c(t){var i={};return e.widget.call(i,t)}function u(t,i){return e.option.call(m,t,i)}var d={id:"",effect:"fadeIn",revert:!0,inOrder:!1};if("string"==typeof i){var f=i||"";i={},i.id=f}var h,p,g,v,m={show:o,hide:r,remove:l,isShow:a,destroy:s,widget:c,option:u,config:b,init:n},b=m.config=t.extend(!0,{},d,i),w=!1,y={show:["fadeIn","fadeInLeft","fadeInRight","fadeInDown","fadeInUp","fadeInLeftBig","fadeInRightBig","fadeInUpBig","fadeInDownBig","zoomIn","bounceIn","rotateIn","rollIn","flipInX","flipInY","lightSpeedIn","showIn","slideInRight","slideInLeft","coverInLeft","coverInRight","zoomSlideInLeft","zoomSlideInRight","pushInLeft","pushInRight"],hide:["fadeOut","fadeOutLeft","fadeOutRight","fadeOutUp","fadeOutDown","fadeOutLeftBig","fadeOutRightBig","fadeOutDownBig","fadeOutUpBig","zoomOut","bounceOut","rotateOut","rollOut","flipOutX","flipOutY","lightSpeedOut","showOut","slideOutRight","slideOutLeft","coverOutLeft","coverOutRight","zoomSlideOutLeft","zoomSlideOutRight","pushOutLeft","pushOutRight"],hideInOrder:["fadeOut","fadeOutRight","fadeOutLeft","fadeOutDown","fadeOutUp","fadeOutRightBig","fadeOutLeftBig","fadeOutUpBig","fadeOutDownBig","zoomOut","bounceOut","rotateOut","rollOut","flipOutX","flipOutY","lightSpeedOut","showOut","slideOutLeft","slideOutRight","coverOutRight","coverOutLeft","zoomSlideOutRight","zoomSlideOutLeft","pushOutRight","pushOutLeft"]},x=!0,k=!0,T=!1;return n(b),b.id&&n(b),m}}(window.bui||{},window.libs),function(e,t){e.mask=function(i){var n=[];return function(i){function a(e){j=!1;var i=t.extend(!0,C,e);return i.appendTo=i.appendTo||"body",I=t(i.appendTo),O=I.children(".bui-mask"),E=i.onlyOne||I.is("body"),C=T.config=i,y=I.css("position"),i.autoTrigger&&l(i),this}function o(e){var i=t.extend(!0,C,e),a=function(e){var t=this;if(E){var a=n[n.length-1];a&&a.callback&&a.callback.call(this,e)}else i.callback&&i.callback.call(t,e);i.autoClose&&f(),e.stopPropagation()};O.on("click.bui",a),L=!0}function r(t){var i=t,n=i.background?i.background:"rgba(0,0,0,"+i.opacity+")",a="";return a+='<div class="'+e.prefix("mask")+'" style="background:'+n+";z-index:"+i.zIndex+'"></div>'}function l(e){if(!j){var i=t.extend(!0,C,e),n=r(i);return O=I.children(".bui-mask"),E&&c(i),O.length<1?(I.append(n).css("position","relative"),O=I.children(".bui-mask")):O.css("display","block"),x=!0,S=!0,w.call(this,"show"),L||o(i),this}}function s(){if(!j)return O=I.children(".bui-mask"),E?(u(),n.length<1&&O&&O.length&&(O&&O.remove(),O=null,S=!1)):(O&&O.remove(),O=null,I.css("position",y||"static"),x=!1),L=!1,w.call(this,"hide"),this}function c(t){e.array.compare(N,n,"id")||n.push({id:N,opacity:t.opacity,callback:t.callback})}function u(e){n.pop()}function d(e){if(!j){var i=t.extend(!0,C,e);return O=I.children(".bui-mask"),O&&O.length?(O.css("display","block"),I.css("position","relative"),x=!0,S=!0,E&&c(i)):l(i),w.call(this,"show"),this}}function f(){if(!j)return O=I.children(".bui-mask"),E?(u(),n.length<1&&O&&O.length&&(O.css("display","none"),S=!1)):(O.css("display","none"),I.css("position","relative"),x=!1),w.call(this,"hide"),this}function h(){return E?S:x}function p(e){s(),I&&n.length<1&&I.off("click.bui"),b("show"),b("hide"),j=!0}function g(t){var i={};return e.widget.call(i,t)}function v(t,i){return e.option.call(T,t,i)}function m(t,i){return e.on.apply(T,arguments),this}function b(t,i){return e.off.apply(T,arguments),this}function w(t){T.self=this==window||this==T?null:this,e.trigger.apply(T,arguments)}var y,x,k={appendTo:"",opacity:.3,background:"",zIndex:100,autoTrigger:!1,onlyOne:!1,autoClose:!1,callback:null},T={handle:{},on:m,off:b,add:l,hide:f,show:d,isShow:h,remove:s,destroy:p,widget:g,option:v,config:C,init:a},C=T.config=t.extend(!0,{},k,e.config.mask,i),I=(t("body"),null),S=!1,O=null,E=!1,L=!1,j=!1,N=e.guid();return a(C),T}}()}(window.bui||{},window.libs),function(e,t){e.loading=function(){var i=[];return function(n){function a(i){P=!1;var n=t.extend(!0,E,i);n.appendTo=n.appendTo||"body",L=t(n.appendTo),j=e.guid(),N=L.children(".bui-loading"),E=O.config=n,n.autoTrigger&&l(n);var a=n.callback;return n.callback=function(){n.autoClose&&d(),a&&a.call(this)},E.callback=n.callback,I=n.mask&&e.mask(n),this}function o(e){N=L.children(".bui-loading");var t=function(t){if(e.appendTo)e.callback&&e.callback.call(this,t);else{var n=i[i.length-1];n&&n.callback&&n.callback.call(this,t)}t.stopPropagation()};return L.on("click.bui",".bui-loading",t),D=!0,this}function r(t){t=t||{};var i=t.text,n=L.width(),a=i&&"block"==t.display?parseInt(t.height)+30:parseInt(t.height),o=-n/2,r=-a/2,l="block"==t.display?e.prefix("loading-block"):e.prefix("loading-inline"),s="";return s+='<div id="'+j+'" class="'+e.prefix("loading")+" "+l+'" style="width:'+n+"px;height:"+a+"px;line-height:"+a+"px;margin-left:"+o+"px;margin-top:"+r+"px;"+(t.zIndex?"z-index:"+t.zIndex:"")+'" >',t.onlyText||(s+='<div class="'+e.prefix("loading-cell")+'" style="width:'+parseFloat(t.width)+"px;height:"+parseFloat(t.height)+'px;"></div>'),s+='<div class="'+e.prefix("loading-text")+'">'+t.text+"</div>",s+="</div>",t&&t.template?t.template.call(this,t):s}function l(e){if(!P){var i=t.extend(!0,E,e);if(N=L.children(".bui-loading"),C=N.children(".bui-loading-cell"),N&&N.hasClass("bui-loading-pause"))N&&N.removeClass("bui-loading-pause"),k.call(this,"start");else{""==i.appendTo&&g(i),N.length&&N.remove();var n=r(i);L.append(n),I&&I.add(i),k.call(this,"show")}return i.timeout&&(F&&clearTimeout(F),F=setTimeout(function(){d()},i.timeout)),D||o(i),this}}function s(e){if(!P){T=N&&N.children(".bui-loading-text");return void 0===e?T&&T.text():(T&&T.text(e),this)}}function c(){P||(C=N&&N.children(".bui-loading-cell"),C&&C.css("display","inline-block"),N&&N.removeClass("bui-loading-pause"))}function u(){P||(C=N&&N.children(".bui-loading-cell"),C&&C.css("display","none"),N&&N.addClass("bui-loading-pause"))}function d(){if(!P)return N=L.children(".bui-loading"),E.appendTo?(N&&N.remove(),N=null,I&&I.remove()):(v(),I&&I.remove(),i.length<1&&N&&N.length&&(N&&N.remove(),N=null)),D=!1,k.call(this,"remove"),k.call(this,"hide"),this}function f(){if(!P)return N=L.children(".bui-loading"),N&&N.length&&(N.addClass("bui-loading-pause"),k.call(this,"pause")),this}function h(e){if(!P){var i=t.extend(!0,E,e);return N=L.children(".bui-loading"),N&&N.length?(s(i.text),N.css("display","block"),I&&I.show(),""==i.appendTo&&g(E),k.call(this,"show")):l(i),E.timeout&&(F&&clearTimeout(F),F=setTimeout(function(e){p()},E.timeout)),this}}function p(){if(!P)return N=L.children(".bui-loading"),E.appendTo?(N.css("display","none"),I&&I.hide()):(v(),i.length<1&&N&&N.length&&(N.css("display","none"),I&&I.hide())),k.call(this,"hide"),this}function g(t){!e.array.compare(j,i,"id")&&t.callback&&i.push({id:j,callback:t.callback})}function v(){i.pop()}function m(e){var e=1==e;d(),L&&i.length<1&&L.off("click.bui"),x("show"),x("hide"),x("start"),x("stop"),x("pause"),x("remove"),I&&I.destroy(e),P=!0}function b(t){var i={mask:I||{}};return e.widget.call(i,t)}function w(t,i){return e.option.call(O,t,i)}function y(t,i){return e.on.apply(O,arguments),this}function x(t,i){return e.off.apply(O,arguments),this}function k(t){O.self=this==window||this==O?null:this,e.trigger.apply(O,arguments)}var T,C,I,S={appendTo:"",width:30,height:30,text:"",onlyText:!1,mask:!0,zIndex:"",autoTrigger:!1,autoClose:!0,timeout:0,opacity:0,display:"block",template:null,callback:null},O={handle:{},on:y,off:x,start:l,stop:d,pause:f,text:s,showRing:c,hideRing:u,show:h,hide:p,destroy:m,widget:b,option:w,config:E,init:a},E=O.config=t.extend(!0,{},S,e.config.loading,n),L=(t("body"),null),j="",N=null,D=!1,P=!1,F=null;return a(E),O}}()}(window.bui||{},window.libs),function(e,t){e.slide=function(i){function n(i){var n=t.extend(!0,ce,i);return n.id?(R=e.obj(n.id),ce=se.config=n,X=n.direction,n.height=parseFloat(n.height),n.width=parseFloat(n.width),te=window.viewport.width()||document.documentElement.clientWidth,ie=window.viewport.height()||document.documentElement.clientHeight,z=0==n.menu.indexOf("#")?e.obj(n.menu):R.find(n.menu).eq(0),M=z.children(),H=R.find(n.children).eq(0),A=H.parent(),V=H.children(),a(n),r(),ae=n.autoplay,ae&&g(),fe||(o(),ve=!0),de=H.children(".active").length?H.children(".active").index():de||n.index,parseInt(n.index)>0?p(n.index,"none"):p(de,"none"),this):void e.showLog("slide id不能为空","bui.slide.init")}function a(e){var t=R.parents(".bui-page"),i=(R.parents("main"),R[0]&&R[0].offsetTop||0),n=t.children(e.header),a=n[0]&&n[0].offsetHeight||0,o=t.children(e.footer),r=o[0]&&o[0].offsetHeight||0;Z=ie-(a||0)-(r||0)-i,G=0==e.height?Z:e.height;var l="static"==z.parent().css("position")?z.css("position"):z.parent().css("position");ee=R.find(e.menu).length?"absolute"==l||"fixed"==l?G:G-(z[0]&&z[0].offsetHeight||0):G,J=e.fullscreen?ie:0==e.height?ee:e.height,B=e.fullscreen?te:e.width||te,q=V.length,_="x"==X?B/ce.visibleNum:B,Q="y"==X?J/ce.visibleNum:J,ne="y"==ce.direction?Q*ce.scrollNum:_*ce.scrollNum,W=B*q/ce.visibleNum,Y=J*q/ce.visibleNum}function o(){var e=function(e){var i=t(this).hasClass("active"),n=t(this).index(),a=t(this).attr("disabled"),o=t(this).hasClass("disabled")||""==a||"true"==a||"disabled"==a;i||o||(ce.animate?p(n):p(n,"none"),x(n),ae&&g()),e.stopPropagation()};0==ce.menu.indexOf("#")?z.on("click.bui","li",e):R.on("click.bui",ce.menu+" li",e),R.on("click.bui",ce.prev,w),R.on("click.bui",ce.next,y);var i=ce.children+" "+ce.item;R.on("click.bui",i,function(e){F.call(this,"click",e),ce.callback&&ce.callback.call(this,e,se)}),T(),ce.swipe||k(),fe=!0}function r(){me={x:{swipeDir:"swipeleft",swipeDir2:"swiperight",width:ne},y:{swipeDir:"swipeup",swipeDir2:"swipedown",width:ne}},oe={x:{parentInitKey:"width",parentInitValue:W,boxCss:"display:-webkit-box;display:box;-webkit-box-align: start;-webkit-box-pack: center;width:100%;",boxItemCSS:"-webkit-box-flex:1;box-flex:1;width:"+_+"px;height:"+Q+"px;"},y:{parentInitKey:"height",parentInitValue:Y,box:"display:-webkit-box;display:box;-webkit-box-align: start;-webkit-box-pack: center;width:100%;-webkit-box-orient: vertical;box-orient: vertical;",boxItemCSS:"-webkit-box-flex:1;box-flex:1;width:"+_+"px;height:"+Q+"px;"}},A[oe[X].parentInitKey](oe[X].parentInitValue);var e,i=V.length;for(e=0;e<i;e++)re=Boolean(V.eq(e).attr("data-scroll"))||ce.scroll,oe[X].boxItemCSS=oe[X].boxItemCSS+(re?"overflow:auto;":"overflow:hidden;"),V[e].style.cssText=oe[X].boxItemCSS;try{H[0].style.cssText=oe[X].boxCss}catch(e){console.log("请检查下children参数是否正确.","bui.slide id:"+ce.id)}var n="y"==X&&ce.visibleNum>1?ee/ce.visibleNum:ee,a=ce.zoom?G/100+"rem":G+"px",o=ce.zoom?n/100+"rem":n+"px";ce.zoom;if(ce.fullscreen?(t("main").css({position:"static"}),R.addClass("bui-slide-fullscreen").css({position:"absolute",top:0,left:0,right:0,bottom:0,"z-index":10,overflow:"hidden",width:B,height:ie}),V.addClass(ce.alignClassName||"bui-box-center").css("height",ie)):(R.css({position:"relative",overflow:"hidden",width:B,height:a}),V.addClass(ce.alignClassName).height(o)),ce.autoheight&&R.addClass("bui-slide-autoheight"),ce.autopage){var r=l(),s=H.find(".active").index()+1,c=C(r,s);R.children(".bui-slide-head").remove(),R.append(c),M=R.find(ce.menu).eq(0).children()}}function l(){var e=V.length,t=e-ce.visibleNum;return e%ce.scrollNum!=0?t+1:t/ce.scrollNum+1}function s(t){var i=t.originalEvent&&t.originalEvent.targetTouches||t.targetTouches,n=we?i[0]:t;return ue.x1=n.pageX,ue.y1=n.pageY,ue.direction="",ce.stopHandle&&e.checkTargetInclude(t.target,ce.stopHandle)?void(ke=!1):(Ce=-de*ne,Ie=-de*ne,i.length>1||t.scale&&1!==t.scale?void f("x"==X?Ce:Ie):(ae&&(v(),ae=!0),F.call(this,"touchstart",t,ue),ce.onStart&&ce.onStart.call(this,t,ue,se),void(ke=!0)))}function c(i){var n=i.originalEvent&&i.originalEvent.targetTouches||i.targetTouches;if(n.length>1||i.scale&&1!==i.scale)return void f("x"==X?Ce:Ie);if(ke){var a=we?n[0]:i;ue.x2=a.pageX,ue.y2=a.pageY,ue.direction||(ue.direction=e.swipeDirection(ue.x1,ue.x2,ue.y1,ue.y2)),"swipeleft"!==ue.direction&&"swiperight"!==ue.direction||(i.preventDefault(),i.stopPropagation()),F.call(this,"touchmove",i,ue);try{if("y"==X&&ce.scroll){var o=t(i.target).closest(".active"),r=o[0].scrollTop||0,s=o[0].scrollHeight||0,c=o[0].offsetHeight||0;if("swipedown"===ue.direction&&r>1)return void(Te=!1);if("swipeup"===ue.direction&&s-r-c>=2)return void(Te=!1)}}catch(i){}$=ue.x2-ue.x1,K=ue.y2-ue.y1,me.x.move=Ce+$,me.x.absDelta=Math.abs($),me.y.move=Ie+K,me.y.absDelta=Math.abs(K);var u=l();ue.direction!==me[X].swipeDir&&ue.direction!==me[X].swipeDir2||(ce.delay&&me[X].absDelta>ce.distance&&f(me[X].move,"none"),ce.delay||(ce.bufferEffect?f(me[X].move,"none"):0==de&&u>1&&("swipeleft"==ue.direction||"swipeup"==ue.direction)?f(me[X].move,"none"):de==u-1&&u>1&&("swiperight"==ue.direction||"swipedown"==ue.direction)?f(me[X].move,"none"):de>0&&de<u-1&&u>1&&f(me[X].move,"none"),i.preventDefault()),ce.onMove&&ce.onMove.call(this,i,ue,se)),Te=!0}}function u(e){F.call(this,"touchend",e,ue),Te&&($=ue.x2-ue.x1,K=ue.y2-ue.y1,me.x.delta=Ce,me.x.absDelta=Math.abs($),me.y.delta=Ie,me.y.absDelta=Math.abs(K),me[X].absDelta>ce.distance?(d.call(this,ue,me),ce.onEnd&&ce.onEnd.call(this,e,ue,se)):me[X].absDelta<ce.distance&&f(me[X].delta),ae&&g(),"swipeleft"!=ue.direction&&"swiperight"!=ue.direction||e.stopPropagation(),ye+=ue.y2-ue.y1,xe+=ue.x2-ue.x1,ue.lastX=xe,ue.lastY=ye,ue={x1:0,x2:0,y1:0,y2:0,direction:""},ke=!1,Te=!1)}function d(e,t){de=H.children(".active").index();var n;if(e.direction==t[X].swipeDir){var a=V.length,o=a-ce.visibleNum,r=a%ce.scrollNum!=0?o+1:o/ce.scrollNum+1;if(de>=r-1)n=de,t[X].delta=-n*t[X].width,f(t[X].delta),de=n,x(n),F.call(this,"last",n);else if(n=de+1,t[X].delta=-n*t[X].width,f(t[X].delta),de=n,x(n),F.call(this,"next",n),i.autoload)I(de);else{var l=V.eq(de);F.call(l,"to",n)}}else if(e.direction==t[X].swipeDir2)if(de>0)if(n=de-1,t[X].delta=-n*t[X].width,f(t[X].delta),de=n,x(n),F.call(this,"prev",n),i.autoload)I(de);else{var l=V.eq(de);F.call(l,"to",n)}else n=de,t[X].delta=-n*t[X].width,f(t[X].delta),de=n,x(n),F.call(this,"first",n)}function f(e,t){var i=ce.transition,t=t||"all "+i+"ms",e=e||0;switch(X){case"x":h(e+"px",0,t,A);break;case"y":h(0,e+"px",t,A)}return this}function h(e,t,i,n){var a=t||0;"y"==X&&ce.zoom&&String(t).indexOf("%")<=-1&&(a=parseInt(t)/100+"rem");var i,n=n||R,e=e||0,o=e,r=String(e).indexOf("%")>-1?String(e):o,l=String(t).indexOf("%")>-1?String(t):a;i="number"==typeof i?"all "+i+"ms":i||"all 300ms";try{n.css({"-webkit-transition":i,transition:i,"-webkit-transform":"translate("+r+","+l+")",transform:"translate("+r+","+l+")"}),n.one("webkitTransitionEnd",function(){n.css({"-webkit-transition":"none",transition:"none"})})}catch(e){console.log(e.message)}}function p(e,n){var a=0;if("string"==typeof e&&e.indexOf(".html")>-1){var o=[];M.each(function(i,n){var r=t(n).attr("href")||void 0;o[i]=r,r==e&&(a=i)})}else a=parseInt(e);var r={x:{transform:-a*parseFloat(ne)},y:{transform:-a*parseFloat(ne)}},s=l();if(a>=s||a<0)return!1;if(f(r[X].transform,n),de=a,x(a),ae&&g(),i.autoload)I(de);else{var c=V.eq(de);F.call(c,"to",a)}return this}function g(e){var e=e||ce.interval;v(),ae=!0;var t=de;U=setInterval(function(e){var i=l();t>=0&&t<i-1?t+=1:t=0,p(t)},e),F.call(this,"play")}function v(e){if(U)try{window.clearInterval(U),ae=!1,F.call(this,"stop")}catch(e){}return this}function m(e){g(e)}function b(){return de}function w(){var e=de-1;return F.call(this,"prev",e),p(e),this}function y(){var e=de+1;return F.call(this,"next",e),p(e),this}function x(e){e=e||0,V.removeClass("active"),V.eq(e).addClass("active"),M.removeClass("active"),M.eq(e).addClass("active")}function k(){return R.off("touchstart",s).off("touchmove",c).off("touchend",u).off("touchcancel"),F.call(this,"lock"),this}function T(e){return R.on("touchstart",s).on("touchmove",c).on("touchend",u).on("touchcancel",function(){f("x"==X?Ce:Ie)}),F.call(this,"unlock"),this}function C(e,t){var i,n="",t=t||1;for(n+='<div class="bui-slide-head">',n+="<ul >",i=1;i<Number(e)+1;i++)n+="<li "+(i==t?'class="active"':"")+">"+i+"</li>";return n+="</ul >",n+="</div >"}function I(i){var n=V.eq(i),a=M.eq(i),o=a.attr("href")||"";if(e.array.compare(i,pe))return F.call(n,"to",i,"200"),!1;ce.autoload&&(o?t.ajax({url:o,dataType:"html",async:ce.async,success:function(e,t){n.html(e),pe.push(i),F.call(n,"load",i,t),!ve&&F.call(n,"to",i,t),ve=!1},error:function(e,t){F.call(n,"loadfail",i,t)}}):(!ve&&F.call(n,"to",i),ve=!1))}function S(t){var i,n=e.guid(),t=t||1,a="";for(i=0;i<t;i++)a+='<li id="'+n+'" style="-webkit-box-flex:1;box-flex:1;width:'+_+"px;height:"+Q+'px;"></li>';H.append(a),V=H.children();var o=_*V.length;q=V.length,A.width(o)}function O(i){var n={id:null,url:"",preload:!1,param:{},success:null,fail:null},a=t.extend(!0,{},n,i),o=a.url||"",r=null,l=V.length?de+1:0;if(a.id)r=e.obj(a.id);else{var s=V.eq(l);s.length?r=s:(S(),V=H.children(),r=V.eq(l))}if(o)if(de=l,ge[l]=a.param,o in he){e.array.compare(l,pe)||(pe.push(l),r.html(he[o]),a.success&&a.success.call(r,he[o],"cache"),F.call(r,"load",he[o],"cache")),a.preload||p(l)}else t.ajax({url:o,success:function(t,i){t?(he[o]=t,e.array.compare(l,pe)||(pe.push(l),r.html(he[o]),a.success&&a.success.call(r,he[o],i),F.call(r,"load",t,i)),a.preload||p(l)):(a.fail&&a.fail.call(r,t,i),F.call(r,"loadfail",t,i))},error:function(e,t){a.fail&&a.fail.call(r,e,t),F.call(r,"loadfail",e,t)}});return this}function E(e){var e="number"==typeof e?e:de;return ge[e]||{}}function L(e){var e=1==e;v(),z&&(z.off("click.bui"),e&&z.remove()),R&&(R.off(),e&&R.remove()),P("stop"),P("play"),P("first"),P("last"),P("to")}function j(t){var i={};return e.widget.call(i,t)}function N(t,i){return e.option.call(se,t,i)}function D(t,i){return e.on.apply(se,arguments),this}function P(t,i){return e.off.apply(se,arguments),this}function F(t){se.self=this==window||this==se?null:this,e.trigger.apply(se,arguments)}var R,z,M,H,A,V,q,U,W,Y,B,J,X,_,$,K,Q,Z,G,ee,te,ie,ne,ae,oe,re,le={id:"",menu:".bui-slide-head > ul",children:".bui-slide-main > ul",header:"header",footer:"footer",item:"li",prev:".bui-slide-prev",next:".bui-slide-next",alignClassName:"",stopHandle:"",width:0,height:0,zoom:!0,transition:200,interval:5e3,swipe:!0,animate:!0,delay:!1,bufferEffect:!0,visibleNum:1,scrollNum:1,distance:80,direction:"x",autoplay:!1,autoheight:!1,scroll:!1,index:0,fullscreen:!1,autopage:!1,autoload:!1,async:!0,callback:null,onStart:null,onMove:null,onEnd:null},se={handle:{},on:D,off:P,to:p,load:O,getPageParams:E,getPages:l,prev:w,next:y,stop:v,start:m,lock:k,index:b,unlock:T,destroy:L,widget:j,option:N,config:ce,init:n},ce=se.config=t.extend(!0,{},le,e.config.slide,i),ue={},de=0,fe=!1,he={},pe=[],ge=[],ve=!1,me={x:{},y:{}},be=/hp-tablet/gi.test(navigator.appVersion),we="ontouchstart"in window&&!be,X="",ye=0,xe=0,ke=!1,Te=!1,ue={x1:0,x2:0,y1:0,y2:0,direction:""};try{n(ce)}catch(t){e.showLog(t)}var Ce,Ie;return se}}(window.bui||{},window.libs),function(e,t){e.swipe=function(){var i=null,n=null;return function(a){function o(n){var a=t.extend(!0,K,n);return pe=!1,a.id?(z=e.obj(a.id),V=a.width>0?a.width:ke.clientWidth,q=a.height>0?a.height:ke.clientHeight,M=z.children(a.handle),H=G?z.children():z,W=H.children(a.swipeleft),Y=H.children(a.swiperight),B=H.children(a.swipeup),J=H.children(a.swipedown),X=parseFloat(a.movingDistance),A=X,s(),ee||(r(a),ee=!0),i&&i.close(),de||E(),this):void e.showLog("swipe id不能为空","bui.swipe.init")}function r(e){H.css({width:V,position:"relative",overflow:"hidden"}),!G&&H.css({height:q}),M.css({position:"relative","z-index":10});try{var t=W.attr("data-moving")||X,i=Y.attr("data-moving")||X,n=B.attr("data-moving")||X,a=J.attr("data-moving")||X,o=l(t),r=l(i),s=l(n),c=l(a);ie&&W.css({width:o}),te&&Y.css({width:r}),ae&&J.css({height:c}),ne&&B.css({height:s})}catch(e){}}function l(e){return K.zoom?e/100+"rem":e+"px"}function s(){"x"==Z?(te=!!Y.length,ie=!!W.length):"y"==Z?(ae=!!J.length,ne=!!B.length):"xy"==Z&&(ae=!!J.length,ne=!!B.length,ie=!!W.length,te=!!Y.length)}function c(i){var n=i.originalEvent&&i.originalEvent.targetTouches||i.targetTouches;if(n.length>1||i.scale&&1!==i.scale)return void(be=!1);if(K.stopHandle&&e.checkTargetInclude(i.target,K.stopHandle))return void(be=!1);var a=me?n[0]:i;if(Q.id=K.id,Q.x1=a.pageX,Q.y1=a.pageY,Q.direction="",U=t(i.target).closest(K.handle),R.call(this,"touchstart",i,Q),G&&!ge){M=U,H=M.parent(),W=H.children(K.swipeleft),Y=H.children(K.swiperight),B=H.children(K.swipeup),J=H.children(K.swipedown),s();H.index();r(K),(0==K.height||""==H[0].style.height)&&H.height(U[0].offsetHeight)}if(Q.movingleft=parseInt(W.attr("data-moving")||X),Q.movingright=parseInt(Y.attr("data-moving")||X),Q.movingup=parseInt(B.attr("data-moving")||X),Q.movingdown=parseInt(J.attr("data-moving")||X),U.length){var o=!1;switch(Z){case"x":o=!(!ie&&!te);break;case"y":o=!(!ne&&!ae);break;case"xy":o=!!(ie||te||ne||ae)}}be=void 0==o||1==o}function u(a){var o=a.originalEvent&&a.originalEvent.targetTouches||a.targetTouches;if(o.length>1||a.scale&&1!==a.scale)return void k();var r=me?o[0]:a;if(Q.x2=r.pageX,Q.y2=r.pageY,R.call(this,"touchmove",a,Q),i&&a.stopPropagation(),be){Q.direction||(Q.direction=e.swipeDirection(Q.x1,Q.x2,Q.y1,Q.y2)),"swipeleft"!==Q.direction&&"swiperight"!==Q.direction||a.preventDefault();try{if("swipeup"===Q.direction||"swipedown"===Q.direction){var l=z[0].scrollTop||0,s=(z[0].scrollHeight,U[0].scrollTop||0),c=(U[0].scrollHeight,t(a.target)[0].scrollTop||0),u=a.target.offsetHeight||0,d=a.target.scrollHeight||0,p=!1,g=!1;0==l&&0==s&&0==c&&(p=!0),d-c-u<=2&&(g=!0)}}catch(a){}var v="swiperight"==Q.direction||"swipeleft"==Q.direction?Q.x2-Q.x1:Q.y2-Q.y1,m=0;Q.deltax=ge?Math.abs(v):Math.abs(v)+ye,!te||"swiperight"!=Q.direction||re||ge||n?!p||!ae||"swipedown"!=Q.direction||le||ge||n?!ie||"swipeleft"!=Q.direction||oe||ge||n?!g||!ne||"swipeup"!=Q.direction||se||ge||n?"swipeleft"==Q.direction&&re?(A=Q.movingright,m=f(Q,Q.movingright),ue&&L(-Q.deltax,0,"none",n||Y),ce&&L(-m,0,"none",M),R.call(this,"movingleft",a,Q),we=!0,a.stopPropagation()):"swipeup"==Q.direction&&le?(A=Q.movingdown,m=f(Q,Q.movingdown),ue&&L(0,-Q.deltax,"none",n||J),ce&&L(0,-m,"none",M),R.call(this,"movingup",a,Q),we=!0,a.preventDefault(),a.stopPropagation()):"swiperight"==Q.direction&&oe?(A=Q.movingleft,m=f(Q,Q.movingleft),ue&&L(Q.deltax,0,"none",n||W),ce&&L(m,0,"none",M),R.call(this,"movingright",a,Q),we=!0,a.stopPropagation()):"swipedown"==Q.direction&&se&&(A=Q.movingup,m=f(Q,Q.movingup),ue&&L(0,Q.deltax,"none",n||B),ce&&L(0,m,"none",M),R.call(this,"movingdown",a,Q),
we=!0,a.preventDefault(),a.stopPropagation()):(A=Q.movingup,m=h(Q,Q.movingup),ue&&L(0,m,"none",B),ce&&L(0,-Q.deltax,"none",M),R.call(this,"movingup",a,Q),we=!0,a.preventDefault(),a.stopPropagation()):(A=Q.movingleft,m=h(Q,Q.movingleft),ue&&L(m,0,"none",W),ce&&L(-Q.deltax,0,"none",M),R.call(this,"movingleft",a,Q),we=!0,a.stopPropagation()):(A=Q.movingdown,m=f(Q,Q.movingdown),ue&&L(0,m,"none",J),ce&&L(0,Q.deltax,"none",M),R.call(this,"movingdown",a,Q),we=!0,a.preventDefault(),a.stopPropagation()):(A=Q.movingright,m=f(Q,Q.movingright),ue&&L(m,0,"none",Y),ce&&L(Q.deltax,0,"none",M),R.call(this,"movingright",a,Q),we=!0,a.stopPropagation())}}function d(e){if(R.call(this,"touchend",e,Q),we){var t="swiperight"==Q.direction||"swipeleft"==Q.direction?Math.abs(Q.x2-Q.x1):Math.abs(Q.y2-Q.y1);te&&"swiperight"==Q.direction&&t>K.distance&&!re&&!ge?(g(),R.call(this,Q.direction,e,Q),R.call(this,"open",Q.direction)):ie&&"swipeleft"==Q.direction&&t>K.distance&&!oe&&!ge?(p(),R.call(this,Q.direction,e,Q),R.call(this,"open",Q.direction)):ne&&"swipeup"==Q.direction&&t>K.distance&&!se&&!ge?(v(),R.call(this,Q.direction,e,Q),R.call(this,"open",Q.direction)):ae&&"swipedown"==Q.direction&&t>K.distance&&!le&&!ge?(m(),R.call(this,Q.direction,e,Q),R.call(this,"open",Q.direction)):ge&&t<K.distance?(ie&&oe&&p(),te&&re&&g(),ne&&se&&v(),ae&&le&&m(),R.call(this,Q.direction,e,Q),K.alwaysTrigger&&R.call(this,"open",Q.direction)):ge&&t>K.distance?(ie&&oe&&w(),te&&re&&b(),ne&&se&&y(),ae&&le&&x(),R.call(this,Q.direction,e,Q),R.call(this,"close",Q.direction)):!ge&&t<K.distance&&("swipeleft"===Q.direction&&ie&&!oe&&w(),"swiperight"===Q.direction&&te&&!re&&b(),"swipeup"===Q.direction&&ne&&!se&&y(),"swipedown"===Q.direction&&ae&&!le&&x(),K.alwaysTrigger&&R.call(this,"close",Q.direction),R.call(this,Q.direction,e,Q)),be=!1,we=!1,e.stopPropagation()}}function f(e,t){var i=-t+e.deltax;return i=i>0?0:i}function h(e,t){var i=t-e.deltax;return i=i>t?t:i}function p(e){e=e||{},e.transition=e.transition||K.transition,e.target=e.target||W,e.handle=e.handle||M,i&&i.close(),ge=!0,oe=!0,G&&(i=$,n=W,ke.addEventListener("click",O,!0)),ue&&L(0,0,e.transition,e.target),ce&&L(-A,0,e.transition,e.handle)}function g(e){e=e||{},e.transition=e.transition||K.transition,e.target=e.target||Y,e.handle=e.handle||M,i&&i.close(),ge=!0,re=!0,G&&(i=$,n=Y,ke.addEventListener("click",O,!0)),ue&&L(0,0,e.transition,e.target),ce&&L(A,0,e.transition,e.handle)}function v(e){e=e||{},e.transition=e.transition||K.transition,e.target=e.target||B,e.handle=e.handle||M,i&&i.close(),ge=!0,se=!0,G&&(i=$,n=B,ke.addEventListener("click",O,!0)),ue&&L(0,0,e.transition,e.target),ce&&L(0,-A,e.transition,e.handle)}function m(e){e=e||{},e.transition=e.transition||K.transition,e.target=e.target||J,e.handle=e.handle||M,i&&i.close(),ge=!0,le=!0,G&&(i=$,n=J,ke.addEventListener("click",O,!0)),ue&&L(0,0,e.transition,e.target),ce&&L(0,A,e.transition,e.handle)}function b(e){e=e||{},e.transition=e.transition||K.transition,e.target=Y,e.handle=he||M,ge=!1,re=!1,G&&(i=null,n=null,fe=null,he=null,ke.removeEventListener("click",O,!0)),ue&&L(-(A+1),0,e.transition,e.target),ce&&L(ye,0,e.transition,e.handle)}function w(e){e=e||{},e.transition=e.transition||K.transition,e.target=W,e.handle=he||M,ge=!1,oe=!1,G&&(i=null,n=null,fe=null,he=null,ke.removeEventListener("click",O,!0)),ue&&L("101%",0,e.transition,e.target),ce&&L(-ye,0,e.transition,e.handle)}function y(e){e=e||{},e.transition=e.transition||K.transition,e.target=B,e.handle=he||M,ge=!1,se=!1,G&&(i=null,n=null,fe=null,he=null,ke.removeEventListener("click",O,!0)),ue&&L(0,"100%",e.transition,e.target),ce&&L(0,-ye,e.transition,e.handle)}function x(e){e=e||{},e.transition=e.transition||K.transition,e.target=J,e.handle=he||M,ge=!1,le=!1,G&&(i=null,n=null,fe=null,he=null,ke.removeEventListener("click",O,!0)),ue&&L(0,-A,e.transition,e.target),ce&&L(0,ye,e.transition,e.handle)}function k(){re&&b(),oe&&w(),le&&x(),se&&y(),R.call(this,"close")}function T(){if(!pe)return k(),this}function C(e){if(!pe){var t=e||{};t.transition=t.transition||K.transition,t.index=t.index||0;var i,n=t.target;switch(n){case"swiperight":t.target=Y.eq(t.index),i=t.target.parent().index(),t.handle=G?z.children().eq(i).children(K.handle):M,he=t.handle,fe=t.target,te&&g(t);break;case"swipeleft":t.target=W.eq(t.index),i=t.target.parent().index(),t.handle=G?z.children().eq(i).children(K.handle):M,he=t.handle,fe=t.target,ie&&p(t);break;case"swipedown":t.target=J.eq(t.index),i=t.target.parent().index(),t.handle=G?z.children().eq(i).children(K.handle):M,he=t.handle,fe=t.target,ae&&m(t);break;case"swipeup":t.target=B.eq(t.index),i=t.target.parent().index(),t.handle=G?z.children().eq(i).children(K.handle):M,he=t.handle,fe=t.target,ne&&v(t);break;default:t.target=Y.eq(t.index),i=t.target.parent().index(),t.handle=G?z.children().eq(i).children(K.handle):M,he=t.handle,fe=t.target,te&&g(t)}return R.call(this,"open",n),this}}function I(){return i}function S(){return ge}function O(e){var n=t(e.target),a=n.closest(W).length||n.closest(Y).length||n.closest(B).length||n.closest(J).length||e.target.className.indexOf("bui-mask")>-1||e.target.className.indexOf("bui-click")>-1;i&&(a||(i.close(),e.stopPropagation()))}function E(){z.on("touchstart",c).on("touchmove",u).on("touchend",d).on("touchcancel",function(){}),de=!0}function L(e,t,i,n){var i,a=n||z,e=e||0,t=t||0,o=K.zoom?parseFloat(e)/100+"rem":parseFloat(e)+"px",r=K.zoom?parseFloat(t)/100+"rem":parseFloat(t)+"px",l=String(e).indexOf("%")>-1?e:o,s=String(t).indexOf("%")>-1?t:r;return i="number"==typeof i?"all "+i+"ms":i||"all 300ms",a.css({"-webkit-transition":i,transition:i,"-webkit-transform":"translate("+l+","+s+")",transform:"translate("+l+","+s+")"}).one("webkitTransitionEnd",function(){a.css({"-webkit-transition":"none",transition:"none"})}),this}function j(){if(!pe)return z.off("touchmove",u).off("touchend",d).off("touchcancel",function(){}),R.call(this,"lock"),this}function N(){if(!pe)return z.on("touchmove",u).on("touchend",d).on("touchcancel",function(){}),R.call(this,"unlock"),this}function D(e){var e=1==e;z&&(z.off(),e&&z.remove()),F("open"),F("close"),pe=!0}function P(t,i){return e.on.apply($,arguments),this}function F(t,i){return e.off.apply($,arguments),this}function R(t){$.self=this==window||this==$?null:this,e.trigger.apply($,arguments)}var z,M,H,A,V,q,U,W,Y,B,J,X,_={id:"",handle:".handle",swiperight:".swiperight",swipeleft:".swipeleft",swipeup:".swipeup",swipedown:".swipedown",direction:"x",stopHandle:"",hasChild:!1,handleMove:!0,targetMove:!0,alwaysTrigger:!1,width:0,height:0,movingDistance:280,initDistance:0,zoom:!1,distance:80,transition:300},$={handle:{},active:I,isActive:S,on:P,off:F,close:T,open:C,destroy:D,lock:j,unlock:N,init:o},K=$.config=t.extend(!0,{},_,e.config.swipe,a),Q={},Z=K.direction,G=K.hasChild,ee=!1,te=!1,ie=!1,ne=!1,ae=!1,oe=!1,re=!1,le=!1,se=!1,ce=K.handleMove,ue=K.targetMove,de=!1,fe=null,he=null,pe=!1,ge=!1,ve=/hp-tablet/gi.test(navigator.appVersion),me="ontouchstart"in window&&!ve,be=!1,we=!1,Q={x1:0,x2:0,y1:0,y2:0,direction:"",deltax:0,movingleft:0,movingright:0,movingup:0,movingdown:0},ye=K.initDistance,xe=document,ke=xe.documentElement;o(K);return $}}()}(window.bui||{},window.libs),function(e,t){e.sidebar=function(i){function n(i){var n=t.extend(!0,y,i);return y=w.config=n,n.trigger&&(I=e.obj(n.trigger)),k=e.obj(n.handle),m=bui.swipe({id:n.id,handle:n.handle,movingDistance:n.width,swiperight:n.swiperight,swipeleft:n.swipeleft,direction:"x",hasChild:!1,width:0,height:0,handleMove:n.handleMove,zoom:n.zoom,distance:n.distance,transition:300}),y.mask&&(x=bui.mask({appendTo:k,autoTrigger:!1,opacity:n.opacity,callback:function(){m.close()}})),C||(a(),n.height>0&&e.obj(n.id).height(n.height)),this}function a(){var e=this;m.on("open",function(t){I&&I.addClass("active"),x&&x.show(),k.css("overflow-y","hidden"),T=!0,v.call(e,"open",t)}),m.on("close",function(){I&&I.removeClass("active"),x&&x.hide(),k.css("overflow-y","auto"),T=!1,v.call(e,"close")}),I&&I.on("click.bui",function(){if(!t(this).hasClass("disabled")){var e=t(this).attr("data-target")||"swiperight";T?r():o({target:e})}}),C=!0}function o(e){var t=e||{};return t.target=t.target||"swiperight",t.transition=t.transition||300,m.open(t),this}function r(){return m.close(),this}function l(){return m.lock(),v.call(this,"lock"),this}function s(e){return m.unlock(),v.call(this,"unlock"),this}function c(){return T}function u(){return m.active()}function d(e){var e=1==e;I&&I.off("click.bui"),g("open"),g("close"),x&&x.destroy(e),m&&m.destroy(e)}function f(t){var i={swipe:m,mask:x};return e.widget.call(i,t)}function h(t,i){return e.option.call(w,t,i)}function p(t,i){return e.on.apply(w,arguments),this}function g(t,i){return e.off.apply(w,arguments),this}function v(t){w.self=this==window||this==w?null:this,e.trigger.apply(w,arguments)}var m,b={id:"",trigger:"",handle:".bui-page",swiperight:".swiperight",swipeleft:".swipeleft",handleMove:!0,mask:!0,width:280,opacity:.1,height:0,zoom:!0,distance:80},w={handle:{},on:p,off:g,active:u,isActive:c,open:o,close:r,lock:l,unlock:s,destroy:d,widget:f,option:h,config:y,init:n},y=w.config=t.extend(!0,{},b,e.config.sidebar,i),x=null,k=null,T=!1,C=!1,I=null;return n(y),w}}(bui||{},libs),function(e,t){e.listview=function(i){function n(i){var n=t.extend(!0,k,i);return k=x.config=n,b=e.obj(n.id),w=b.children(),w.length&&a(n),T||o(n),this}function a(e){e.height>0&&b.height(e.height),e.data.length?w.each(function(i,n){var a=t(n),o=a.attr("status"),l=e.menuHeight>0?e.menuHeight:n.offsetHeight;if(!o){var s=r(e);a.append(s).attr("status","1")}n.style.height||t(n).height(l)}):w.each(function(i,n){var a=e.menuHeight>0?e.menuHeight:n.offsetHeight;n.style.height||t(n).height(a)})}function o(e){var t=this,i=function(t){e.callback&&e.callback.call(this,t,m)};b.on("click.bui",".bui-listview-menu .bui-btn",i),m=bui.swipe({id:e.id,handle:e.handle,movingDistance:e.menuWidth,swiperight:e.swiperight,swipeleft:e.swipeleft,direction:"x",hasChild:!0,width:e.width,height:0,zoom:k.zoom,distance:e.distance,transition:300}),m.on("open",function(e){C=!0,v.call(t,"open",e)}),m.on("close",function(e){C=!1,v.call(t,"close",e)}),T=!0}function r(e){var i="",n="right"==e.position?e.swipeleft.substr(1):e.swiperight.substr(1);return i+='<div class="bui-listview-menu '+n+'">',t.each(e.data,function(e,t){i+='    <div class="bui-btn '+t.classname+'">'+t.text+"</div>"}),i+="</div>"}function l(){return m.active()}function s(e){var t=e||{};return t.target=t.target||("right"==k.position?k.swipeleft.substr(1):k.swiperight.substr(1)),t.transition=t.transition||300,t.index=t.index||0,m.open(t),this}function c(){return m.close(),this}function u(){return m.lock(),v.call(this,"lock"),this}function d(e){return m.unlock(),v.call(this,"unlock"),this}function f(e){var e=1==e;w&&(w.off("click.bui"),w=null),b&&(b.off("click.bui"),e&&b.remove(),b=null),g("open"),g("close"),m&&m.destroy(e),k=null,x=null}function h(t){var i={swipe:m};return e.widget.call(i,t)}function p(t,i){return e.option.call(x,t,i)}function g(t,i){return e.off.apply(x,arguments),this}function v(t){x.self=this==window||this==x?null:this,e.trigger.apply(x,arguments)}var m,b,w,y={id:"",data:[],handle:".bui-btn",swiperight:".swiperight",swipeleft:".swipeleft",position:"right",width:0,height:0,menuWidth:160,menuHeight:0,distance:80,zoom:!1,callback:null},x={active:l,lock:u,unlock:d,open:s,close:c,destroy:f,widget:h,option:p,config:k,init:n},k=x.config=t.extend(!0,{},y,e.config.listview,i),T=!1,C=!1;return n(k),x}}(window.bui||{},window.libs),function(e,t){e.btn=function(i){function n(i){var i=i;o();var n=0;r.on("click.bui",c,function(a){var o=i||t(this).attr("href"),r=t(this).attr("target"),c=t(this).attr("disabled"),d=t(this).hasClass("disabled")||""==c||"true"==c||"disabled"==c,f={};if(o&&!d&&!(o&&o.indexOf("javascript:")>-1)){if(o&&o.indexOf("?")>-1){var h=o.split("?");f=e.keyStringToObject(h[1]),o=h[0]}var p=t(this).attr("param")||"",g=p&&p.indexOf("{")>-1&&p.indexOf("}")>-1?JSON.parse(t(this).attr("param")):{},v=t.extend(!0,f,g);(t(this).attr("progress")?"false"!=t(this).attr("progress"):l)&&e.loading({autoTrigger:!0,display:"block",opacity:0,timeout:u.timeout});var m=+new Date;if(m-n<350)return!1;n=m;var b={url:o,param:v,replace:s};return"_blank"==r?e.run({id:o,data:v}):e.load(b),!1}})}function a(i,n){var n=n||{};o(),r.on("click.bui",c,function(a){var o=this,r=t(o).css("background-color"),l="none"==r?"#fff":r;n.appendTo=o,n.background=n.background||l,n.display=n.display||"inline",n.width=n.width||15,n.height=n.height||15,n.text=n.text||"加载中",n.autoClose=0!=n.autoClose,n.autoTrigger=0!=n.autoTrigger;var s=e.loading(n);return i&&i.call(o,s)})}function o(){return r.off("click.bui",c),this}var r,l,s,c,u={};return function(t){"object"===e.typeof(t)?(u.id=t.id||"",u.handle=t.handle||"",u.progress="progress"in t&&t.progress,u.replace="replace"in t&&t.replace,u.timeout=t.timeout||3e3):"string"===e.typeof(t)&&(u.id=t||"",u.handle="",u.progress=!1,u.replace=!1,u.timeout=3e3),r=e.obj(u.id),c=u.handle,l=u.progress,s=u.replace}(i),{load:n,submit:a,off:o}}}(window.bui||{},window.libs),function(e,t){e.dialog=function(i){function n(i){var n=t.extend(!0,I,i);switch(n.appendTo=n.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),P=!1,x=n.effect,n.position){case"top":S="bui-dialog-top",x=n.effect||"fadeInDown";break;case"bottom":S="bui-dialog-bottom",x=n.effect||"fadeInUp";break;case"left":S="bui-dialog-left",x=n.effect||"fadeInLeft";break;case"right":S="bui-dialog-right",x=n.effect||"fadeInRight";break;case"center":S="bui-dialog-center",x=n.effect||L}n.fullscreen&&(S="bui-dialog-fullscreen",x=n.effect||L),n.render?(n.id=e.guid(),c(n),w=e.objId(n.id)):(w=e.obj(n.id),w.addClass(S)),O=w.width()>N?N:w.width(),E=w.height()>D?D:w.height(),w.css("display","none"),y=e.toggle({id:n.id,effect:x});try{k=i.mask&&e.mask({opacity:i.opacity,appendTo:w.parent(),autoTrigger:!1,onlyOne:!0,autoClose:!1,zIndex:parseInt(i.zIndex,10)-1,callback:function(){i.onMask&&i.onMask(),I.autoClose&&(I.render?l(s):l())}})}catch(e){console.log(e)}return j&&!I.render||u(),I=C.config=n,this}function a(e){var i="";return i+='<div id="'+e.id+'" class="bui-dialog '+S+" "+e.className+'" style="display:block;z-index:'+e.zIndex+'">',e.title&&(i+='\t<div class="bui-dialog-head">'+e.title+"</div>"),i+='\t<div class="bui-dialog-main">',e.content&&(i+=e.content),i+="\t</div>",e.buttons&&e.buttons.length&&(i+='\t<div class="bui-dialog-foot bui-box">',t(e.buttons).each(function(e,t){i+='\t\t<div class="bui-btn span1 '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||t)+"</div>"}),i+="\t</div>"),e.close&&(i+='   <div class="bui-dialog-close">'+(e.closeText?e.closeText:'<i class="icon-close"></i>')+"</div>"),i+="</div>"}function o(t){if(!r&&!P){w.css("display","block");if(0==(w.attr("status")||0)){O=I.width||O||w.width(),E=I.height||E||w.height();var i=e.unit.pxToRemZoom(O),n=e.unit.pxToRemZoom(E),a=I.zoom?i+"rem":O+"px",o=I.zoom?n+"rem":E+"px",l=I.zoom?"-"+n/2+"rem":"-"+E/2+"px",s=I.zoom?"-"+i/2+"rem":"-"+O/2+"px";if("center"!=I.position||I.fullscreen||w.css({width:a,height:o,top:"50%","margin-top":l,left:"50%","margin-left":s,right:"auto"}),I.fullscreen||w.css({width:a,height:o}),I.scroll){var c=w.children(".bui-dialog-head"),d=w.children(".bui-dialog-foot"),f=w.children(".bui-dialog-main"),h=c.length?c.height():0,p=d.length?d.height():0,g=w.height()-h-p;f.css({height:g})}w.attr("status","1")}return k&&k.show(),y.show(function(e){r=!0,t&&t.call(C,y),b.call(this,"openafter",{target:w[0]})}),j||u(),b.call(this,"open",{target:w[0]}),this}}function r(e){return r}function l(t){if(r&&!P){var t=t||I.onClose;try{y.hide(function(e){r=!1,t&&t.call(C,y)}),k&&k.hide(),b.call(this,"close",{target:w[0]})}catch(t){e.showLog(t,"bui.dialog.close")}return this}}function s(){try{w.remove(),b.call(this,"remove",{target:null})}catch(t){e.showLog(t,"bui.dialog.remove")}return this}function c(e){var i=a(e);return t(e.appendTo).append(i),this}function u(){return w.on("click.bui",".bui-dialog-close",function(e){I.onClose&&I.onClose.call(this,C),I.autoClose&&(I.render?l(s):l()),e.stopPropagation()}),w.on("click.bui",".bui-dialog-foot .bui-btn",function(e){I.callback&&I.callback.call(this,C),I.autoClose&&(I.render?l(s):l()),e.stopPropagation()}),j=!0,this}function d(t){return e.selector.call(w,t)}function f(e){return T.title="提示",T.content="",T.close=!1,T.render=!0,T.autoClose=!0,T.mask=!0,T.buttons=["确定"],I=t.extend(!0,T,e),n(I),b.call(this,"create",{target:null}),this}function h(e){var e=1==e;w&&(w.off("click.bui"),e&&w.remove()),m("open"),m("close"),k&&k.destroy(e),y&&y.destroy(e),P=!0}function p(t){var i={toggle:y,mask:k};return e.widget.call(i,t)}function g(t,i){return e.option.call(C,t,i)}function v(t,i){return e.on.apply(C,arguments),this}function m(t,i){return e.off.apply(C,arguments),this}function b(t){C.self=this==window||this==C?null:this,e.trigger.apply(C,arguments)}var w,y,x,k,T={id:"",title:"",effect:"zoomIn",content:"",className:"",appendTo:"",position:"center",fullscreen:!1,width:0,height:0,mask:!0,opacity:.6,render:!1,autoClose:!0,close:!0,scroll:!0,closeText:"",zoom:!1,zIndex:100,buttons:[],onMask:null,onClose:null,callback:null},C={selector:d,$:d,handle:{},on:v,off:m,open:o,close:l,isOpen:r,create:f,remove:s,destroy:h,widget:p,option:g,config:I,init:n},I=C.config=t.extend(!1,{},T,e.config.dialog,i),S="",O="",E="",L="fadeInDown",r=!1,j=!1,N=window.viewport.width()||document.documentElement.clientWidth,D=window.viewport.height()||document.documentElement.clientHeight,P=!1;return I.id&&n(I),C}}(bui||{},libs),function(e,t){e.alert=function(i,n){var a=e.dialog(),o={};o.className="bui-alert",o.title="",o.width=580,o.height=360,o.scroll=!0,o.zIndex=111,o.position="center",o.autoClose=!0,o.zoom=!0,o.buttons=[{name:"确定",className:"primary-reverse"}],o.callback=n||function(){};var r=t.extend(o,e.config.alert),l="";try{l="string"==typeof i&&i.indexOf("<")>-1&&i.indexOf(">")>-1?"<xmp>"+i+"</xmp>":!i||"object"!==e.typeof(i)&&"array"!==e.typeof(i)?i&&"function"===e.typeof(i)?i.toString():i:JSON.stringify(i),r.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+l+"</div>"}catch(t){e.showLog(t,"bui.alert")}return a.create(r).open(),a}}(window.bui||{},window.libs),function(e,i){e.confirm=function(n,a){var o=e.dialog(),r={};r.className="bui-confirm",r.title="",r.width=580,r.height=360,r.scroll=!0,r.zIndex=111,r.autoClose=!0,r.zoom=!0,r.position="center",r.buttons=[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],r.callback=a||function(){};var l={};return"object"===(void 0===n?"undefined":t(n))?(n.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+n.content+"</div>",l=i.extend(r,e.config.confirm,n)):(l=i.extend(r,e.config.confirm),l.content='<div class="bui-dialog-text bui-box-center" style="height:100%;">'+n+"</div>",l.callback=a||function(){}),o.create(l).open(),o}}(window.bui||{},window.libs),function(e,i){e.prompt=function(n,a){var o=e.dialog(),r={};r.className="bui-prompt",r.title="",r.width=580,r.height=400,r.scroll=!0,r.autoClose=!1,r.zoom=!0,r.zIndex=111,r.position="center",r.buttons=[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],r.callback=a||function(){},r.placeholder="",r.row=1,r.type="text",r.value="",r.onChange=null;var l={},s="",c="";switch("object"===(void 0===n?"undefined":t(n))?(l=i.extend(r,e.config.prompt,n),s=l.content||""):(l=i.extend(r,e.config.prompt),l.callback=a||function(){},s=n||""),l.type){case"number":l.content='<div class="bui-prompt-main bui-box-vertical"> <div class="bui-prompt-label">'+s+'</div> <div class="span1"> <input class="bui-prompt-text" placeholder="'+l.placeholder+'" type="'+l.type+'" value="'+l.value+'"/> </div> </div>';break;default:l.content='<div class="bui-prompt-main bui-box-vertical"> <div class="bui-prompt-label">'+s+'</div> <div class="span1"> <textarea class="bui-prompt-text" placeholder="'+l.placeholder+'" rows="'+l.row+'" >'+l.value+"</textarea> </div> </div>"}return o.create(l).open(),i("#"+o.config.id).on("change",".bui-prompt-text",function(){c=this.value,l.onChange&&l.onChange.call(this,o)}),o.value=function(e){return void 0===e?c:(i("#"+o.config.id).find(".bui-prompt-text").val(e),c=e)},o.focus=function(e){i("#"+o.config.id).find(".bui-prompt-text").focus()},o}}(window.bui||{},window.libs),function(e,i){e.hint=function(n,a){function o(t){var n=i.extend(!0,C,t);return x=e.guid(),O="top"===n.position?"fadeInDown":"bottom"===n.position?"fadeInUp":n.effect,C=T.config=n,l(x,n.content,I,n.appendTo),++I,S=e.objId(x),y=e.toggle({id:S,effect:O}),E=!0,y.show(),n.autoClose&&(k&&clearTimeout(k),k=setTimeout(function(e){n.onClose&&n.onClose.call(T),c()},n.timeout)),L||r(n),this}function r(e){e.showClose&&S.on("click.bui",".bui-hint-close",function(){c(),e.onClose&&e.onClose.call(this,T)}),L=!0}function l(t,n,a,o){var r,l="11"+a,s=o?e.obj(o):i("body");switch(C.position){case"top":r="bui-hint-top";break;case"bottom":r="bui-hint-bottom";break;case"center":r="bui-hint-center"}var c=C.background?"background:"+C.background:"",u=c+";z-index:"+l+";opacity:"+C.opacity,d='<div id="'+t+'" class="bui-hint '+r+" "+C.skin+'" style="'+u+'">'+n+(C.showClose?'<div class="bui-hint-close"><i class="icon-close"></i></div>':"")+"</div>";s.append(d),o&&s.css("position","relative")}function s(){return E}function c(){var e=this;return y&&(E=!1,y.hide(function(){m.call(e,"hide",{target:null}),y.remove(),y=null})),this}function u(e){var t=this;return y&&(E=!1,y.hide(function(i){e&&e.call(this,T),m.call(t,"hide",{target:S[0]})})),this}function d(e){var t=this;return y&&(E=!0,y.show(function(i){m.call(t,"show",{target:S[0]}),e&&e.call(this,T)})),this}function f(e){var e=1==e;S.off("click.bui"),y&&y.destroy(e),v("show"),v("hide")}function h(t){var i={toggle:y};return e.widget.call(i,t)}function p(t,i){return e.option.call(T,t,i)}function g(t,i){return e.on.apply(T,arguments),this}function v(t,i){return e.off.apply(T,arguments),this}function m(t){T.self=this==window||this==T?null:this,e.trigger.apply(T,arguments)}var b={appendTo:"",content:"",timeout:2e3,autoClose:!0,showClose:!1,opacity:1,background:"",effect:"fadeInUp",skin:"",position:"bottom",onClose:null};if("number"==typeof n||"string"==typeof n){var w=n||"";n={},n.content=w,n.onClose=a||null}else"object"===(void 0===n?"undefined":t(n))&&n.content&&(n=n);var y,x,k,T={handle:{},on:g,off:v,remove:c,hide:u,show:d,isShow:s,destroy:f,widget:h,option:p,config:C,init:o},C=T.config=i.extend(!0,{},b,e.config.hint,n),I=0,S=null,O="",E=!1,L=!1;return C.content&&o(C),T}}(window.bui||{},window.libs),function(e,t){e.pullrefresh=function(i){function n(i){var n=t.extend(!0,H,i);return n.id?(C=e.obj(n.id),H=M.config=n,I=C[0],S=C.children(P),O=C.children(F),E=C.children(R),N=a,j=n.refreshTips.end,D=e.loading({appendTo:S,width:15,height:15,autoClose:!1,text:j,onlyText:!0,display:"inline",autoTrigger:!1,mask:!1}),n.autoLoad&&(q=!0,D.start({text:n.refreshTips.start,onlyText:!1}),N()),U||r(n),m(n.height),this):void e.hint("pullrefresh id不能为空")}function a(){V=(new Date).getTime(),H.onRefresh&&H.onRefresh.call(M),T.call(this,"refresh")}function o(){var e=(new Date).getTime(),t=e-V,i=Math.floor(t/36e5),n=Math.floor(t/6e4);Math.floor(t/1e3);return i<=0&&n<=0?"刚刚更新":i<=0&&n>0?n+"分钟前更新":"上次更新时间:"+(i<10?"0"+i:i)+":"+(n<10?"0"+n:n)}function r(e){A||d(),U=!0}function l(i){var n=i.originalEvent&&i.originalEvent.targetTouches||i.targetTouches,a=B?n[0]:i;return K.x1=a.pageX,K.y1=a.pageY,K.direction="",H.stopHandle&&e.checkTargetInclude(i.target,H.stopHandle)?void(_=!1):n.length>1||i.scale&&1!==i.scale?void(_=!1):(j=H.lastUpdated?o():H.refreshTips.end,T.call(this,"touchstart",i,K),void(_=!(!(t(window).scrollTop()<=0&&C.scrollTop()<=0&&H.onRefresh)||q)))}function s(t){var i=t.originalEvent&&t.originalEvent.targetTouches||t.targetTouches;if(_){if(i.length>1||t.scale&&1!==t.scale)return void h();if(!_)return void h();var n=B?i[0]:t;K.x2=n.pageX,K.y2=n.pageY,K.direction||(K.direction=e.swipeDirection(K.x1,K.x2,K.y1,K.y2)),T.call(this,"touchmove",t,K),"swipeleft"!==K.direction&&"swiperight"!==K.direction||t.preventDefault(),"swipedown"==K.direction?(T.call(this,"movingdown",t,K),L=Math.abs(K.y2-K.y1),h(L/2,!1),L>=H.distance?Q||(D.show({text:H.refreshTips.release,onlyText:!1}).pause(),Q=!0):Z||(D.show({text:j,onlyText:!1}).pause(),Z=!0),$=!0,H.maxDistance>H.distance&&L>=H.maxDistance&&(D.show({text:H.refreshTips.start,onlyText:!1}).start(),q=!0,H.onRefresh&&N(),$=!1,Q=!1,Z=!1,K={},J+=K.y2-K.y1,X+=K.x2-K.x1,K.lastX=X,K.lastY=J,K={x1:0,x2:0,y1:0,y2:0,direction:""},_=!1,$=!1),t.preventDefault(),t.stopPropagation()):"swipeup"==K.direction&&(T.call(this,"movingup",t,K),$=!0)}}function c(e){if(T.call(this,"touchend",e,K),!$)return K={x1:0,x2:0,y1:0,y2:0,direction:""},_=!1,void($=!1);"swipedown"==K.direction?(T.call(this,K.direction,e,K),L>=H.distance?(h(H.distance/2),D.show({text:H.refreshTips.start,onlyText:!1}).start(),q=!0,H.onRefresh&&N()):h(),e.stopPropagation(),Q=!1,Z=!1,K={}):"swipeup"==K.direction&&T.call(this,K.direction,e,K),J+=K.y2-K.y1,X+=K.x2-K.x1,K.lastX=X,K.lastY=J,K={x1:0,x2:0,y1:0,y2:0,direction:""},_=!1,$=!1}function u(e){return A=!0,C.off("touchstart",l).off("touchmove",s).off("touchend",c).off("touchcancel",h),h(),e&&e.call(this,M),T.call(this,"lock"),this}function d(e){return A=!1,C.on("touchstart",l).on("touchmove",s).on("touchend",c).on("touchcancel",h),e&&e.call(this,M),T.call(this,"unlock"),this}function f(e,t,i){return W||(D.show({text:H.refreshTips.success,onlyText:!1}),h(e,t),O.one("webkitTransitionEnd",function(){D&&D.hide(),W=!1,i&&i.call(M)})),this}function h(e,t){t=0!=t,e=e||0,q=!1;var i=t?"all 300ms ease-out":"none";return p(0,e+"px",i,O),E.length&&p(0,e+"px",i,E),this}function p(e,t,i,n){var i,n=n||C,e=e||0,t=t||0,a=e,o=t,r=String(e).indexOf("%")>-1?String(e):a,l=String(t).indexOf("%")>-1?String(t):o;i="number"==typeof i?"all "+i+"ms":i||"all 300ms";try{n.css({"-webkit-transition":i,transition:i,"-webkit-transform":"translate("+r+","+l+")",transform:"translate("+r+","+l+")"}),n.one("webkitTransitionEnd",function(){n.css({"-webkit-transition":"none",transition:"none"})})}catch(e){console.log(e.message)}}function g(){W=!0,h(),e.hint(H.refreshTips.fail),T.call(this,"fail")}function v(){h(H.distance/2,!0),D.start({text:H.refreshTips.start,onlyText:!1}),H.onRefresh&&N()}function m(e){var t=C.parents(".bui-page"),i=(t.children("main"),I&&I.offsetTop||0),n=t.children(H.header),a=n.length>1?n.eq(n.length-1).height():n.height(),o=t.children(H.footer),r=o.length>1?o.eq(o.length-1).height():o.height(),l=window.viewport.height()-(a||0)-(r||0)-i,s=e?parseFloat(e):l;C.height(s)}function b(e){var e=1==e;C&&(C.off(),e&&C.remove()),D&&D.destroy(e),k("refresh"),k("movingdown"),k("swipedown")}function w(t){var i={loading:D};return e.widget.call(i,t)}function y(t,i){return e.option.call(M,t,i)}function x(t,i){return e.on.apply(M,arguments),this}function k(t,i){return e.off.apply(M,arguments),this}function T(t){M.self=this==window||this==M?null:this,e.trigger.apply(M,arguments)}var C,I,S,O,E,L,j,N,D,P="."+e.prefix("scroll-head"),F="."+e.prefix("scroll-main"),R="."+e.prefix("scroll-foot"),z={id:"",stopHandle:"",childrenTop:P,childrenMain:F,header:".bui-page header",footer:".bui-page footer",distance:90,maxDistance:0,autoLoad:!0,lastUpdated:!1,height:0,refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"刷新失败,请检查下网络再试试",success:"刷新成功"},onRefresh:null},M={handle:{},on:x,off:k,reverse:f,refresh:v,setHeight:m,fail:g,lock:u,unlock:d,destroy:b,widget:w,option:y,config:H,init:n},H=M.config=t.extend(!0,{},z,e.config.pullrefresh,i),A=!1,V=(new Date).getTime(),q=!1,U=!1,W=!1,Y=/hp-tablet/gi.test(navigator.appVersion),B="ontouchstart"in window&&!Y,J=0,X=0,_=!1,$=!1,K={x1:0,x2:0,y1:0,y2:0,direction:""};n(H);var Q=!1,Z=!1;return M}}(window.bui||{},window.libs),function(e,i){e.scroll=function(n){function a(t){var n=i.extend(!0,_,t);if(P=i(window),!n.id)return void e.hint("scroll id不能为空");N=e.obj(n.id),ne=n.page,ae=n.pageSize,_=X.config=n,G=!0,ee=!0,te=!1,ie=!1,D=N[0],R=N.children(W),M=N.children(Y),z=N.children(B),M.css({position:"relative"}),V=e.loading({appendTo:z,width:20,height:20,autoClose:!1,text:n.scrollTips.start,display:"inline",autoTrigger:!1,mask:!1}),H=s,A=l,q?q.init({id:n.id,onRefresh:H,distance:n.distance,maxDistance:n.maxDistance,lastUpdated:n.lastUpdated,height:n.height,refreshTips:n.refreshTips,autoLoad:n.autoRefresh}):n.refresh&&n.onRefresh?(q=e.pullrefresh({id:n.id,onRefresh:H,distance:n.distance,stopHandle:n.stopHandle,maxDistance:n.maxDistance,lastUpdated:n.lastUpdated,header:n.header,footer:n.footer,height:n.height,refreshTips:n.refreshTips,autoLoad:n.autoRefresh}),q.lock(),Q=!0):b(n.height);try{A&&A.call(X,ne,ae)}catch(t){e.showLog(t,"bui.scroll.init")}return oe||o(n),this}function o(t){N.on("scroll",e.unit.debounce(r,t.delayTime)),oe=!0}function r(e){var t=e.target;0==(t.scrollTop||0)?j.call(this,"scrolltop",e):t.scrollTop+t.clientHeight>=(t&&t.scrollHeight-_.endDistance)&&_.onLoad&&(_.page=X.config.page=++ne,_.autoScroll&&A&&A.call(X,_.page,ae),j.call(this,"scrollbottom",e)),j.call(this,"scrollend",e),_.onScrolling&&_.onScrolling.call(this,e,X)}function l(e,t){return Z=!0,ie=!1,ee&&!te&&(_.page=X.config.page=e,_.onLoad&&V&&V.start({text:_.scrollTips.start,onlyText:!1}),_.onLoad&&_.onLoad.call(X,e,t)),Q&&_.refresh&&q&&q.unlock(),this}function s(){Z=!0,ee=!0,te=!1,G=!0,ie=!0,ne=$,ae=_.pageSize,re={},V&&V.start({text:_.scrollTips.end,onlyText:!0}),_.page=X.config.page=ne,j.call(this,"refresh",ne),_.onRefresh&&_.onRefresh.call(X,ne,ae)}function c(t,i,n){var n=0!=n;if(!i||"array"!=e.typeof(i))return e.showLog("scroll 控件的updatePage 第2个参数,必须是一个数组,如果是list控件,检测field的data映射是否准确","bui.scroll.updatePage"),void(i=[]);i=i,Z=!1,le&&clearTimeout(le),le=setTimeout(function(){var e=parseInt(N.height()),a=parseInt(N.find(_.childrenMain)[0]&&N.find(_.childrenMain)[0].scrollHeight);if(n)if(i&&i.length>ae-1){if(ee=!0,te=!1,G=!1,V&&V.start({text:_.scrollTips.end,onlyText:!0}),a>=10&&a<e&&_.autoNext&&_.onLoad){var o=++ne;A&&A.call(X,o,ae)}j.call(this,"loadpage",i,ne)}else{ee=!1,te=!0;var r=G&&i.length<1?_.scrollTips.nodata:_.scrollTips.last;V&&V.start({text:r,onlyText:!0}),j.call(this,"loadpage",i,ne),j.call(this,"lastpage",i,ne)}else ee=!1,te=!0,V&&V.stop();return re[t]=i},10)}function u(e){return q&&q.reverse(),e&&e.call(X,q),this}function d(){return ie}function f(e){return re}function h(e){re={}}function p(e,t){return K=!0,Q=!0,V.show({text:_.scrollTips.fail,onlyText:!0,callback:function(i){l(e,t)}}),q&&q.lock(),this}function g(t,i){var n,a,o=[];if(t&&i)for(n in re){var r=e.array.filter(t,re[n],i);if(r.length)for(a in r)o.push(r[a])}return o}function v(e,t){var e=e||0;F=N.find(_.children).children(_.handle);var i=N.height(),n=parseFloat(F.height()),a=D.scrollHeight,o=n*parseInt(e)-n;return a>i&&(D.scrollTop=o,j.call(this,"to",e),t&&t.call(X,parseInt(e))),this}function m(e){var n=0;return n="object"===(void 0===e?"undefined":t(e))?i(e)[0].offsetTop:"string"==typeof e&&e.indexOf("#")>-1?i(e)[0].offsetTop:parseInt(e)||0,D.scrollTop=n,this}function b(e){var t=N.parents(".bui-page"),i=(t.children("main"),D&&D.offsetTop||0),n=t.children(_.header),a=n.length>1?n.eq(n.length-1).height():n.height(),o=t.children(_.footer),r=o.length>1?o.eq(o.length-1).height():o.height(),l=window.viewport.height()-(a||0)-(r||0)-i,s=e?parseFloat(e):l;N.height(s)}function w(){return N.off("scroll",e.unit.debounce(r,_.delayTime)),j.call(this,"lock"),this}function y(t){return N.on("scroll",e.unit.debounce(r,_.delayTime)),j.call(this,"unlock"),this}function x(){return v(1),q&&q.refresh(),this}function k(e){var e=e||ne;return ne=e,A&&A.call(X,ne,ae),this}function T(){return A&&A.call(X,++ne,ae),this}function C(){return ne-- >0&&A&&A.call(X,ne--,ae),this}function I(e){var e=1==e;N&&(N.off("scroll"),e&&N.remove()),q&&q.destroy(e),V&&V.destroy(e),L("loadpage"),L("lastpage"),L("scrolltop"),L("scrollbottom"),L("scrollend")}function S(t){var i={pullrefresh:q,loading:V};return e.widget.call(i,t)}
function O(t,i){return e.option.call(X,t,i)}function E(t,i){return e.on.apply(X,arguments),this}function L(t,i){return e.off.apply(X,arguments),this}function j(t){X.self=this==window||this==X?null:this,e.trigger.apply(X,arguments)}var N,D,P,F,R,z,M,H,A,V,q,U="."+e.prefix("list"),W="."+e.prefix("scroll-head"),Y="."+e.prefix("scroll-main"),B="."+e.prefix("scroll-foot"),J={id:"",childrenTop:W,childrenMain:Y,childrenBottom:B,children:U,stopHandle:"",header:".bui-page header",footer:".bui-page footer",handle:"li",distance:100,endDistance:1,height:0,page:1,pageSize:10,lastUpdated:!0,autoRefresh:!1,autoNext:!0,autoScroll:!0,refresh:!0,delayTime:100,scrollTips:{start:"努力加载中..",end:"上拉加载更多",nodata:"没有更多内容",last:"没有更多内容",fail:"点击重新加载"},refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"点击加载",success:"刷新成功"},onScrolling:null,onRefresh:null,onLoad:null},X={handle:{},on:E,off:L,reverse:u,updateCache:c,updatePage:c,getCache:f,clearCache:h,fail:p,filter:g,to:v,scrollTop:m,lock:w,unlock:y,refresh:x,load:k,nextPage:T,prevPage:C,setHeight:b,isRefresh:d,destroy:I,widget:S,option:O,config:_,init:a},_=X.config=i.extend(!0,{},J,e.config.scroll,n),$=_.page,K=!1,Q=!1,Z=!1,K=!1,G=!0,ee=!0,te=!1,ie=!1,ne=_.page,ae=_.pageSize,oe=!1,re={};a(_);var le;return X}}(window.bui||{},window.libs),function(e,t){e.list=function(i){function n(i){var n=t.extend(!0,C,i);b=e.obj(n.id),w=b.find(n.children),C=T.config=n,S=C.data;var r=0==C.refresh?null:l;if(C.url)return x?x.init({id:n.id,children:n.children,handle:n.handle,page:n.page,pageSize:n.pageSize,distance:n.distance,maxDistance:n.maxDistance,height:n.height,refresh:n.refresh,autoNext:n.autoNext,autoScroll:n.autoScroll,scrollTips:n.scrollTips,refreshTips:n.refreshTips,lastUpdated:n.lastUpdated,onRefresh:r,onLoad:o}):x=bui.scroll({id:n.id,children:n.children,handle:n.handle,header:n.header,footer:n.footer,page:n.page,pageSize:n.pageSize,distance:n.distance,stopHandle:n.stopHandle,maxDistance:n.maxDistance,height:n.height,refresh:n.refresh,autoNext:n.autoNext,autoScroll:n.autoScroll,scrollTips:n.scrollTips,refreshTips:n.refreshTips,lastUpdated:n.lastUpdated,onRefresh:r,onLoad:o}),O||a(n),this}function a(e){return e.callback&&b.on("click",e.handle,function(t){e.callback.call(this,t,T,x)}),O=!0,this}function o(n,a,o){function l(e,t,i){var n=(e-1)*t;return n+t>=i.length?i.slice(n,i.length):i.slice(n,n+t)}function s(e,t,a){var o,s;o="string"==typeof e?e&&JSON.parse(e)||{}:e||{},s=C&&C.field&&""==C.field.data?o||[]:r(C.field.data,o),C.localData&&(s=l(n,C.pageSize,s));var d=i.template&&i.template(s,o,n)||"";d&&w&&w[u](d);var f=x&&x.isRefresh()||!1;m.call(c,"success",e,n,a);try{f?(C.onRefresh&&C.onRefresh.call(T,x,o,a),m.call(c,"refresh",e,n,a),C.refresh&&x.reverse()):C.onLoad&&C.onLoad.call(T,x,o,a),C.localData?c&&c.updatePage(n,s):x&&x.updatePage(n,s)}catch(e){}}var c=this,u=o||C.commandLoad,d=[],f=[];return S=t.extend(!0,{},E,C.data,S),C&&C.field&&C.field.page&&C.field.page.indexOf(".")>-1?(d=C.field.page.split("."),S[d[0]]=S[d[0]]||{},S[d[0]][d[1]]=n):S[C.field.page]=n,C&&C.field&&C.field.size&&C.field.size.indexOf(".")>-1?(f=C.field.size.split("."),S[f[0]]=S[f[0]]||{},S[f[0]][f[1]]=a):S[C.field.size]=a,C.page=T.config.page=n,C.data=S,C.localData?void s(C.localData,200):(y=e.ajax(C).done(s).fail(function(e,t,i){m.call(c,"fail",e,n,i),C.onFail&&C.onFail.call(T,t,x,n,i),x&&x.fail(n,a,e)}),this)}function r(e,t){function i(e){var t,o=e[n[a]],r=n[a+1];return t="string"==typeof o?JSON.parse(o):o||[],r&&r in t?(a++,i(t)):(a=0,t)}var n=[];e&&e.indexOf(".")>-1?n=e.split("."):n.push(e);var a=0;return i(t)}function l(){var e=I,t=C.pageSize;return m.call(this,"refreshbefore"),o(e,t,C.commandRefresh),this}function s(){return m.call(this,"refreshbefore"),x.refresh(),this}function c(i,n){var a;if("string"==typeof n)try{a=JSON.parse(n)}catch(t){return void e.showLog("data 参数必须为对象","bui.list.modifyData")}else a=n;return S=t.extend(!0,{},E,a)}function u(){w.html("")}function d(e){var e=1==e;b&&(b.off("click.bui"),e&&b.remove(),b=null),v("refreshbefore"),v("refresh"),v("success"),v("fail"),x&&x.destroy(e)}function f(t){var i={scroll:x,ajax:y};return e.widget.call(i,t)}function h(t,i){return"data"==t&&void 0!==i?c(t,i):e.option.call(T,t,i)}function p(e){return C=T.config=t.extend(!0,{},T.config,e),S=C.data,this}function g(t,i){return e.on.apply(T,arguments),this}function v(t,i){return e.off.apply(T,arguments),this}function m(t){T.self=this==window||this==T?null:this,e.trigger.apply(T,arguments)}var b,w,y,x,k={id:"",url:"",data:{},method:"GET",dataType:"json",headers:{},contentType:"",timeout:2e4,field:{page:"page",size:"pageSize",data:""},scrollTips:{start:"努力加载中..",end:"上拉加载更多",nodata:"没有更多内容",last:"没有更多内容",fail:"点击重新加载"},refreshTips:{start:"刷新中..",release:"松开刷新",end:"下拉刷新",fail:"点击加载",success:"刷新成功"},lastUpdated:!1,page:1,pageSize:10,autoNext:!0,autoScroll:!0,native:!0,refresh:!0,stopHandle:"",children:".bui-list",handle:".bui-btn",header:".bui-page header",footer:".bui-page footer",height:0,commandRefresh:"html",commandLoad:"append",localData:null,template:null,onRefresh:null,onLoad:null,onFail:null,callback:null},T={handle:{},on:g,off:v,empty:u,refresh:s,modify:p,destroy:d,widget:f,option:h,config:C,init:n},C=T.config=t.extend(!0,{},k,e.config.list,i),I=C.page,S={},O=!1,E=C.data;return n(C),T}}(window.bui||{},window.libs),function(e,t){e.searchbar=function(i){function n(i){var n=t.extend(!0,b,i);return f=e.obj(n.id),b=m.config=n,p=f.find("input"),f.find(n.handleRemove).length>0||p.after('<i class="'+n.handleRemove.substr(1)+'"></i>'),g=f.find(n.handleRemove),g.hide(),w||a(n),this}function a(i){return f.on("click.bui",i.handle,function(e){document.activeElement.blur();var t=p.val();h=t,d.call(this,"search",t),i.callback&&i.callback.call(this,m,t)}),f.on("click.bui",i.handleRemove,function(){document.activeElement.blur(),p.val("");var e=p.val();h=e,t(this).hide(),d.call(this,"remove",e),i.onRemove&&i.onRemove.call(this,m,e)}),f.on("input","input",e.unit.debounce(function(){var e=p.val();h=e,e?g.show():g.hide(),d.call(this,"input",e),i.onInput&&i.onInput.call(this,m,e)},i.delayTime)),w=!0,this}function o(e){return e=e||h,d.call(this,"search",e),b.callback&&b.callback.call(this,m,e),this}function r(e){var e=1==e;f&&(f.off(),e&&f.remove()),u("search"),u("remove"),u("input")}function l(t){var i={};return e.widget.call(i,t)}function s(t,i){return e.option.call(m,t,i)}function c(t,i){return e.on.apply(m,arguments),this}function u(t,i){return e.off.apply(m,arguments),this}function d(t){m.self=this==window||this==m?null:this,e.trigger.apply(m,arguments)}var f,h,p,g,v={id:"",handle:".icon-search,.btn-search",handleRemove:".icon-removefill",delayTime:400,onInput:null,onRemove:null,callback:null},m={handle:{},on:c,off:u,search:o,destroy:r,widget:l,option:s,config:b,init:n},b=m.config=t.extend(!0,{},v,e.config.searchbar,i),w=!1;return n(b),m}}(bui||{},libs),function(e,t){e.select=function(i){function n(i){var n=t.extend(!0,R,i);if(n.appendTo=n.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),V=[],q=[],z=n.id?e.obj(n.id).attr("id"):z,R=F.config=n,n.data&&n.data.length)var o=c(n.data);if(n.popup)if(D)D.close(),E.find(".bui-dialog-main").html(o);else{if(n.id)E=e.obj(n.id);else{var s=l();t(n.appendTo).append(s),E=e.obj(z),E.find(".bui-dialog-main").html(o)}D=e.dialog({id:z,effect:n.effect,mask:n.mask,position:n.position,autoClose:!1,height:n.height,width:n.width,zoom:!1,fullscreen:n.fullscreen,onMask:function(e){f()}})}else{if(!n.id)return void e.hint("select id 必须有");E=e.obj(n.id),n.data&&n.data.length&&E.html(o)}return N=E.find(n.handle),n.data.length<1&&a(),U||r(n),n.value&&h(n.value),this}function a(e){var i=[],n=[];return N.find("input").each(function(a,r){var l=t(this);if(!(l.length<1)){var s=l.val(),c=l.attr("text"),u=l.is(":checked");R.data[a]={},R.data[a][H]=c,R.data[a][A]=s,i.push(s),n.push(c),u&&o({name:c,value:s}),e&&e.call(this,a,r)}}),{value:i,text:n}}function o(e){switch(R.type){case"radio":case"select":V=[],q=[],V.push(e.name),q.push(e.value);break;case"checkbox":V.push(e.name),q.push(e.value)}}function r(i){i.trigger&&(O=e.obj(i.trigger),j=O.find(i.triggerChildren).length?O.find(i.triggerChildren):O,L=i.placeholder||t.trim(j.html()),i.placeholder&&j.html(i.placeholder),O.on("click.bui",function(e){t(this).hasClass("disabled")||u()}));var n=function(n){var a=t(n.target[n.target.length-1]),r=a.val(),l=a.attr("text"),s="INPUT"!==n.srcElement.nodeName?a.is(":checked"):!a.is(":checked");s?s&&(i.toggle||"checkbox"==i.type)&&(S.call(a,"uncheck",n),e.array.remove(l,V),e.array.remove(r,q),i.onChange&&i.onChange.call(a,n)):(S.call(a,"check",n),o({name:l,value:r}),i.onChange&&i.onChange.call(a,n)),h(q.join(",")||""),p(V.join(",")||"")},a=function(e){var a=null;e.srcElement=e.originalEvent&&e.originalEvent.srcElement||e.srcElement,a=t(this).find("input"),e.target=[a[0]],n.call(a,e),i.popup&&i.autoClose&&f(),S.call(a,"select",e),e.stopPropagation()};E.on("click",i.handle,a);var r=function(e){i.callback&&i.callback.call(this,F),e.stopPropagation()};E.on("click.bui",i.callbackHandle,r),U=!0}function l(e){var i="";return R.popup&&(i+='<div id="'+z+'" class="bui-dialog bui-dialog-select">',R.title&&(i+='<div class="bui-dialog-head">'+R.title+"</div>"),i+='  <div class="bui-dialog-main">'),R.popup&&(i+="  </div>",R.buttons.length>0&&(i+='    <div class="bui-dialog-foot bui-box">',t.each(R.buttons,function(e,t){i+='        <div class="span1">',i+='             <div class="bui-btn '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||t)+"</div>",i+="        </div>"}),i+="    </div>"),i+="</div>"),i}function s(e){var e=e||{},t=document.createElement("input");for(var i in e)"string"!=typeof e[i]&&"number"!=typeof e[i]||t.setAttribute(i,e[i]);switch(R.type){case"select":t.setAttribute("type","radio"),t.setAttribute("class",R.className||"bui-choose");break;case"radio":t.setAttribute("type","radio"),t.setAttribute("class",R.className||"bui-radio");break;case"checkbox":t.setAttribute("type","checkbox"),t.setAttribute("class",R.className||"bui-choose");break;default:t.setAttribute("type","checkbox")}return t}function c(i){var n=M,a="",o="",r=R.template&&R.template(i,R);return r?o=r:t.each(i,function(i,a){var r="string"==typeof a?a:a[H]||a||"",l=a&&a[A]?a[A]||a:i,c={name:n,value:l,text:r};a=a&&"object"===e.typeof(a)?a:{};var u=t.extend(!0,{},a,c),d=s(u).outerHTML;o+='    <div class="bui-btn bui-box bui-btn-line">',"left"==R.direction&&(o+=d),"center"==R.direction?(o+='        <div class="span1" align="center">'+r+"</div>",o+=d):o+='        <div class="span1">'+r+"</div>","right"==R.direction&&(o+=d),o+="    </div>"}),a+='    <div class="bui-list">',a+=o,a+="    </div>"}function u(e){return S.call(this,"showbefore"),R.popup&&D?!D.isOpen()&&D.open(function(){e&&e.call(F),S.call(this,"show")}):(E.css("display","block"),e&&e.call(F),S.call(this,"show")),this}function d(){return E.html(""),R.data=[],this}function f(e){return S.call(this,"hidebefore"),R.popup&&D?D.isOpen()&&D.close(function(){e&&e.call(F),S.call(this,"hide")}):(E.css("display","none"),e&&e.call(F),S.call(this,"hide")),this}function h(t){if(void 0===t)return q.join(",");N=E.find(R.handle);var i=[],n=[],a=[],o=[];String(t).indexOf(",")>-1?o=t.split(","):t&&o.push(t),R.data.forEach(function(t,r){var l=t&&"object"===e.typeof(t)&&t.hasOwnProperty(H)?String(t[H]):String(t),s=t&&"object"===e.typeof(t)&&t.hasOwnProperty(A)?String(t[A]):String(r),c=N.eq(r).find("input");if(""==t)return c.prop("checked",!1),V=[],void(q=[]);var u=e.array.index(l,o);e.array.index(s,o)>-1||u>-1?("radio"!=R.type&&"select"!=R.type||(n=[],a=[]),n.push(l),a.push(s),i[r]=c,c.prop("checked",!0)):c.prop("checked",!1)}),V=n.map(function(e,t){return e}),q=a.map(function(e,t){return e}),S.call(i[i.length-1],"change",{target:i}),O&&R.change&&O.attr("value",a.join(",")),E.attr("value",a.join(","))}function p(e){return void 0===e?V.join(","):(O&&R.change&&(O.attr("text",e),j.html(e||L)),E.attr("text",e),this)}function g(e){var t=[];return String(e).indexOf(",")>-1?t=e.split(","):t.push(parseInt(e)),V=[],q=[],t.forEach(function(e,t){R.data[e]&&V.push(R.data[e][H]||R.data[e]),R.data[e]&&q.push(R.data[e][A]||t)}),"checkbox"==R.type?(p(V.join(",")),h(q.join(","))):(p(V[0]),h(q[0])),this}function v(){if("checkbox"==R.type){g(R.data.map(function(e,t){return t}).join(","))}else g(0);return this}function m(){return V=[],q=[],N.find("input").prop("checked",null),h(""),p(""),S.call(this,"reset"),this}function b(){if("checkbox"==R.type){var t=V.map(function(e,t){return e});q.map(function(e,t){return e});V=[],q=[],R.data.forEach(function(i,n){var a=N.eq(n).find("input");e.array.index(i[H],t)>-1?a.prop("checked",null):(a.prop("checked",!0),V.push(i[H]),q.push(i[A]))}),h(q.join(",")||""),p(V.join(",")||"")}else m();return this}function w(){var e=O;return e&&e.addClass("disabled"),this}function y(){var e=O;return e&&e.removeClass("disabled"),this}function x(e){var e=1==e;return E&&(E.off(),e&&E.remove()),O&&(O.off("click.bui"),e&&O.remove()),D&&D.destroy(e),I("show"),I("hide"),I("change"),I("select"),I("check"),I("uncheck"),this}function k(t){var i={dialog:D||{}};return e.widget.call(i,t)}function T(t,i){return e.option.call(F,t,i)}function C(t,i){return e.on.apply(F,arguments),this}function I(t,i){return e.off.apply(F,arguments),this}function S(t){F.self=this==window||this==F?null:this,e.trigger.apply(F,arguments)}var O,E,L,j,N,D,P={id:"",trigger:"",triggerChildren:".span1",handle:".bui-list .bui-btn",className:"",name:"",appendTo:"",data:[],popup:!0,title:"",autoClose:!1,placeholder:"",field:{name:"name",value:"value"},height:0,width:0,mask:!0,change:!0,toggle:!1,effect:"fadeInUp",type:"radio",direction:"left",position:"bottom",fullscreen:!1,value:"",buttons:[],onChange:null,callbackHandle:".bui-dialog-foot .bui-btn",callback:null},F={handle:{},on:C,off:I,value:h,active:g,disabled:w,enabled:y,empty:d,text:p,show:u,hide:f,selectAll:v,selectNone:m,unselect:b,destroy:x,widget:k,option:T,config:R,init:n},R=F.config=t.extend(!1,{},P,e.config.select,i),z=e.guid(),M=R.name||e.guid(),H=R.field.name,A=R.field.value,V=[],q=[],U=!1;return n(R),F}}(window.bui||{},window.libs),function(e,t){e.dropdown=function(i){function n(i){var n=t.extend(!0,L,i);if(!n.id)return void e.showLog("dropdown id不能为空","bui.dropdown.init");if(x=e.obj(n.id),L=E.config=n,k=x.children(n.handle),S=n.target?x.find(n.target):k.next(),n.data.length){var r=f(n.data);S.length?S.remove()&&k.after(r):x.append(r),S=x.find(n.target)}C=n.relative,T=x.attr("position")||n.position;var s=x[0]&&x[0].offsetLeft>=document.documentElement.clientWidth?0:x[0]&&x[0].offsetLeft,c=n.width?"auto":-s+"px",u={bottom:{menuPosition:"bui-menu-bottom",arrowPosition:"bui-arrow-up",left:c},top:{menuPosition:"bui-menu-top",arrowPosition:"bui-arrow-down",left:c},left:{menuPosition:"bui-menu-left",arrowPosition:"bui-arrow-right",left:"auto"},right:{menuPosition:"bui-menu-right",arrowPosition:"bui-arrow-left",left:"100%"}};I=n.width>0?n.width:C?j:n.width,parseFloat(I)>0&&S.width(I),o(n.showArrow?u[T].arrowPosition+" "+u[T].menuPosition:u[T].menuPosition,u[T].left);var d=S.find(n.targetHandle+".active").eq(0),h=d.index();return h>-1&&l(h),N||a(n),this}function a(e){var i=function(e){if(!t(this).hasClass("disabled")){var i=t(this).hasClass("active");d(),i?c():u(),e.stopPropagation()}},n=function(i){var n=t(this).attr("value")||"",a=t.trim(t(this).text()),o=void 0!=x.attr("change")?x.attr("change"):e.change;e.showActive&&t(this).addClass("active").siblings().removeClass("active"),r.call(this,n),1==o&&s.call(this,a),L.autoClose&&c(),e.callback&&e.callback.call(this,i),L.stopPropagation&&i.stopPropagation()};k.on("click.bui",i),x.on("click.bui",e.targetHandle,n);var a=function(e){d(),e.stopPropagation()};L.autoClose&&t("body").off("click.bui").on("click.bui",":not(.bui-dropdown)",a),N=!0}function o(e,t){S.addClass(e),C&&S.css({left:t})}function r(e){if(void 0===e){return D||k.attr("value")}D=e,k.attr("value",e),L.change||y.call(this,"change",{target:k[0]})}function l(e){e=parseInt(e);var i=S.find(L.targetHandle).eq(e);if(i.length>0){var n=t.trim(i.text()),a=i.attr("value")||"";s(n),r(a),L.showActive&&i.addClass("active").siblings().removeClass("active")}return this}function s(e){if(void 0===e){return t.trim(k.text())}var i=k.children(L.handleChildren);return i?i.text(e):k.text(e),y.call(this,"change",{target:k[0]}),this}function c(){return k.removeClass("active"),S.css("display","none"),y.call(this,"hide",{target:k[0]}),this}function u(){return k.addClass("active"),S.css("display","block"),y.call(this,"show",{target:k[0]}),this}function d(){return t(".bui-dropdown > .bui-btn").removeClass("active"),t(".bui-dropdown > .bui-list").css("display","none"),y.call(this,"hide",{target:k[0]}),this}function f(e){var t="";return t+='<ul class="bui-list">',e.map(function(e,i){t+='<li class="bui-btn" value="'+e.value+'">'+e.name+"</li>"}),t+="</ul>"}function h(){var e=k;return e&&e.addClass("disabled"),this}function p(){var e=k;return e&&e.removeClass("disabled"),this}function g(e){var e=1==e;x&&(x.off("click.bui"),e&&x.remove()),k&&(k.off("click.bui"),e&&k.remove()),t("body").off("click.bui"),w("show"),w("hide")}function v(t){var i={};return e.widget.call(i,t)}function m(t,i){return e.option.call(E,t,i)}function b(t,i){return e.on.apply(E,arguments),this}function w(t,i){return e.off.apply(E,arguments),this}function y(t){E.self=this==window||this==E?null:this,e.trigger.apply(E,arguments)}var x,k,T,C,I,S,O={id:"",handle:".bui-btn",handleChildren:".span1",target:".bui-list",targetHandle:".bui-btn",data:[],position:"bottom",showArrow:!1,showActive:!0,autoClose:!0,stopPropagation:!1,width:0,relative:!0,change:!0,callback:null},E={handle:{},on:b,off:w,active:l,disabled:h,enabled:p,value:r,text:s,hide:c,show:u,hideAll:d,destroy:g,widget:v,option:m,config:L,init:n},L=E.config=t.extend(!0,{},O,e.config.dropdown,i),j=document.documentElement.clientWidth,N=!1,D="";return n(L),E}}(window.bui||{},window.libs),function(e,t){e.accordion=function(i){function n(i){var n=t.extend(!0,O,i);return x=window.viewport.width()||document.documentElement.clientWidth,k=window.viewport.height()||document.documentElement.clientHeight,E=n.id.indexOf(".")>-1?t(n.id):e.obj(n.id)||t("."+e.prefix("accordion")),O=S.config=n,T=n.handle.indexOf("#")>-1?e.obj(n.handle):E.children(n.handle),C=n.target.indexOf("#")>-1?e.obj(n.target):E.children(n.target),a(n),L||o(n),this}function a(e){T.removeClass("active"),C.css("display","none"),parseFloat(e.targetHeight)>0&&C.height(e.targetHeight),parseFloat(e.height)>0&&E.height(e.height)}function o(e){var i=function(i){t(this).hasClass("disabled")||t(this).attr("href")||(s.call(this,e),e.callback&&e.callback.call(this,S),!t(this).attr("href")&&i.stopPropagation())};e.handle.indexOf("#")>-1?T.on("click.bui",i):E.off("click.bui").on("click.bui",e.handle,i),L=!0}function r(e){var t;return t="number"==typeof e?T.eq(e):T,t&&t.addClass("disabled"),this}function l(e){var t;return t="number"==typeof e?T.eq(e):T,t&&t.removeClass("disabled"),this}function s(i){var n=t(this),a=n.hasClass("active"),o=(T.index(this),i.target.indexOf("#")>-1?e.obj(i.target):n.next(i.target));i.single?a?(n.removeClass("active"),o.css("display","none"),y.call(S,"hide",{target:n})):(p(),n.addClass("active"),o.css("display","block"),y.call(S,"show",{target:n})):a?(n.removeClass("active"),o.css("display","none"),y.call(S,"hide",{target:n})):(n.addClass("active"),o.css("display","block"),y.call(S,"show",{target:n}))}function c(e){var e=Number(e)||0,t=T.eq(e).length?T.eq(e):T,i=C.eq(e).length?C.eq(e):t.next(O.target);return t.addClass("active"),i.css("display","block"),y.call(this,"show",{target:T[e]}),this}function u(e){var e=Number(e)||0,t=T.eq(e).length?T.eq(e):T,i=C.eq(e).length?C.eq(e):t.next(O.target);return t.removeClass("active"),i.css("display","none"),y.call(this,"hide",{target:T[e]}),this}function d(){return E.length>1?E.each(function(e,t){f(0,t)}):f(0),y.call(this,"show",{target:T[0]}),this}function f(e,i){var e=e||0;(i?t(i):E).children(O.handle).eq(e).addClass("active").next(O.target).css("display","block")}function h(){return T.each(function(e,i){t(i).addClass("active").next(O.target).css("display","block")}),y.call(this,"showall",{target:T}),this}function p(){return T.each(function(e,i){t(i).removeClass("active").next(O.target).css("display","none")}),y.call(this,"hideall",{target:T}),this}function g(e){var e=1==e;E&&(E.off("click.bui"),e&&E.remove()),w("hide"),w("show")}function v(t){var i={};return e.widget.call(i,t)}function m(t,i){return e.option.call(S,t,i)}function b(t,i){return e.on.apply(S,arguments),this}function w(t,i){return e.off.apply(S,arguments),this}function y(t){S.self=this==window||this==S?null:this,e.trigger.apply(S,arguments)}var x,k,T,C,I={id:"",handle:"dt",target:"dd",height:0,targetHeight:0,single:!1,callback:null},S={handle:{},on:b,off:w,showFirst:d,showAll:h,hideAll:p,disabled:r,enabled:l,destroy:g,show:c,hide:u,widget:v,option:m,config:O,init:n},O=S.config=t.extend(!0,{},I,e.config.accordion,i),E=null,L=!1;return n(O),S}}(window.bui||{},window.libs),function(e,t){e.rating=function(i){function n(i){var n=t.extend(!0,S,i);return n.id?(w=e.obj(n.id),S=I.config=n,y=n.fullClassName,x=n.halfClassName,l(n),O||r(n),this):void e.hint("rating id不能为空")}function a(t){var i=(e.guid(),""),n=0,a=t.stars;for(n=0;n<a;n++)i+='<div class="bui-rating-cell" ></div>';return i}function o(e){var t,i="",e=String(e)||String(k),n=0,a=S.stars,o=[];o=e.indexOf(".")>-1?e.split("."):[e,0];var r=parseInt(o[0]);for(t=o[1]/10*100+"%",n=0;n<a;n++)n<r&&(i+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:100%;">&nbsp;</div></div>'),n==r&&(i+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:'+t+';">&nbsp;</div></div>'),n>r&&(i+='<div class="bui-rating-cell" ><div class="bui-rating-cell-full" style="width:0;">&nbsp;</div></div>');return i}function r(e){if(!e.disabled){var i=String(e.value).indexOf(".")>-1?1:0;w.on("click.bui",e.handle,function(n){var a=t(this).index(),o=0;if(e.half){o=i%2==0?a+.5:a+1}else o=a+1;s(o),c(o),i++,e.callback&&e.callback.call(this,I),n.stopPropagation()})}O=!0}function l(e){if(e.render){var t=a(e);w.html(t),T=w.children(e.handle)}else T=w.children(e.handle);c(e.value)}function s(e){var i=[];e=String(e),S.half&&e.indexOf(".")>-1?i=e.split("."):i.push(e),T.removeClass(y).removeClass(x),T.each(function(e,n){1==i.length&&e<i[0]?t(n).addClass(y):2==i.length&&(e<i[0]&&t(n).addClass(y),e==i[0]&&t(n).addClass(x))})}function c(e){return e?(w.attr("value",e),s(e),k=e,b.call(this,"change",e)):k=w.attr("value"),k}function u(e){var t=o(e);w.attr("value",e).html(t),k=e}function d(e){var e=0!=e;return e?(w.off("click.bui",S.handle),b.call(this,"disabled")):f(),this}function f(e){return S.disabled=!1,r(),b.call(this,"undisabled"),this}function h(e){var e=1==e;w&&(w.off("click.bui"),e&&w.remove()),m("change")}function p(t){var i={};return e.widget.call(i,t)}function g(t,i){return e.option.call(I,t,i)}function v(t,i){return e.on.apply(I,arguments),this}function m(t,i){return e.off.apply(I,arguments),this}function b(t){I.self=this==window||this==I?null:this,e.trigger.apply(I,arguments)}var w,y,x,k,T,C={id:"",handle:".bui-rating-cell",fullClassName:"bui-rating-cell-full",halfClassName:"bui-rating-cell-half",half:!1,stars:5,value:0,disabled:!1,render:!0,callback:null},I={handle:{},on:v,off:m,disabled:d,show:u,value:c,destroy:h,widget:p,option:g,config:S,init:n},S=I.config=t.extend(!0,{},C,e.config.rating,i),O=!1;return n(S),I}}(window.bui||{},window.libs),function(e,t){e.actionsheet=function(i){function n(i){var n=t.extend(!0,T,i);n.appendTo=n.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),b=e.obj(n.trigger),T=k.config=n,w=e.guid();var l=o(n.buttons);return t(n.appendTo).append(l),v=e.dialog({id:w,position:n.position,mask:n.mask,effect:n.effect,opacity:n.opacity,onMask:function(e){r()}}),y=v.selector(),m=y.find(n.handle),C||a(),this}function a(){var e=function(e){e.target=this,T.callback&&T.callback.call(this,e,k),g.call(this,"click",e)},i=function(e){t(this).hasClass("disabled")||l.call(this)};y&&y.on("click.bui",T.handle,e),b&&b.on("click.bui",i),C=!0}function o(e){var i=parseFloat(T.width),n=i>0?"width:"+i+"px;left:50%;right:0;margin-left:-"+i/2+"px;":"",a="";return e&&e.length&&(a+='<div id="'+w+'" class="bui-actionsheet" style="'+n+'">',a+='    <ul class="bui-list">',t.each(e,function(e,t){a+='        <li class="bui-btn '+(t.className||"")+'" value="'+(t.value||"")+'">'+(t.name||"")+"</li>"}),a+="    </ul>",T.cancelText&&(a+='    <div class="bui-btn" value="cancel">'+T.cancelText+"</div>"),a+="</div>"),a}function r(e){var t=this;return g.call(t,"hidebefore",{target:y[0]}),v.isOpen()&&v.close(function(){e&&e.call(k),g.call(t,"hide",{target:y[0]})}),this}function l(e){var t=this;return g.call(t,"showbefore",{target:y[0]}),!v.isOpen()&&v.open(function(){e&&e.call(k),g.call(t,"show",{target:y[0]})}),this}function s(e){var t=b;return t&&t.addClass("disabled"),this}function c(){var e=b;return e&&e.removeClass("disabled"),this}function u(e){var e=1==e;b&&b.off("click.bui"),p("hide"),p("show"),v&&v.destroy(e)}function d(t){var i={dialog:v};return e.widget.call(i,t)}function f(t,i){return e.option.call(k,t,i)}function h(t,i){return e.on.apply(k,arguments),this}function p(t,i){return e.off.apply(k,arguments),this}function g(t){k.self=this==window||this==k?null:this,e.trigger.apply(k,arguments)}var v,m,b,w,y,x={appendTo:"",trigger:"",handle:".bui-btn",position:"bottom",effect:"fadeInUp",width:0,mask:!0,opacity:.6,buttons:[],cancelText:"取消",callback:null},k={handle:{},on:h,off:p,disabled:s,enabled:c,hide:r,show:l,destroy:u,widget:d,option:f,config:T,init:n},T=k.config=t.extend(!1,{},x,e.config.actionsheet,i),C=!1;return n(T),k}}(window.bui||{},window.libs),function(e,t){e.number=function(i){function n(i){var n=t.extend(!0,E,i);return j=!1,w=n.max,y=n.min,x=n.step,I=n.id?e.obj(n.id):t(".bui-number"),E=O.config=n,n.render&&o(n),k=I.children(n.prev),T=I.children(n.next),C=I.children(n.input),L||r(n),n.disabled&&C.attr("disabled","disabled"),s(n.value),this}function a(e){var t="";return t+='    <div class="bui-number-prev"><i class="icon-minus"></i></div>',t+='    <input type="text" value="'+e.value+'"/>',t+='    <div class="bui-number-next"><i class="icon-plus"></i></div>'}function o(e){var t=a(e);return I.html(t),this}function r(i){return I.off("input",i.input).on("input",i.input,e.unit.debounce(function(e){var n=isNaN(parseInt(t(this).val(),10))?0:parseInt(t(this).val(),10);/^[0-9]*$/i.test(n)&&s.call(this,n),i.onInput&&i.onInput.call(this,n),e.stopPropagation()},400)),I.off("click.bui",i.prev).on("click.bui",i.prev,function(e){var n=t(this).parent().children(E.input);d.call(n,e),i.callback&&i.callback.call(n,e,O),e.preventDefault(),e.stopPropagation()}),I.off("click.bui",i.next).on("click.bui",i.next,function(e){var n=t(this).parent().children(E.input);f.call(n,e),i.callback&&i.callback.call(n,e,O),e.preventDefault(),e.stopPropagation()}),L=!0,this}function l(){var e=this==O?C:t(this);return parseInt(e.val(),10)}function s(e){var i=this==O?C:t(this);b.call(i,"change",e);var n=e||0;return n>w&&(n=w),n<y&&(n=y),n&&n>=y&&n<=w&&(n=n),i.val(parseInt(n,10)),this}function c(e){var t=0;return e?(s.call(this,e),t=e):t=l.call(this),t}function u(e){var i=this==O?C:t(this),e=0!=e;return e?i.attr("disabled","disabled"):i.removeAttr("disabled"),this}function d(){var e=this==O?C:t(this),i=e.val(),n=parseInt(i,10),a=n-=x;return s.call(this,a),b.call(e,"prev",a),this}function f(){var e=this==O?C:t(this),i=e.val(),n=parseInt(i,10),a=n+=x;return s.call(this,a),b.call(e,"next",a),this}function h(e){var e=1==e;I&&(I.off("click.bui"),I.off("input"),e&&I.remove()),m("prev"),m("next"),m("change"),j=!0}function p(t){var i={};return e.widget.call(i,t)}function g(t,i){return e.option.call(O,t,i)}function v(t,i){return e.on.apply(O,arguments),this}function m(t,i){return e.off.apply(O,arguments),this}function b(t){O.self=this==window||this==O?null:this,e.trigger.apply(O,arguments)}var w,y,x,k,T,C,I,S={id:null,min:0,max:100,step:1,value:0,disabled:!1,render:!0,tips:!1,prev:".bui-number-prev",input:"input",next:".bui-number-next",onInput:null,callback:null},O={handle:{},on:v,off:m,disabled:u,value:c,prev:d,next:f,destroy:h,widget:p,option:g,config:E,init:n},E=O.config=t.extend(!0,{},S,e.config.number,i),L=!1,j=!1;return n(E),O}}(bui||{},libs),function(e,t){e.stepbar=function(i){function n(i){var n=t.extend(!0,w,i);if(!n.id)return void e.hint("stepbar id不能为空");g=e.obj(n.id),w=b.config=n;var r=a(n.data);return n.lineCenter&&g.addClass("bui-stepbar-center"),g.html(r),v=g.children(),y||o(n),this}function a(e){var i="";return t.each(e,function(e,t){var n=w.hasNumber?e+1:"",a=w.hasNumber?"bui-stepbar-number":"";i+='<div class="bui-stepbar-cell '+a+'">',i+='    <span class="bui-stepbar-dot">'+n+"</span>",i+='    <div class="bui-stepbar-text">',t.title&&(i+="        <h3>"+t.title+"</h3>"),t.subtitle&&(i+='        <p class="bui-stepbar-time">'+t.subtitle+"</p>"),t.content&&(i+='        <p class="bui-stepbar-desc">'+t.content+"</p>"),i+="    </div>",i+="</div>"}),i}function o(e){var i=function(i){if(e.click){r(t(this).index())}e.callback&&e.callback.call(this,i,b)};return g.on("click.bui",e.handle,i),y=!0,this}function r(e){if("number"==typeof e)return e=e>=v.length-1?v.length-1:e<0?0:e,v.each(function(i,n){i<e&&t(n).removeClass("active").addClass("visited"),i==e&&t(n).removeClass("visited").addClass("active"),i>e&&t(n).removeClass("visited active")}),p.call(this,"change",e),e;var e=g.children(".active").index();return e}function l(){var e=r()+1;return p.call(this,"next",e),r(e)}function s(){var e=r()-1;return p.call(this,"prev",e),r(e)}function c(e){var e=1==e;g&&(g.off("click.bui"),e&&g.remove()),h("next"),h("prev"),h("change")}function u(t){var i={};return e.widget.call(i,t)}function d(t,i){return e.option.call(b,t,i)}function f(t,i){return e.on.apply(b,arguments),this}function h(t,i){return e.off.apply(b,arguments),this}function p(t){b.self=this==window||this==b?null:this,e.trigger.apply(b,arguments)}var g,v,m={id:null,handle:".bui-stepbar-cell",hasNumber:!1,lineCenter:!1,click:!0,data:[],callback:null},b={handle:{},on:f,off:h,value:r,next:l,prev:s,destroy:c,widget:u,option:d,config:w,init:n},w=b.config=t.extend(!0,{},m,e.config.stepbar,i),y=!1;return n(w),b}}(window.bui||{},window.libs);var i=function(e){function t(e){return window.cancelAnimationFrame?window.cancelAnimationFrame(e):window.webkitCancelAnimationFrame?window.webkitCancelAnimationFrame(e):window.mozCancelAnimationFrame?window.mozCancelAnimationFrame(e):window.clearTimeout(e)}function i(e,t){for(var i=0;i<e.length;i++){var n=e[i].style;n.webkitTransform=n.MsTransform=n.msTransform=n.MozTransform=n.OTransform=n.transform=t}return e}function n(e,t){"string"!=typeof t&&(t+="ms");for(var i=0;i<e.length;i++){var n=e[i].style;n.webkitTransitionDuration=n.MsTransitionDuration=n.msTransitionDuration=n.MozTransitionDuration=n.OTransitionDuration=n.transitionDuration=t}return e}function a(e,t){var i,n,a,o;return void 0===t&&(t="x"),a=window.getComputedStyle(e,null),window.WebKitCSSMatrix?(n=a.transform||a.webkitTransform,n.split(",").length>6&&(n=n.split(", ").map(function(e){return e.replace(",",".")}).join(", ")),o=new WebKitCSSMatrix("none"===n?"":n)):(o=a.MozTransform||a.OTransform||a.MsTransform||a.msTransform||a.transform||a.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),i=o.toString().split(",")),"x"===t&&(n=window.WebKitCSSMatrix?o.m41:16===i.length?parseFloat(i[12]):parseFloat(i[4])),"y"===t&&(n=window.WebKitCSSMatrix?o.m42:16===i.length?parseFloat(i[13]):parseFloat(i[5])),n||0}var o=this,r={updateValuesOnTouchmove:!1,rotateEffect:!1,momentumRatio:7,freeMode:!1};e=e||{};for(var l in r)void 0===e[l]&&(e[l]=r[l]);o.params=e,o.cols=[],o.initialized=!1;var s=function(){
var e=navigator.userAgent,t=e.match(/(Android);?[\s\/]+([\d.]+)?/),i=e.match(/(iPad).*OS\s([\d_]+)/),n=e.match(/(iPod)(.*OS\s([\d_]+))?/),a=!i&&e.match(/(iPhone\sOS)\s([\d_]+)/),o=i||n||a,r=!!t;return o||navigator.userAgent.toLowerCase().indexOf("safari")>=0&&navigator.userAgent.toLowerCase().indexOf("chrome")<0&&!r}();return o.setValue=function(e,t){var i=0;if(0===o.cols.length)return o.value=e,void o.updateValue(e);for(var n=0;n<o.cols.length;n++)o.cols[n]&&!o.cols[n].divider&&(o.cols[n].setValue(e[i],t),i++)},o.updateValue=function(e){for(var t=e||[],i=[],n=0;n<o.cols.length;n++)o.cols[n].divider||(t.push(o.cols[n].value),i.push(o.cols[n].displayValue));t.indexOf(void 0)>=0||(o.value=t,o.displayValue=i,o.params.onChange&&o.params.onChange(o,o.value,o.displayValue))},o.initPickerCol=function(e,r){function l(e){if(!k&&!x){var t=e.originalEvent||e;t.preventDefault(),x=!0,T=C=t.targetTouches[0].pageY,I=(new Date).getTime(),P=!0,O=L=a(p.wrapper[0],"y")}}function c(e){if(x){var r=e.originalEvent||e;r.preventDefault(),P=!1,C=r.targetTouches[0].pageY,k||(t(y),k=!0,O=L=a(p.wrapper[0],"y"),n(p.wrapper,"0ms")),r.preventDefault();L=O+(C-T),E=void 0,L<b&&(L=b-Math.pow(b-L,.8),E="min"),L>w&&(L=w+Math.pow(L-w,.8),E="max"),i(p.wrapper,"translate3d(0,"+L+"px,0)"),p.updateItems(void 0,L,0,o.params.updateValuesOnTouchmove),N=L-j||L,D=(new Date).getTime(),j=L}}function u(e){if(!x||!k)return void(x=k=!1);x=k=!1,n(p.wrapper,""),E&&("min"===E?i(p.wrapper,"translate3d(0,"+b+"px,0)"):i(p.wrapper,"translate3d(0,"+w+"px,0)")),S=(new Date).getTime();var t;S-I>300?t=L:(Math.abs(N/(S-D)),t=L+N*o.params.momentumRatio),t=Math.max(Math.min(t,w),b);var a=-Math.floor((t-w)/v);o.params.freeMode||(t=-a*v+w),i(p.wrapper,"translate3d(0,"+parseInt(t,10)+"px,0)"),p.updateItems(a,t,"",!0),setTimeout(function(){P=!0},100)}function d(e){if(P){t(y);var i=$(this).attr("data-picker-value");p.setValue(i)}}var f=$(e),h=f.index(),p=o.cols[h];if(!p.divider){p.container=f,p.wrapper=p.container.find(".picker-items-col-wrapper"),p.items=p.wrapper.find(".picker-item");var g,v,m,b,w;p.replaceValues=function(e,t,i){p.destroyEvents(),p.values=e,p.displayValues=t;var n=o.columnHTML(p,!0);p.wrapper.html(n),p.items=p.wrapper.find(".picker-item"),p.calcSize(),p.setValue(i||p.values[0],0,!0),p.initEvents()},p.calcSize=function(){o.params.rotateEffect&&(p.container.removeClass("picker-items-col-absolute"),p.width||(p.container[0].style.width=""));var e,t;e=0,t=p.container[0].offsetHeight,g=p.wrapper[0].offsetHeight,v=p.items[0].offsetHeight,m=v*p.items.length,b=t/2-m+v/2,w=t/2-v/2,p.width&&(e=p.width,parseInt(e,10)===e&&(e+="px"),p.container[0].style.width=e),o.params.rotateEffect&&(p.width||(p.items.each(function(){var t=$(this);t[0].style.width="auto",e=Math.max(e,t[0].offsetWidth),t[0].style.width=""}),p.container[0].style.width=e+2+"px"),p.container.addClass("picker-items-col-absolute"))},p.calcSize(),i(p.wrapper,"translate3d(0,"+w+"px,0)"),n(p.wrapper,"0ms");var y;p.setValue=function(e,t,a){void 0===t&&(t="");var o=p.wrapper.find('.picker-item[data-picker-value="'+e+'"]').index();void 0!==o&&-1!==o||(o=0);var r=-o*v+w;i(p.wrapper,"translate3d(0,"+r+"px,0)"),n(p.wrapper,t+"ms"),p.updateItems(o,r,t,a)},p.updateItems=function(e,t,r,l){void 0===t&&(t=a(p.wrapper[0],"y")),void 0===e&&(e=-Math.round((t-w)/v)),e<0&&(e=0),e>=p.items.length&&(e=p.items.length-1);var c=p.activeIndex;p.wrapper.find(".picker-selected").removeClass("picker-selected"),n(p.items,r);var u=p.items.eq(e).addClass("picker-selected");if(i(u,""),o.params.rotateEffect){Math.floor((t-w)/v);p.items.each(function(){var e=$(this),n=e.index()*v,a=w-t,o=n-a,r=o/v,l=Math.ceil(p.height/v/2)+1,c=-18*r;c>180&&(c=180),c<-180&&(c=-180),Math.abs(r)>l?e.addClass("picker-item-far"):e.removeClass("picker-item-far"),i(e,"translate3d(0, "+(-t+w)+"px, "+(s?-110:0)+"px) rotateX("+c+"deg)")})}(l||void 0===l)&&(p.value=u.attr("data-picker-value"),p.displayValue=p.displayValues?p.displayValues[e]:p.value,c!=e&&(p.onChange&&p.onChange(o,p.value,p.displayValue),o.updateValue()))},r&&p.updateItems(0,w,0);var x,k,T,C,I,S,O,E,L,j,N,D,P=!0;p.initEvents=function(e){var t=/hp-tablet/gi.test(navigator.appVersion),i="ontouchstart"in window&&!t,n=i?"touchstart":"mousedown",a=i?"touchmove":"mousemove",o=i?"touchend":"mouseup",r=e?"off":"on";p.container[r](n,l),p.container[r](a,c),p.container[r](o,u),"mouseup"==o&&document.documentElement.addEventListener("mouseleave",u,!1),p.items[r]("click",d)},p.destroyEvents=function(){p.initEvents(!0)},p.initEvents()}},o.columnHTML=function(e,t){var i="",n="";if(e.divider)n+='<div class="picker-items-col picker-items-col-divider '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'">'+e.content+"</div>";else{for(var a=0;a<e.values.length;a++)i+='<div class="picker-item" data-picker-value="'+e.values[a]+'">'+(e.displayValues?e.displayValues[a]:e.values[a])+"</div>";n+='<div class="picker-items-col '+(e.textAlign?"picker-items-col-"+e.textAlign:"")+" "+(e.cssClass||"")+'"><div class="picker-items-col-wrapper">'+i+"</div></div>"}return t?i:n},o.layout=function(){var e,t="",i="";o.cols=[];var n="";for(e=0;e<o.params.cols.length;e++){var a=o.params.cols[e];n+=o.columnHTML(o.params.cols[e]),o.cols.push(a)}i="picker-modal picker-columns "+(o.params.cssClass||"")+(o.params.rotateEffect?" picker-3d":""),t='<div class="'+i+'"><div class="picker-modal-inner picker-items">'+n+'<div class="picker-center-highlight"></div></div></div>',o.pickerHTML=t},o.init=function(){o.initialized||(o.layout(),o.container=$(o.pickerHTML),o.container.addClass("picker-modal-inline"),$(o.params.container).html(o.container),o.container.find(".picker-items-col").each(function(){var e=!0;(!o.initialized&&o.params.value||o.initialized&&o.value)&&(e=!1),o.initPickerCol(this,e)}),o.value?o.setValue(o.value,0):o.params.value&&o.setValue(o.params.value,0)),o.initialized=!0},o.init(),o};!function(e,t){e.picker=function(e){return new i(e)}}(window.bui||{},window.libs),function(e,i){e.pickerdate=function(){function n(e){if(e&&e.constructor==Date)return e;if(e&&"string"==typeof e){if(e=e.replace(/-/gim,"/").replace(/^(\d+\/\d+?)($|\s)/,function(e,t){return t+"/1"}),e.indexOf("/")<0){var t=new Date;e=t.getFullYear()+"/"+t.getMonth()+"/"+t.getDate()+" "+e}return new Date(e)}return"number"==typeof e?new Date(e):new Date}function a(e,t){var e,t,i=new Date;return i.getTime()<e.getTime()?e:i.getTime()>t.getTime()?t:i}function o(o){function r(e){var t=new Date("1970/1/1");return j.forEach(function(i,n){t["set"+i](e[S[i]].value-("Month"==i?1:0))}),t}function l(e){var t=n(e);return j.map(function(e,i){return t["get"+e]()+("Month"==e?1:0)})}function s(e){i(this).hasClass("disabled")||I&&!I.isOpen()&&I.open(function(){})}function c(t){T.self=this==window||this==T?null:this,e.trigger.apply(T,arguments)}var u,d=e.guid(),f={id:d,height:260,popup:!0,mask:!0,position:"bottom",effect:"fadeInUp",appendTo:"",rotateEffect:!1,buttons:[{name:"取消",className:""},{name:"确定",className:"primary-reverse"}],onMask:function(){I&&I.close()},callback:null},h=i.extend(!0,{},f,o);h.appendTo=h.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),h.callback=function(){var e=o.callback&&o.callback.call(this);if(1==e||void 0===e)if("取消"==i(this).text().trim()||"cancel"==i(this).text().trim()||"关闭"==i(this).text().trim())try{var t=new Date(u);T.value(t)}catch(e){}else u=T.value()};var p,g,v,m,b,w,y,x,k,T=this,C=function(){},I=null,S={},O=["FullYear","Month","Date"],E=["Hours","Minutes","Seconds"],L={FullYear:"year",Month:"month",Date:"date",Hours:"hour",Minutes:"minute",Seconds:"second"},j=[],N=!1;this.config={},this.option=function(){},this.cols=function(e){e=e||{};var t=[];return x=[],y=[],S={},j=[],O.forEach(function(i,n){"none"!==e[L[i]]&&(j.push(i),t.push(i))}),E.forEach(function(t,i){"none"!==e[L[t]]&&(j.push(t),x.push(t))}),t.forEach(function(t,i){S[t]=y.length,y.push(F[t](e[L[t]]))}),x.forEach(function(i,n){0==n&&0!=t.length?y.push(F.Space()):y.push(F.Divider()),0==t.length&&(y[0].content=""),S[i]=y.length,y.push(F[i](e[L[i]]))}),T.picker&&(T.picker.params.cols=y,T.picker.initialized=!1,T.picker.init()),N=!1,this},this.id=function(e){e&&!m&&(m=e)},this.reset=function(){return T.picker&&(T.picker.initialized=!1,T.picker.init()),this},this.min=function(e){return g=n(e||h.min||"1960/01/01 00:00:00"),this},this.max=function(e){return v=n(e||h.max||"2022/01/01 00:00:00"),this},this.value=function(e){if(e){var t=n(e),i=l(t);return T.picker.setValue(i,0),this}return w(T.picker,T.value,T.displayValue)},this.handle=function(t){if(t&&p!==t){var i=e.obj(p);i&&i.off("click",s),i=e.obj(t),i&&i.on("click",s),s.hasOpen=!1,p=t}return this};var D={y:function(e,t){return e.getFullYear().toString().slice(-t)},M:function(e,t){return((t>1?"0":"")+(e.getMonth()+1)).slice(-2)},d:function(e,t){return((t>1?"0":"")+e.getDate()).slice(-2)},h:function(e,t){return((t>1?"0":"")+e.getHours()).slice(-2)},m:function(e,t){return((t>1?"0":"")+e.getMinutes()).slice(-2)},s:function(e,t){return((t>1?"0":"")+e.getSeconds()).slice(-2)}};this.formatValue=function(e){return w=function(t,i,n){var a=r(t.cols);return e.replace(/y+|M+|d+|h+|m+|s+/g,function(e){return D[e[0]](a,e.length)})},T.picker&&T.picker.updateValue(),N=!1,this},this.onChange=function(e){return b=e||C,c.call(this,"change",k),this},this.popup=function(n){if(h.popup&&!I){var a='<div id="'+d+'" class="bui-dialog" >';a+='<div class="bui-dialog-main"><div id="'+d+'-picker"></div></div>',h.buttons&&h.buttons.length&&(a+='<div class="bui-dialog-foot bui-box">',i.each(h.buttons,function(e,i){var n="object"==(void 0===i?"undefined":t(i))&&"className"in i?" "+i.className:"",o="object"==(void 0===i?"undefined":t(i))&&"name"in i?i.name:i;a+='<div class="span1"><div class="bui-btn'+n+'">'+o+"</div></div>"}),a+="</div>"),a+="</div>";i(h.appendTo).append(a);m=e.obj(d+"-picker")}return this};var P=function(e,t,i){var n=r(e.cols),a=g["get"+t](),o=v["get"+t](),l=n.getTime(),s=g.getTime(),c=v.getTime();return l<s&&n["get"+t]()<a?("Month"==t&&(a+=1),void e.cols[S[t]].setValue(a)):l>c&&n["get"+t]()>o?("Month"==t&&(o+=1),void e.cols[S[t]].setValue(o)):void(i&&(l<s||l>c)&&e.cols[S[i]].onChange(e))},F={};F.FullYear=function(e){return e=e||{values:function(){for(var e=[],t=g.getFullYear(),i=v.getFullYear(),n=t;n<=i;n++)e.push(n);return e}()},{values:e.values,displayValues:e.displayValues,onChange:function(e,t,i){P(e,"FullYear",S.Month?"Month":"")}}},F.Month=function(e){return e=e||{values:[1,2,3,4,5,6,7,8,9,10,11,12],displayValues:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},{values:e.values,displayValues:e.displayValues,textAlign:"right",onChange:function(e,t,i){for(var n=new Date(e.cols[S.FullYear].value,parseInt(e.cols[S.Month].value),0).getDate(),a=[],o=1;o<=n;o++)a.push(o);var r=e.cols[S.Date];r&&r.replaceValues&&r.replaceValues(a,null,r.value<n?r.value:n),P(e,"Month",S.Date?"Date":"")}}},F.Date=function(e){return e=e||{values:function(){var e=31,t=[];do{t.unshift(e)}while(e--);return t}()},{values:e.values,displayValues:e.displayValues,onChange:function(e,t,i){P(e,"Date",S.Hours?"Hours":"")}}},F.Space=function(){return{divider:!0,content:"  "}},F.Hours=function(e){return e=e||function(){for(var e=[],t=[],i=0;i<24;i++)e.push(i),t.push(("0"+i).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,i){P(e,"Hours",S.Minutes?"Minutes":"")}}},F.Divider=function(){return{divider:!0,textAlign:"center",content:":"}},F.Minutes=function(e){return e=e||function(){for(var e=[],t=[],i=0;i<60;i++)e.push(i),t.push(("0"+i).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,i){P(e,"Minutes",S.Seconds?"Seconds":"")}}},F.Seconds=function(e){return e=e||function(){for(var e=[],t=[],i=0;i<60;i++)e.push(i),t.push(("0"+i).slice(-2));return{values:e,displayValues:t}}(),{values:e.values,displayValues:e.displayValues,onChange:function(e,t,i){P(e,"Seconds")}}},T.min(h.min),T.max(h.max),T.cols(h.cols),T.onChange(h.onChange),T.formatValue(h.formatValue||"yyyy-MM-dd hh:mm:ss"),T.id(h.id),T.handle(h.handle),T.popup(h),T.picker=e.picker({container:m,rotateEffect:h.rotateEffect,value:l(h.value?n(h.value):a(g,v)),onChange:function(e,t,i){var n=w(e,t,i);k!=n&&(k=n,b(n),c.call(this,"change",n))},cols:y}),h.popup&&!I&&(I=e.dialog(h),I&&I.on("open",function(){u=w(T.picker,T.value,T.displayValue),T.picker&&(T.picker.initialized=!1,T.picker.init()),c.call(this,"show")}),I&&I.on("close",function(){c.call(this,"hide")})),this.disabled=function(){var t=e.obj(p);return t&&t.addClass("disabled"),this},this.enabled=function(){var t=e.obj(p);return t&&t.removeClass("disabled"),this},this.destroy=function(e){var e=1==e;this.off("show"),this.off("hide"),this.off("change"),I&&I.destroy(e),T=null},this.widget=function(t){var i={dialog:I||{}};return e.widget.call(i,t)},this.on=function(t,i){return e.on.apply(T,arguments),this},this.off=function(t,i){return e.off.apply(T,arguments),this}}return function(e){return new o(e)}}()}(window.bui||{},window.libs),function(e,t){e.levelselect=function(i){function n(i){var n="";i.popup?(n=c(i),j.append(n),E=bui.dialog({id:m,height:i.height,mask:i.mask,scroll:!1,autoClose:i.autoClose,fullscreen:i.fullscreen,position:i.position,effect:i.effect,onMask:i.onMask}),w=e.obj(m)):(n=u(i),j.append(n),w=e.objId(m)),y=e.objId(b);var a=0;for(a=0;a<i.level;a++)!function(n){S[n]=t(".select-level-val-"+n,w),I[n]=t(".select-level-"+n,y),i.trigger&&(O[n]=t(i.trigger).eq(n)),C[n]=bui.select({id:I[n],type:"select",direction:"right",field:{name:i.field.name},popup:!1,data:[],onChange:function(){}}),S[n].on("click",function(){t(this).addClass("active").siblings().removeClass("active"),T.to(n)}),C[n]&&C[n].on("change",function(a){i.log&&console.log("change",n);var o=C[n].value()||0,r=C[n].text();k[n]=r;var l=[],c=[];"string"==typeof i.field.data?l=v[n][o][i.field.data]||v[n][o]:i.field.data&&"array"===e.typeof(i.field.data)&&(i.field.data.forEach(function(e,t){c.push(v[n][o][i.field.data[t]])}),l=c[0]||c[1]||c[2]||c[3]||c[4]||c[5]),v[n+1]=l,C[n+1]&&C[n+1].option("data",v[n+1]),C[n+2]&&C[n+2].option("data",[""]),I[n]&&I[n].find(".bui-btn").removeClass("active"),t(this).parents(".bui-btn").addClass("active"),s(n),S[n]&&S[n].text(r),S[n+1]&&S[n+1].text(i.placeholder),S[n+2]&&S[n+2].text(""),O[n]&&O[n].text(r),O[n+1]&&O[n+1].text(i.placeholder),O[n+2]&&O[n+2].text(""),a.ui={trigger:O[n],selector:S[n],index:n,select:C[n],data:v[n]},a.target=this,h.call(this,"change",a),n==i.level-1&&h.call(L,"lastchange",{target:this}),i.popup&&!E.isOpen()||(n==i.level-1?(i.log&&console.log("close"),i.autoClose&&E.close()):n%i.visibleNum==1&&(i.log&&console.log("next"),T.next()))})}(a);i.popup&&E?E.on("open",function(e){x=i.height-w.find(".select-value").height()-w.children(".bui-dialog-head").height(),r(i)}):(x=i.height,r(i)),S[0]&&S[0].text(i.placeholder),O[0]&&O[0].text(i.placeholder),v[0]=i.data,C[0].option("data",v[0]),i.value&&l(i.value),N=!1}function a(){E&&E.open(),h.call(this,"show")}function o(){E&&E.close(),h.call(this,"hide")}function r(e){T||(T=bui.tab({id:b,height:x,scroll:!0,zoom:!1,visibleNum:e.visibleNum}).lock(),T.on("to",function(e){s(t(this).index())}))}function l(t){if(void 0===t)return k;t&&"array"===e.typeof(t)?t.forEach(function(e,t){C[t].value(e)}):"string"==typeof t&&C[0].value(t)}function s(e){t(".select-value div",w).removeClass("active"),t(".select-value div",w).eq(e).addClass("active")}function c(e){var t="";return t+='<div id="'+m+'" class="bui-dialog bui-levelselect" style="display:none;">',t+='    <div class="bui-dialog-head">'+e.title+"</div>",t+='    <div class="bui-dialog-main">',t+=u(e),t+="    </div>",t+='    <div class="bui-dialog-close"><i class="icon-close"></i></div>',t+="</div>"}function u(e){var t="",i=0;if(e.popup||(t+='<div id="'+m+'" class="bui-levelselect">'),e.showValue){for(t+='    <div class="bui-box select-value">',i=0;i<e.level;i++)t+='        <div class="select-level-val-'+i+'"></div>';t+="    </div>"}for(t+='<div id="'+b+'" class="bui-tab bui-levelselect-tab">',t+='    <div class="bui-tab-main">',t+="        <ul>",i=0;i<e.level;i++)t+="            <li>",t+='                <div class="select-level-'+i+'"></div>',t+="            </li>";return t+="        </ul>",t+="    </div>",t+="</div>",e.popup||(t+="</div>"),t}function d(t,i){return e.on.apply(L,arguments),this}function f(t,i){return e.off.apply(L,arguments),this}function h(t){L.self=this==window||this==L?null:this,e.trigger.apply(L,arguments)}var p={popup:!0,data:[],height:300,appendTo:"",title:"所在地区",trigger:null,placeholder:"请选择",level:3,visibleNum:2,log:!1,mask:!0,autoClose:!0,fullscreen:!1,position:"bottom",effect:"fadeInUp",showValue:!0,onMask:null,value:[],field:{name:"n",data:["c","a"]}},g=t.extend(!0,{},p,i),v=[],m=bui.guid(),b=m+"-slide",w=null,y=null,x=0,k=[],T=null,C=[],I=[],S=[],O=[],E=null,L={init:n,show:a,hide:o,value:l,on:d,off:f,trigger:h};i.appendTo=i.appendTo||(e.hasRouter?router.currentPage()||"body":"body");var j=t(i.id?i.id:i.appendTo),N=!0;return n(g),L}}(window.bui||{},window.libs);e(function(e){!function(t,i){t.tab=function(n){var a={id:"",menu:".bui-tab-head > ul",children:".bui-tab-main > ul",header:"header",footer:"footer",item:"li",prev:".bui-tab-prev",next:".bui-tab-next",alignClassName:"",stopHandle:"",width:0,height:0,zoom:!1,swipe:!0,animate:!0,bufferEffect:!1,visibleNum:1,scrollNum:1,distance:80,direction:"x",autoplay:!1,autoheight:!1,scroll:!0,index:0,fullscreen:!1,autopage:!1,autoload:!1,async:!0,callback:null,onStart:null,onMove:null,onEnd:null},o=e.config=i.extend(!0,{},a,t.config.slide,n);return t.slide(o)}}(window.bui||{},window.libs)});!function(e,t){e.input=function(i){function n(i){var n=t.extend(!0,k,i);if(k=x.config=n,""!=n.id&&null!==n.id){if(p=e.obj(n.id),w=p.find(n.target),v=w.eq(0),m=e.unit.startWithClass(n.iconClass)?n.iconClass:"."+n.iconClass,!T){if(a(n),n.showLength){var r=o(n);p.append(r)}n.maxLength>0&&w.attr("maxlength",n.maxLength)}return this}}function a(e){return w.on(e.event,bui.unit.debounce(function(){var i=this.value,n=t(this).parent(),a=n.find(m);g=i,i.length>0&&e.showIcon?a&&a.length?a.css("display","block"):(n.append('<i class="'+m.substr(1)+'"></i>'),a=w.find(m)):a&&a.css("display","none"),e.showLength&&(b=n.find("em"),b.text(i.length)),e.onInput&&e.onInput.call(x,{target:this}),h.call(x,"input",{target:this})},100)),w.on("focus",function(){var i=this.value;g=i,v=t(this),e.showIcon&&(p.find(m).css("display","none"),i&&t(this).next().css("display","block")),e.onFocus&&e.onFocus.call(x,{target:this}),h.call(x,"focus",{target:this})}),w.on("blur",function(){var t=e.onBlur&&e.onBlur.call(x,{target:this});g=1==t||null===t?this.value:"",h.call(x,"blur",{target:this})}),e.showIcon&&p.on("click",m,function(){e.callback&&e.callback.call(x,{target:this}),h.call(x,"click",{target:this})}),T=!0,this}function o(e){v.parent();return'<span class="bui-input-length"><em>0</em>/'+e.maxLength+"</span>"}function r(e){return void 0!==e?(v.val(e),this):g}function l(){return v.val(""),v.next().css("display","none"),k.showLength&&b.text(0),this}function s(){return"text"==v.attr("type")?v.attr("type","password"):v.attr("type","text"),this}function c(t){var i={};return e.widget.call(i,t)}function u(t,i){return e.option.call(x,t,i)}function d(t,i){return e.on.apply(x,arguments),this}function f(t,i){return e.off.apply(x,arguments),this}function h(t){x.self=this==window||this==x?null:this,e.trigger.apply(x,arguments)}var p,g,v,m,b,w,y={id:"",target:"input,textarea",event:"input",iconClass:".icon-remove",showIcon:!0,showLength:!1,maxLength:0,onInput:null,onBlur:null,onFocus:null,callback:null},x={handle:{},empty:l,value:r,toggleType:s,on:d,off:f,widget:c,option:u,config:k,init:n},k=x.config=t.extend(!0,{},y,e.config.searchbar,i),T=!1;return n(k),x}}(bui||{},libs),function(e,t){e.ajax=function(i){function n(e){var i=function(t,i,n){var o;if("string"==typeof t&&"json"==e.dataType)try{o=JSON.parse(t)}catch(e){o=t}else o=t||{};s&&s(o,i,n),a.resolve(o,i,n)},n=function(t,i,n){var o;if("string"==typeof t&&"json"==e.dataType)try{o=JSON.parse(t)}catch(e){o=t}else o=t||{};c&&c(o,i,n),a.reject(o,i,n)};e.success=i,e.error=n;var r=e.type&&e.type.toUpperCase();e.type=r||e.method.toUpperCase(),o=t.ajax(e)}var a=t.Deferred(),o=null,r={data:{},method:"GET",dataType:"json",timeout:6e4,headers:{},processData:!0,mimeType:"none",cache:!1,async:!0,needJsonString:!0,contentType:"",localData:null,native:!0},l=t.extend(!0,{},r,e.config.ajax,i),s=l.success,c=l.fail||l.error;if(""===l.contentType&&"GET"==l.method?l.contentType="text/html;charset=UTF-8":""===l.contentType&&"POST"==l.method?l.contentType="application/x-www-form-urlencoded":l.contentType=l.contentType,"application/json"==l.contentType&&"object"===e.typeof(l.data)&&l.needJsonString)try{l.data=JSON.stringify(l.data)}catch(e){l.data=l.data}if(!l.url)return e.showLog("url不能为空","bui.ajax"),a;if(a.abort=function(){o&&o.abort()},l.localData)return s&&s(l.localData,200),a.resolve(l.localData,200),a;if(l.native&&e.isWebapp||!l.native&&!e.isWebapp)n(l);else{if(void 0===e.native.ajax)return n(l),a;a=e.native.ajax&&e.native.ajax(l)||a}return a}}(window.bui||{},window.libs),function(e,t){e.load=function(i){var n,a={url:"",param:{},reload:!1,replace:!1,native:!0},o=t.extend(!0,{},a,e.config.load,i),r=o.url;if(!o.url)return void e.showLog("url 不能为空!","bui.load:web");if(r.indexOf("tel:")>=0||r.indexOf("mailto:")>=0||r.indexOf("sms:")>=0)return void e.unit.openExtral(r);try{o.param="string"==typeof o.param&&JSON.parse(o.param)||o.param||{}}catch(t){return void e.showLog("param 参数值必须是一个{}对象","bui.load:web")}return document.activeElement.blur(),n=e.setUrlParams(o.url,o.param),o.reload&&e.isWebapp?void(window.location.href=n):o.reload&&!e.isWebapp?void(e.native.load&&e.native.load(o)):!o.replace||"load"in window.router?void("load"in window.router?window.router.load&&window.router.load(o):o.native&&e.isWebapp||!o.native&&!e.isWebapp?window.location.href=n:e.native.load&&e.native.load(o)):void window.location.replace(n)}}(window.bui||{},window.libs),function(e,t){e.getPageParams=function(i){var n=t.Deferred(),a={callback:null,native:!0};i=i||{};var o=t.extend(!0,{},a,e.config.getPageParams);if("function"==typeof i?o.callback=i:i&&"object"===e.typeof(i)&&(o=t.extend(!0,{},a,e.config.getPageParams,i)),"getPageParams"in window.router){var r=window.router.getPageParams&&window.router.getPageParams();o.callback&&o.callback(r),n.resolve(r)}else if(o.native&&e.isWebapp||!o.native&&!e.isWebapp){var l=e.getUrlParams();o.callback&&o.callback(l),n.resolve(l)}else n=e.native.getPageParams&&e.native.getPageParams(o)||n;return n}}(window.bui||{},window.libs),function(e,t){e.back=function(i){function n(){if(-1===a.index?window.history.back():window.history.go(a.index),u)try{clearTimeout(u)}catch(e){}a.delay&&a.callback?u=setTimeout(function(){a.callback()},500):a.callback&&a.callback()}var a,o={index:-1,name:"",delay:!0,native:!0,callback:null};if("function"==typeof i?(o.callback=i,a=t.extend(!0,{},o,e.config.back)):a=i&&"object"===e.typeof(i)?t.extend(!0,{},o,e.config.back,i):t.extend(!0,{},o,e.config.back),"back"in window.router)if(window.router.config.syncHistory){var r=router.getHistory(),l=r.length-1;if(a.name){var s=e.array.indexs(a.name,r,"pid"),c=s.length;a.index=c?-(r.length-s[c-1]-1):-1}Math.abs(a.index)>l&&(a.index=-l),r.length>1&&n()}else window.router.back&&window.router.back(a);else a.native&&e.isWebapp||!a.native&&!e.isWebapp?n():e.native.back&&e.native.back(a);var u}}(window.bui||{},window.libs),function(e,t){e.refresh=function(i){var n={native:!0},a=t.extend(!0,{},n,e.config.refresh,i);"refresh"in window.router?window.router.refresh&&window.router.refresh():a.native&&e.isWebapp||!a.native&&!e.isWebapp?window.location.reload(!0):e.native.refresh&&e.native.refresh()}}(window.bui||{},window.libs),function(e,t){e.run=function(i){var n={},a={id:"",name:"",data:null,onFail:null,native:!0};"string"==typeof i?n.id=i:i&&"object"===e.typeof(i)&&(n=t.extend(!0,{},a,e.config.run,i));var o=String(n.id);if(n.native&&e.isWebapp||!e.isWebapp&&!n.native){if(o.indexOf("http://")>-1||o.indexOf("https://")>-1){var r=e.setUrlParams(n.id,n.data);if(e.platform.isIos())return void(window.location.href=r);var l=window.open("","_blank")||window.open("","_newtab");l.location.href=r}}else e.native.run&&e.native.run(n)}}(window.bui||{},window.libs),function(e,t){e.fileselect=function(i){function n(i){var n=t.extend(!0,g,i);switch(g.appendTo=n.appendTo||(e.hasRouter?router.currentPage()||"body":"body"),n.mediaType){case"allmedeia":x="*";break;case"picture":case"image":x="image/*";break;case"video":x="video/*";break;case"audio":x="audio/*";break;default:x=n.mediaType}return w=[],y?r():h=e.native.fileselect&&e.native.fileselect(i,{module:v})||{},this}function a(i){m=null;var n=this,a=t.extend(!0,g,i);return b=a,y?(i.from?"picture"===i.from||"photo"===i.from||"savephoto"===i.from?f.removeAttr("capture"):f.attr("capture",i.from):f.removeAttr("capture"),f.off("change").on("change",function(){var t=this.files;if(t.length<1)return void(a.onFail&&a.onFail.call(n,t,w));t.length>1&&e.showLog("一次只能选一张图片","bui.fileselect:web"),m=t[0];try{if(!e.array.compare(t[0].name,w,"name")){var i={name:t[0].name,data:t[0],type:t[0].type,size:t[0].size};w.push(i)}}catch(t){e.showLog(t,"bui.fileselect:web")}a.onSuccess&&a.onSuccess.call(n,t,w)}),e.platform.isIos()&&"function"==typeof FastClick?f[0].dispatchEvent(new Event("click")):f.trigger("click")):h.add.bind(n)(a),this}function o(e){var e=e||{},t=e.data||m,i=e.onSuccess||function(){};e.onFail;if(y)try{!function(e){var t=new FileReader;t.onloadend=function(t){var n=new Image,a=!1,o=b.width||800,r=b.quality||.8,l=document.createElement("canvas"),s=l.getContext("2d");n.src=this.result,n.onload=function(){if(!a)return l.width=o,l.height=o*(n.height/n.width),s.drawImage(n,0,0,l.width,l.height),n.src=l.toDataURL("image/jpeg",r),i&&i.call(v,n.src,e),void(a=!0)}},t.readAsDataURL(e)}(t)}catch(e){}else h.toBase64(e);return this}function r(){if(void 0==f){d=bui.guid();var e=g.from?'capture="'+g.from+'"':"",i='<input type="file" accept="'+x+'" name="uploadFiles" id="'+d+'" '+e+' style="display:none"/>';t(g.appendTo).append(i),f=t("#"+d)||t('input[name="uploadFiles"]')}}function l(t,i){var i=i||"name";if(!y)return w=h.remove(t,i);if("string"==typeof t){e.array.remove(t,w,i);var n=w.length?w[w.length-1].data:null;return m=n,w}return this}function s(){return w=[],m=null,y||h.clear(),w}function c(){return w=y?w:h.data()}function u(){return m=y?m:h.value()}var d,f,h,p={native:!0,appendTo:"",quality:.8,from:"camera",width:800,height:800,mediaType:"picture"},g=t.extend(!0,{},p,e.config.fileselect,i),v={add:a,remove:l,clear:s,value:u,data:c,toBase64:o,init:n},m=null,b=null,w=[],y=g.native&&e.isWebapp||!g.native&&!e.isWebapp,x="*";return n(g),v}}(bui||{},libs),function(e,t){e.file=function(i){function n(t){return b=e.fileselect(t),g=a(t),v=o({root:!0,create:!0}),this}function a(i){function n(e){var t="";try{switch(e.code){case FileError.QUOTA_EXCEEDED_ERR:t="QUOTA_EXCEEDED_ERR";break;case FileError.NOT_FOUND_ERR:t="NOT_FOUND_ERR";break;case FileError.SECURITY_ERR:t="SECURITY_ERR";break;case FileError.INVALID_MODIFICATION_ERR:t="INVALID_MODIFICATION_ERR";break;case FileError.INVALID_STATE_ERR:t="INVALID_STATE_ERR";break;default:t="Unknown Error"}}catch(e){}var i={msg:t};a.reject(i)}var a=t.Deferred();return C?(h="bui.app",p=window,m=1024*parseInt(T.size)*1024,window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem,navigator.webkitPersistentStorage&&navigator.webkitPersistentStorage.requestQuota(m,function(e){window.requestFileSystem(window.PERSISTENT,e,function(e){a.resolve(e)},n)})):w=e.native.file&&e.native.file(i,{fileselect:b,module:k})||{},a}function o(e){var i={folderName:h,root:!1,create:!1,msg:"",param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},n=t.extend({},i,e),a="";if(n.create?(a="创建 ",n.param.create=!0):(a="获取 ",n.param.create=!1),C){var o=r(n.folderName);o=n.root?o:h+"/"+o,g.done(function(e){e.root.getDirectory(o,n.param,function(t){n.onSuccess&&n.onSuccess.call(k,t,e)},function(e){var t={msg:a+o+" 文件夹失败"};n.onFail&&n.onFail.call(k,t)})}).fail(function(e){var t={msg:"文件系统还没准备好."};n.onFail&&n.onFail.call(k,t)})}else w.getFolder(n);return this}function r(e){var t;return"."==e[0]||"/"==e[0]||" "==e[0]?(t=e.slice(1),r(t)):"."!=e[0]&&"/"!=e[0]&&" "!=e[0]?e:void 0}function l(e){return e&&e.indexOf("/")>-1?e.slice(e.lastIndexOf("/")+1,e.indexOf("?")>-1?e.indexOf("?"):void 0):e}function s(e){var i={fileName:"",folderName:"",root:!1,create:!1,param:{create:!1,exclusive:!1},onSuccess:null,onFail:null},n=t.extend({},i,e),a="";if(n.create?(a="创建 ",n.param.create=!0):(a="获取 ",n.param.create=!1),!n.fileName||n.fileName.indexOf(".")<0)return void(n.onFail&&n.onFail());if(C){var r=l(n.fileName);o({root:n.root,folderName:n.folderName,create:!0,onSuccess:function(e,t){var i=e.name==h?e.name+"/"+r:h+"/"+e.name+"/"+r;t.root.getFile(i,n.param,function(e){y=e,n.onSuccess&&n.onSuccess.call(k,e,t)},function(e){var t={msg:a+r+" 文件失败"};n.onFail&&n.onFail.call(k,t)})},onFail:function(e){n.onFail&&n.onFail(e)}})}else w.getFile(n);return this}function c(e){var i=t.extend(!0,{},e);return C?o({root:i.root,folderName:i.folderName,create:i.create,onSuccess:function(e,t){e.removeRecursively(function(){i.onSuccess&&i.onSuccess.call(k,e,t)},function(t){var n={msg:"删除 "+i.folderName+" 文件失败"};i.onFail&&i.onFail.call(k,n,e)})},onFail:function(e){var t={msg:"删除 "+i.folderName+" 文件失败"};i.onFail&&i.onFail.call(k,t)}}):w.removeFolder(i),this}function u(e){var i=t.extend(!0,{},e);return C?s({root:i.root,create:i.create,folderName:i.folderName,fileName:i.fileName,onSuccess:function(e,t){e.remove(function(){i.onSuccess&&i.onSuccess.call(k,e,t)},function(t){var n={msg:"删除 "+i.fileName+" 文件失败"};i.onFail&&i.onFail.call(k,n,e)})},onFail:function(e){var t={msg:"删除 "+i.fileName+" 文件失败"};i.onFail&&i.onFail.call(k,t)}}):w.removeFile(i),this}function d(t){var i=t||{};if(i.url){l(i.url);return C?e.showLog("web暂不支持open方法","bui.file.open:web"):w.open(i),this}}function f(e){return b.toBase64(e),this}var h,p,g,v,m,b,w,y,x={size:10,native:!0},k={getFolder:o,removeFolder:c,getFile:s,getFileName:l,removeFile:u,toBase64:f,open:d,init:n},T=k.config=t.extend(!0,{},x,e.config.file,i),C=T.native&&e.isWebapp||!T.native&&!e.isWebapp;return n(T),k}}(window.bui||{},window.libs),function(e,t){e.upload=function(i){function n(t){return v=e.loading({display:"block",width:30,height:30,opacity:0,callback:function(){u()}}),m=e.fileselect({native:t.native,from:t.from,mediaType:t.mediaType}),E||(w=e.native.upload&&e.native.upload(t,{loading:v,fileselect:m,module:I})||{}),t.data?(c(t),this):this}function a(e){return m.add.bind(I)(e),this}function o(e,t){var i=s(),n=i.length;return n&&m.remove(i[n-1].name,t),this}function r(){return m.clear(),this}function l(e){return m.toBase64(e),this}function s(){return m.data()}function c(e){var i=t.extend(!0,{},C,e);if(x=i.url,y=m.value(),S=i.showProgress,y){if(S&&v.show(),E){var n=i.data,a=new FormData;a.append(i.fileKey,y);for(var o in n)a.append(o,n[o]);i.data=a,d(i)}else w.start(i);return this}}function u(e){return E?(v&&v.stop(),b&&b.abort(),e&&e.call(I,v,b)):w.stop(e),this}function d(e){var i=e.onSuccess,n=e.onFail;return b=t.ajax({url:x,type:e.method,data:e.data,cache:e.cache,headers:e.headers,contentType:e.contentType,processData:e.processData,timeout:e.timeout,xhr:function(){var e=t.ajaxSettings.xhr();if(f&&e.upload)return e.upload.addEventListener("progress",f,!1),e},success:function(e){p(),i&&i.call(I,e)},error:function(e,t){p(),n&&n.call(I,e,t)}}),this}function f(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);k=t.toString()+"%",t<100?h(k):p(),O&&O.call(I,k)}})}function h(e){return v&&v.show({text:e}),this}function p(){
return v&&v.stop(),this}function g(t){var i={loading:v,fileselect:m,ajax:b};return e.widget.call(i,t)}var v,m,b,w,y,x,k,T={url:"",data:null,headers:{},showProgress:!0,timeout:6e4,native:!0,contentType:!1,processData:!1,method:"POST",fileKey:"file",mediaType:"picture",from:"picture",onProgress:null,onSuccess:null,onFail:null},C=t.extend(!0,{},T,e.config.upload,i),I={init:n,add:a,remove:o,clear:r,data:s,start:c,stop:u,toBase64:l,widget:g},S=C.showProgress,O=C.onProgress,E=C.native&&e.isWebapp||!C.native&&!e.isWebapp;return n(C),I}}(window.bui||{},window.libs),function(e,t){e.download=function(i){function n(t){return y=e.loading({display:"block",width:30,height:30,opacity:0,callback:function(){r()}}),h=e.file({native:t.native}),C?function(e){h.getFolder({folderName:e.folderName,create:!1,onSuccess:function(e,t){m=e.fullPath},onFail:function(t){h.getFolder({folderName:e.folderName,create:!0,onSuccess:function(e,t){m=e.fullPath},onFail:function(e){O&&O(e)}})}}),e.url&&a(e)}(t):p=e.native.download&&e.native.download(t,{file:h,loading:y,module:k})||{},this}function a(e){var i=t.extend(!0,{},T,e);g=i.url,v=encodeURI(g),S=i.onProgress,I=i.showProgress,I&&y.show({text:"0%"}),b=m+"/"+(e.fileName||h.getFileName(g)),C?(i.cache=!1,i.contentType=!1,i.processData=!1,f=t.ajax({url:v,type:i.method,data:i.data,cache:i.cache,headers:i.headers,contentType:i.contentType,processData:i.processData,timeout:i.timeout,xhr:function(){var e=t.ajaxSettings.xhr();if(l&&e)return e.addEventListener("progress",l,!1),e},success:function(t){var n=e.fileName||h.getFileName(i.url);h.getFile({fileName:n,folderName:i.folderName,create:!0,onSuccess:function(e,t){i.onSuccess&&i.onSuccess.call(k,e.fullPath,t)}})},fail:function(e){c(),i.onFail&&i.onFail.call(k,e)}})):p.start(i)}function o(e){var i=t.extend(!0,{autoDown:!0},T,e),n=e.fileName||h.getFileName(i.url);h.getFile({fileName:n,folderName:i.folderName,onSuccess:function(e,t){i.onSuccess&&i.onSuccess.call(k,e.fullPath,e,t)},onFail:function(e){i.autoDown=a(i)}})}function r(e){C?(c(),f&&f.abort()):p.stop(),e&&e.call(k,y,f)}function l(e){window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame,window.requestAnimationFrame(function(){if(e.lengthComputable){var t=Math.round(100*e.loaded/e.total);w=t.toString()+"%",t<100?s(w):c(),S&&S.call(k,w)}})}function s(e){I&&y&&y.show({text:e})}function c(){I&&y&&y.stop()}function u(e){return h.toBase64(e),this}function d(t){var i={loading:y,file:h,ajax:f};return e.widget.call(i,t)}var f,h,p,g,v,m,b,w,y,x={url:"",data:{},headers:{},method:"GET",showProgress:!0,timeout:6e4,fileName:"",folderName:"download",native:!0,onProgress:null,onSuccess:null,onFail:null},k={getFile:o,start:a,stop:r,toBase64:u,init:n,widget:d},T=k.config=t.extend(!0,{},x,e.config.download,i),C=T.native&&e.isWebapp||!T.native&&!e.isWebapp,I=T.showProgress,S=T.onProgress,O=T.onFail;return n(T),k}}(window.bui||{},window.libs),function(e,t){e.currentPlatform="webapp",e.ready=function(i){e.isWebapp=void 0===e.isWebapp?e.debug:e.isWebapp;var n=t.Deferred();if(e.isWebapp)t(document).ready(function(){i&&i(),e.trigger.call(e,"pageready"),n.resolve()});else{if(void 0===e.native.ready)return e.showLog("当前bui.js为webapp版本,不支持原生方法,请更换bui.js为对应平台版本"),n;n=e.native.ready&&e.native.ready(i)||n}return n}}(window.bui||{},window.libs);e(function(e){!function(t,i){t.init=function(e){var n,a={id:".bui-page",height:0,header:"header",main:"main",footer:"footer"};if("object"==t.typeof(e))n=i.extend({},a,t.config.init,e);else{var o={};o.height=e,n=i.extend({},a,o)}var r=n.height||document.documentElement.clientHeight;if(!(t.obj(n.main).length<1)){try{var l=t.obj(n.id),s=n.header.indexOf("#")>-1?t.obj(n.header)[0]:l.children(n.header)[0],c=n.footer.indexOf("#")>-1?t.obj(n.footer)[0]:l.children(n.footer)[0],u=n.main.indexOf("#")>-1?t.obj(n.main):l.children(n.main),d=s?s.offsetHeight:0,f=c?c.offsetHeight:0,h=r-d-f;u.height(h)}catch(e){t.showLog(e,"bui.init")}return h}},window.loader=t.loader(),t.define=loader.define,t.require=loader.require,t.map=loader.map,t.import=loader.import,t.checkLoad=loader.checkLoad,t.checkDefine=loader.checkDefine,window.addEventListener?window.addEventListener("load",function(e){t.trigger.call(t,"onload")},!1):window.attachEvent("onload",function(e){t.trigger.call(t,"onload")}),i(document).ready(function(){t.isWebapp=void 0===t.isWebapp?t.debug:t.isWebapp,t.trigger.call(t,"pagebefore"),t.platform.isWindow()||t.platform.isMac()?window.viewport=t.viewport(40):window.viewport=t.viewport(),t.config.init.auto&&t.init(),"function"==typeof FastClick&&FastClick.attach(document.body),t.trigger.call(t,"pageinit")});try{var n="hidden"in document?"hidden":"webkitHidden"in document?"webkitHidden":"",a=n.replace(/hidden/i,"visibilitychange"),o=function(e){document[n]?t.trigger.call(t,"pagehide",e):t.trigger.call(t,"pageshow",e)};document.addEventListener(a,o)}catch(e){}try{navigator.control.gesture(!1),navigator.control.longpressMenu(!1)}catch(e){}e.exports?e.exports.bui=t:window.bui=t}(window.bui||{},window.libs)})});
